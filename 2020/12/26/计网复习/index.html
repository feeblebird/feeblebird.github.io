<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>计网复习 | Komorebi</title><meta name="description" content="PoP3(Post Office Protocol version 3)   POP3的默认TCP端口是110   POP3操作过程中，如果模式是download and delete 那么用户下载一封邮件后，这个邮件会被标记成delete，在POP协议进入第三阶段后，这些邮件会被删除       POP3有两种模式：   download and delete 不可以多终端查看，下载后删除"><meta name="keywords" content="计算机网络"><meta name="author" content="komorebi"><meta name="copyright" content="komorebi"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://feeblebird.github.io/2020/12/26/%E8%AE%A1%E7%BD%91%E5%A4%8D%E4%B9%A0/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="计网复习"><meta property="og:url" content="http://feeblebird.github.io/2020/12/26/%E8%AE%A1%E7%BD%91%E5%A4%8D%E4%B9%A0/"><meta property="og:site_name" content="Komorebi"><meta property="og:description" content="PoP3(Post Office Protocol version 3)   POP3的默认TCP端口是110   POP3操作过程中，如果模式是download and delete 那么用户下载一封邮件后，这个邮件会被标记成delete，在POP协议进入第三阶段后，这些邮件会被删除       POP3有两种模式：   download and delete 不可以多终端查看，下载后删除"><meta property="og:image" content="https://i.loli.net/2020/08/05/S9tDOx7hiKQmCqa.png"><meta property="article:published_time" content="2020-12-26T11:26:01.000Z"><meta property="article:modified_time" content="2020-12-27T11:12:01.538Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"limitCount":50,"languages":{"author":"作者: komorebi","link":"链接: ","source":"来源: Komorebi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-27 19:12:01'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.0.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://i.loli.net/2020/08/02/WuXQnAJZ6twj5HU.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">38</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">37</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">18</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#pop3post-office-protocol-version-3"><span class="toc-number">1.</span> <span class="toc-text"> PoP3(Post Office Protocol version 3)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#imapinternet-mail-access-protcol"><span class="toc-number">2.</span> <span class="toc-text"> IMAP(Internet Mail Access Protcol)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#http%E9%82%AE%E4%BB%B6%E6%8E%A5%E6%94%B6%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.</span> <span class="toc-text"> HTTP(邮件接收协议)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dnsdomain-name-system"><span class="toc-number">4.</span> <span class="toc-text"> DNS(Domain Name system)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#p2p%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91bittorrent%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.</span> <span class="toc-text"> P2P文件分发BitTorrent协议</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E6%B5%81"><span class="toc-number">6.</span> <span class="toc-text"> 视频流</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cdncontent-distribution-networks"><span class="toc-number">7.</span> <span class="toc-text"> CDN(content distribution networks)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8Bsocket-%E7%BC%96%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text"> 套接字编程(socket 编程)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82link-layer"><span class="toc-number">9.</span> <span class="toc-text"> 数据链路层(link layer)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mac%E5%9C%B0%E5%9D%80"><span class="toc-number">10.</span> <span class="toc-text"> MAC地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#arpaddress-resolutino-protocol-%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE"><span class="toc-number">11.</span> <span class="toc-text"> ARP(Address Resolutino Protocol 地址解析协议)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#transport%E7%94%A8port%E6%9D%A5%E5%AF%BB%E5%9D%80network%E7%94%A8ip%E6%9D%A5%E5%AF%BB%E5%9D%80"><span class="toc-number">12.</span> <span class="toc-text"> Transport用port来寻址，Network用ip来寻址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">13.</span> <span class="toc-text"> 以太网</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/08/05/S9tDOx7hiKQmCqa.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Komorebi</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">计网复习</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-26T11:26:01.000Z" title="发表于 2020-12-26 19:26:01">2020-12-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-27T11:12:01.538Z" title="更新于 2020-12-27 19:12:01">2020-12-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">计算机网络读书笔记</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="pop3post-office-protocol-version-3"><a class="markdownIt-Anchor" href="#pop3post-office-protocol-version-3"></a> PoP3(Post Office Protocol version 3)</h1>
<ul>
<li>
<p>POP3的<strong>默认TCP端口是110</strong></p>
</li>
<li>
<p>POP3操作过程中，如果模式是download and delete</p>
<p>那么用户下载一封邮件后，这个邮件会被标记成delete，在POP协议进入第三阶段后，这些邮件会被删除</p>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/26/uztmM8pNEcgXasv.png" alt="image.png" /></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/26/ci8UzgywtvpXBJd.png" alt="image.png" /></p>
<ul>
<li>
<p>POP3有两种模式：</p>
<ul>
<li>
<p>download and delete</p>
<p>不可以多终端查看，下载后删除</p>
</li>
<li>
<p>download and keep</p>
<p>可以多终端查看，下载后不删除</p>
</li>
</ul>
</li>
<li>
<p>POP3不保存用户状态信息，我的理解就是客户端和服务器不能进行同步</p>
<p>而下面的IMAP就能保存用户状态，客户端和服务器之间能够进行同步</p>
</li>
</ul>
<h1 id="imapinternet-mail-access-protcol"><a class="markdownIt-Anchor" href="#imapinternet-mail-access-protcol"></a> IMAP(Internet Mail Access Protcol)</h1>
<ul>
<li>
<p>能够在某个客户端下载后继续保存邮件</p>
</li>
<li>
<p>与POP3的区别</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/26/vDmRxiIhX5cFoyA.png" alt="image.png" /></p>
<blockquote>
<p>POP3不能服务器和客户端同步，而IMAP可以同步</p>
</blockquote>
</li>
<li>
<p>POP3不能在服务器上创建文件夹和将邮件移动到某个文件夹下面，只能在客户端下载下来后在自己的主机上进行</p>
<p>而IMAP可以做到这一点</p>
</li>
<li>
<p>IMAP能够保存用户的状态信息，既能够与客户端的文件夹和报文的关系进行同步</p>
<p>IMAP保存了文件夹的名字和这个文件夹相关联的报文</p>
</li>
<li>
<p>IMAP的另一个特点就是支持用户代理获取报文的某部分。</p>
<p>比如用户使用的是低宽带连接，此时用户想避免哪些包含音频或者视频的大邮件</p>
</li>
</ul>
<h1 id="http邮件接收协议"><a class="markdownIt-Anchor" href="#http邮件接收协议"></a> HTTP(邮件接收协议)</h1>
<ul>
<li>
<p>前面两种邮件接收方式POP3和IMAP</p>
<p>使用这两种协议的话，客户端代理向服务器发送邮件还是通过<strong>SMPT</strong>发送的，发送方服务器向接收方服务器发送邮件也通过的是</p>
<p>SMTP，只是邮件接收的时候不用SMTP</p>
</li>
<li>
<p>但是使用HTTP协议的话，客户端浏览器向服务器发送使用的是<strong>HTTP</strong>协议，邮件服务器向客户端浏览器发送也用的是<strong>HTTP</strong>协议，</p>
<p>邮件服务器向邮件服务器发送用的还是SMTP协议</p>
</li>
</ul>
<h1 id="dnsdomain-name-system"><a class="markdownIt-Anchor" href="#dnsdomain-name-system"></a> DNS(Domain Name system)</h1>
<ul>
<li>
<p>DNS有两种含义</p>
<ul>
<li>一个由分层的DNS服务器实现的分布式数据库</li>
<li>一个使得<strong>主机能够查询分布式数据库</strong>的应用层协议</li>
</ul>
</li>
<li>
<p>DNS运行在<strong>UDP</strong>之上，<strong>默认端口号为53</strong></p>
</li>
<li>
<p>功能</p>
<ul>
<li>
<p>当我们用浏览器访问某个域名时，运行在我们本地的DNS客户端向DNS分布式服务器发送一个包哦含主机名的请求</p>
<p>DNS客户端最终收到一个DNS服务器发过来的该域名的IP地址，然后客户端浏览器向目标IP地址的80端口(http默认TCP端口)，从</p>
<p>而访问该IP地址进行页面的请求</p>
</li>
<li>
<p><strong>主机别名</strong>(host aliasing)</p>
<p>一个IP地址可以有多个别名，就是主机的域名(规范主机名(canonical hostname))不太好记的时候，可以给这个域名起个别名，</p>
<p>DNS可以获取到这个别名的规范名和IP地址</p>
</li>
<li>
<p><strong>邮件服务器别名</strong>(mail server aliasing)</p>
<p>同样我们也希望接收方的邮件服务器地址的邮件名字好记一些</p>
</li>
<li>
<p><strong>负载分配</strong>(load distribution)</p>
<p>服务器群拥有一个共同的域名，即IP群拥有一个共同的域名，DNS收到对这个域名的访问的时候，将访问分发到不同的服务器上</p>
<p>去</p>
</li>
</ul>
</li>
<li>
<p>为什么不是中心化的DNS服务器</p>
<ul>
<li>会出现单点失败(single point failure)，即系统中一点出错则整个系统就不能运行，若DNS服务器发生故障，则整个因特网将发生故障</li>
<li>距离问题</li>
<li>若中心化则流量太大，服务器承载不了</li>
<li>维护频繁</li>
<li>分布式还有一个好处：可扩展性好</li>
</ul>
</li>
<li>
<p>DNS以层级组织</p>
<ul>
<li>
<p>没有一个DNS服务器拥有所有主机的映射，而所有的映射分布在所有的DNS服务器上</p>
</li>
<li>
<p>DNS层次结构中大致有三种DNS服务器</p>
<ul>
<li>
<p><strong>根</strong>DNS服务器</p>
<p>有400多个根DNS服务器遍布全球，由13个不同的组织管理</p>
<p>根DNS服务器提供顶<strong>级域服务器的IP地址</strong></p>
</li>
<li>
<p><strong>顶级域</strong>(Top-level Domain，TLD)DNS服务器</p>
<p>**根据用途：**顶级域名如：com、org、net、edu和gov</p>
<p>**根据地理位置：**所有国家的顶级域：uk、fr、ca和jp</p>
<p>这些域都有顶级域名服务器(或服务器集群)</p>
<p>顶级域名服务器提供<strong>权威域名服务器的IP地址</strong></p>
</li>
<li>
<p><strong>权威</strong>DNS服务器</p>
<p>在因特网上具有公共可访问主机(如web服务器和邮件服务器)的每个组织机构必须提供公共可访问的DNS记录，这些记录将这些主机的域名映射为IP地址。</p>
<p>该组织可以自己实现权威服务器，也可以向ISP支付费用租用</p>
</li>
</ul>
</li>
<li>
<p>还有另一类重要的DNS服务器，称为<strong>本地DNS服务器(local DNS server)</strong></p>
<p>严格来说本地DNS服务器不属于DNS的层次结构，但是它对DNS的层次结构至关重要，每个主机接入ISP时，通过<strong>DHCP协议(应用层协议)<strong>获得一个IP地址，同时也通过</strong>DHCP</strong>获得了本地DNS服务器(一个或多个)的IP地址</p>
</li>
</ul>
</li>
<li>
<p>举例</p>
</li>
<li>
<p>迭代方式：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/26/aYtzeB6XJNqnxQ2.jpg" alt="12E6C26F0A80B0D1613B28204F0FB269.png" /></p>
<p><img src= "/img/loading.gif" data-lazy-src="G:%5Ctyporaimages%5CgCJcv8kY3AfhoHr.jpg" alt="58049225E71ACAFD31F05C72128A706C.png" /></p>
</li>
<li>
<p>递归方式：</p>
<img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/26/fzF7T8AmqPr2iyd.png" alt="98C13467EEBB8A41E61E24FE8394F13F.png" style="zoom:60%;" />
</li>
<li>
<p>本地服务器得到的该域名的IP地址后，一般会在本地缓存下来，所以根域名服务器的负担就会少很多</p>
</li>
<li>
<p>DNS资源记录</p>
<p>DNS资源记录是包含了下列字段的四元组</p>
<p>{value,name,type,ttl}</p>
<ul>
<li>
<p>name和value的值取决于type</p>
<ul>
<li>
<p>type = A ，则name是主机，value是该主机对应的IP地址</p>
<p>例如：{<a target="_blank" rel="noopener" href="http://relayl.bar.foo.com">relayl.bar.foo.com</a>,145.37.93.126,A}</p>
</li>
<li>
<p>type = NS，则name是个域(<a target="_blank" rel="noopener" href="http://xn--foo-eo8e.com">如foo.com</a>)，而value是直到如何获得该域中主机IP地址的<strong>权威DNS服务器</strong>的主机名</p>
<p>例如：{<a target="_blank" rel="noopener" href="http://foo.com">foo.com</a>,<a target="_blank" rel="noopener" href="http://fns.foo.com">fns.foo.com</a>,NS}</p>
</li>
<li>
<p>type = CNAME，则value是别名为name的主机对应的规范主机名</p>
<p>例如：{<a target="_blank" rel="noopener" href="http://foo.com">foo.com</a>,<a target="_blank" rel="noopener" href="http://relayl.bar.foo.com">relayl.bar.foo.com</a> ,CNAME}</p>
</li>
<li>
<p>type = MX，则value是个别名为Name的邮件服务器的规范主机名</p>
<p>例如：{<a target="_blank" rel="noopener" href="http://foo.com">foo.com</a>,<a target="_blank" rel="noopener" href="http://mail.bar.foo.com">mail.bar.foo.com</a>,MX}</p>
</li>
</ul>
<blockquote>
<p>我们注意到，一个公司的邮件服务器和其它服务器(如它的web服务器)可以使用相同的别名</p>
<p>为了获得邮件服务器的规范主机名，DNS客户请求一条MX记录；</p>
<p>而为了获得其它服务器的规范主机名，DNS客户请求CNAME记录</p>
</blockquote>
<blockquote>
<p>如果一台DNS服务器是用于某特定主机名的权威DNS服务器，那么该DNS服务器会有一条包含用于该主机的<strong>类型A的记录(<strong>即使该DNS服务器</strong>不是</strong>其权威服务器，他也可能会在缓存中包含有一条<strong>类型A记录</strong>)。</p>
<p>如果服务器不是用于某主机名的权威服务器，那么该服务器及那个包含一条<strong>类型NS记录</strong>，该记录对应对于包含主机名的域。它还将包含一条<strong>类型A记录</strong>，该记录提供了<strong>在NS记录中的Value字段中的DNS服务器</strong>的IP地址</p>
<p>这里的服务器可以是顶级域名服务器(TLD服务器)</p>
<p>比如：edu TLD服务器<strong>不是</strong>主机gaia.cs.umass.edu的权威服务器，则该服务器将包含一条包括主机cs.umass.edu的域记录{<a target="_blank" rel="noopener" href="http://umass.edu">umass.edu</a>,<a target="_blank" rel="noopener" href="http://dns.umass.edu">dns.umass.edu</a>,NS}。而且该服务器还将包含一条类型A记录{<a target="_blank" rel="noopener" href="http://dns.umass.edu">dns.umass.edu</a>,128.119.40.111,A}</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="p2p文件分发bittorrent协议"><a class="markdownIt-Anchor" href="#p2p文件分发bittorrent协议"></a> P2P文件分发BitTorrent协议</h1>
<ul>
<li>
<p><strong>洪流(torrent)</strong>：参与一个特定文件分发的所有对等方</p>
</li>
<li>
<p><strong>文件块(chunk)</strong>：在一个洪流中的对等方彼此下载等长度的文件块(chunk)，典型的块长度为256KB</p>
</li>
<li>
<p>每个洪流中具有一个基础设施节点，称为追踪器(tracker)。当一个对等方加入洪流时，它向追踪器注册自己，并周期性地通知追踪器它仍然在该洪流中。</p>
<p>以这种方式，追踪器跟踪参与在洪流中的对等方</p>
</li>
<li>
<p>刚刚开始时，整个文件在服务器上，下载一段时间后各个主机拥有不同的块，当主机下载文件时，也为其它对等方上载了多个块。</p>
<p>主机可以随时离开和加入洪流，可以动态的调整进行传输的对等方</p>
</li>
<li>
<p>洪流中的主机要决定</p>
<ul>
<li>
<p>从哪个对等方中申请块</p>
<p>主机加入洪流时，通过追踪器获得了对等方的一张列表，主机试图向这张列表上的<strong>每个对等方创建并行的TCP连接</strong>，我们称和该主机建立TCP连接的对等方为该主机的<strong>邻近对等方</strong></p>
<p>然后该主机向各个邻近对等方询问其拥有的块，有了这些信息，该主机使用**最稀缺优先(rarest first)**的技术，这种技术的思路时，针对他没有的块在它的邻近对等方中决定最稀缺的块，首先先申请下载这些块(通过TCP)</p>
</li>
<li>
<p>向哪个对等方发放块</p>
<p>主机根据当前能够<strong>以最高速率</strong>向她提供数据的邻近对等方，给出其优先权。<strong>每过10秒</strong>，重新评估最高速率的邻近对等方并修改调整搭档</p>
<p>然后<strong>每过30秒</strong>它也要随机选择另外一个伴侣的对换伴侣并开始进行对换</p>
</li>
</ul>
</li>
</ul>
<h1 id="视频流"><a class="markdownIt-Anchor" href="#视频流"></a> 视频流</h1>
<ul>
<li>
<p>视频流压缩</p>
<ul>
<li>时间：传输时只传输与前一帧不同的数据</li>
<li>空间：一张帧中有很多颜色相同的点，传输时只传输该值和重复的个数</li>
</ul>
</li>
<li>
<p>比特率</p>
<p>每秒中传输的bit</p>
<p>比特率越高，每秒传输的数据越多，画质越高</p>
</li>
<li>
<p>视频编码方式</p>
<ul>
<li>
<p>CBR(constant bit rate)</p>
<p>恒定比特率</p>
</li>
<li>
<p>VBR(varialbe bit rate)</p>
<p>可变比特率</p>
</li>
</ul>
</li>
<li>
<p><strong>DASH(Dynamic Adaptice Streaming over HTTP)</strong></p>
<p><strong>server:</strong></p>
<ul>
<li>在普通的http中，每个视频被编码成一个固定的比特率，所有用户接收到的都是相同编码和相同比特率的视频</li>
<li>在DASH中，每个视频被编码成不同的比特率存放在服务器上，用户周期性的评估自己的宽带情况选择不同比特率的视频来下载</li>
<li>DASH server将每个视频分成多个chunks，每个chunk用不同的bit rate进行编码</li>
<li>server上有个<strong>manifest file(清单文件)</strong>，对每个块指定一个url和其比特率</li>
</ul>
<p><strong>client:(intellignece)</strong></p>
<ul>
<li>
<p>when:</p>
<p>when to request chunk(so that buffer starvation or overflow does not occur)</p>
</li>
<li>
<p>what:</p>
<p>what encoding rate to request(higher quality when more bandwidth available)</p>
</li>
<li>
<p>where:</p>
<p>where to request chunk</p>
<p>逻辑上最近的服务器</p>
</li>
</ul>
</li>
</ul>
<h1 id="cdncontent-distribution-networks"><a class="markdownIt-Anchor" href="#cdncontent-distribution-networks"></a> CDN(content distribution networks)</h1>
<ul>
<li>CDN也采用分布式系统</li>
<li>原因与分布式DNS一样</li>
<li>大多数CDN利用DNS来获取和重定向请求</li>
<li>用户请求访问一个网站的流程：
<ul>
<li>本地服务器向权威服务器询问</li>
<li>权威服务器返回权威CDN服务器的地址</li>
<li>本地服务器向权威CDN询问</li>
<li>权威CDN服务器返回CDN服务器的地址</li>
<li>本地服务器返回逻辑上举例较近的CDN服务器地址</li>
<li>主机访问该地址</li>
<li>如果该CDN服务器使用DASH</li>
<li>则建立连接后，CDN返回清单文件</li>
<li>主机根据实际情况申请不同的块</li>
</ul>
</li>
</ul>
<h1 id="套接字编程socket-编程"><a class="markdownIt-Anchor" href="#套接字编程socket-编程"></a> 套接字编程(socket 编程)</h1>
<h1 id="数据链路层link-layer"><a class="markdownIt-Anchor" href="#数据链路层link-layer"></a> 数据链路层(link layer)</h1>
<ul>
<li>
<p>链路层的主体部分是在**网络适配器(network adapter)**中实现的</p>
<p>网络适配器有时也称为<strong>网络接口卡(network interface card,NIC)</strong></p>
</li>
<li>
<p>数据链路层要与网路层进行交互，还要将帧转换成bit进行传输</p>
</li>
<li>
<p>数据链路层细分为两层：</p>
<p>上层：llc层，负责与网络层的交互</p>
<p>下层：mac层，负责与物理层的交互</p>
<blockquote>
<p>物理介质的多样性决定了mac协议的多样性</p>
</blockquote>
</li>
<li>
<p>数据链路层有：</p>
<ul>
<li>llc(logical link control)：在软件中实现，与网络层进行交互</li>
<li>mac(media access control)：将数据封装成帧，把帧放在物理介质上去，与物理层进行交互</li>
</ul>
</li>
<li>
<p>术语：</p>
<ul>
<li>node</li>
<li>links</li>
<li>frame</li>
</ul>
</li>
<li>
<p>数据链路层只考虑整个传输路径上的相邻两个节点之间的帧传输</p>
<p>不同网络之间的传输通过网络层来解决</p>
</li>
<li>
<p>数据链路层提供的服务：</p>
<ul>
<li>
<p>封装成frame</p>
<p>这里除了加<strong>帧头</strong>还要加<strong>帧尾</strong></p>
</li>
<li>
<p>媒体访问控制(Medium Access Control,<strong>MAC</strong>)</p>
<p>只有在共享介质上面才需要进行链路访问的控制，MAC协议用于协调多个节点的帧传输</p>
</li>
<li>
<p>可靠交付</p>
<p>链路层的可靠交付通常是通过确认和重传取得的</p>
</li>
<li>
<p>封装时加入MAC地址</p>
<p>ip地址为逻辑地址，相同主机在不同网络中的IP地址会发生变化，相当于人在不同阶段的学号</p>
<p>但是MAC地址是固化的地址，也称为(烧入地址)，是主机在出场的时候就定了的，相当于人的身份证号</p>
</li>
<li>
<p>进行流量控制</p>
<p>两个相邻节点进行传输之前，把它们两的步调一致化，发送和接收的步调一致</p>
</li>
<li>
<p>错误检测</p>
<p>受环境影响，共享介质上发生帧碰撞(同时收到多个帧)</p>
</li>
<li>
<p>错误纠正</p>
<p>一些错误纠正算法通过冗余位得知出错前的bit</p>
</li>
<li>
<p>半双工，全双工，单工，双工</p>
<p>单工：一个节点只能发送，另一个节点只能接收</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/27/o7MBOCWGHqeUVIP.png" alt="image.png" /></p>
<p>双工：两个节点都能接收和发送</p>
<ul>
<li>
<p>全双工</p>
<p>一个节点的接收和发送可以同时进行</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/27/64lDdk3bI8LFzwJ.png" alt="image.png" /></p>
</li>
<li>
<p>半双工</p>
<p>一个节点的接收和发送不能同时进行</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/27/64lDdk3bI8LFzwJ.png" alt="image.png" /></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>链路分为两种：</p>
<ul>
<li>点对点链路</li>
<li>广播链路</li>
</ul>
</li>
<li>
<p>任何多路访问协议可以划分为三种类型之一</p>
<ul>
<li>
<p><strong>信道划分协议</strong>(channel partitioning protocol)</p>
<ul>
<li>
<p>时分多路复用(<strong>TDMA</strong>，Time-Division Multiple access)</p>
<p>时隙的长度能至少传输单个分组</p>
</li>
<li>
<p>频分多路复用(<strong>FDMA</strong>，Frequency-Division Multiple access)</p>
</li>
<li>
<p>码分多址(Code Division Multiple Access，<strong>CDMA</strong>)</p>
<p>对每个节点分配一种不同的编码，如果精心设计这些编码，则所有节点都能同时发送和接收分组</p>
</li>
</ul>
</li>
<li>
<p><strong>随机接入协议</strong>(random access protocol)</p>
<ul>
<li>
<p>slotted aloha</p>
<ul>
<li>节点只在时隙开始的时候发送帧</li>
<li>节点是同步的，每个节点都知道时隙何时开始</li>
<li>当节点有一个新帧要发送时，它等到下一个时隙开始并在该时隙传输整个帧</li>
<li>如果有碰撞发生，该节点能在时隙结束之前检测出这次碰撞，<strong>继续传输完这个发生碰撞的帧</strong></li>
<li>该节点在后续时隙中以概率p在后续的每个时隙中重传它的帧</li>
</ul>
</li>
<li>
<p>aloha</p>
<ul>
<li>节点接收到帧就能立即开始传输</li>
<li>当检测到碰撞之后，先<strong>传输完它的碰撞帧</strong></li>
<li>立即开始以概率p进行重传，如果再次发生碰撞，则等待一个时隙，继续以概率p进行重传</li>
</ul>
</li>
<li>
<p>csma(载波侦听，carrier sense multiple access)</p>
<ul>
<li>在发送分组之前先进性侦听，若没有信号进入该适配器，则证明链路空闲</li>
<li>链路空闲时就开始传输分组(<strong>有空即发</strong>)</li>
</ul>
</li>
<li>
<p>csma/cd(带碰撞检测的载波侦听)</p>
<ul>
<li>
<p>在发送分组之前先进性侦听，若没有信号进入该适配器，则证明链路空闲</p>
</li>
<li>
<p>链路空闲时就开始传输分组(<strong>有空即发</strong>)</p>
</li>
<li>
<p>如果传输过程中检测到了碰撞<strong>则停止传输</strong>，以等待一个随机的时间量，然后继续侦听</p>
<blockquote>
<p>能够检测到碰撞的条件：</p>
<p>就是碰撞发生后两个能量叠加后传播回来时，适配器还没有传输完之前的那个帧</p>
<p>所以这就对帧的长度有了要求，而不同的以太网环境的最小帧长度会变化</p>
</blockquote>
</li>
<li>
<p>这个时间量是，比如说发生了n次碰撞，则在1,2,3,…2的n次方-1中选择一个数K，等待的时间为K*(传输512自己所需的时间)</p>
</li>
</ul>
</li>
<li>
<p>进行侦听还会发生碰撞的原因：</p>
<ul>
<li>节点A在链路上发送的分组还在传播过程中，则节点B的适配器此时检测，误以为链路上没有分组在传播，则节点B也发送分组到该链路上</li>
</ul>
</li>
<li>
<p>csma/ca</p>
<p>碰撞检测在有线环境中很好检测，但是在无线环境中不好检测，所以要尽量避免</p>
</li>
</ul>
</li>
<li>
<p><strong>轮流协议</strong>(taking-turns protocol)</p>
</li>
</ul>
</li>
</ul>
<h1 id="mac地址"><a class="markdownIt-Anchor" href="#mac地址"></a> MAC地址</h1>
<ul>
<li>
<p>事实上并不是主机或路由器有链路层地址，而是它们的适配器(即网络接口)具有链路层地址</p>
</li>
<li>
<p>MAC地址不分层，是扁平的</p>
<p>即不想IP地址那样有网络位和主机位</p>
</li>
<li>
<p>MAC地址分成两部分：</p>
<ul>
<li>机构编号</li>
<li>机构内部编号</li>
</ul>
</li>
<li>
<p>MAC广播地址：FF-FF-FF-FF-FF-FF</p>
</li>
<li>
<p>MAC地址不能跨越网络使用，只能在LAN中使用</p>
<p>所以其广播地址只有<strong>本地广播地址</strong></p>
</li>
<li>
<p>MAC的组播地址为：将MAC的前24位用<strong>01-00-5E</strong>来代替，消除机构差异</p>
<p>低23位用IP多播地址来代替，第25位固定为0</p>
</li>
</ul>
<h1 id="arpaddress-resolutino-protocol-地址解析协议"><a class="markdownIt-Anchor" href="#arpaddress-resolutino-protocol-地址解析协议"></a> ARP(Address Resolutino Protocol 地址解析协议)</h1>
<ul>
<li>
<p>ARP可以将局域网中的一个IP地址映射到该主机的MAC地址上</p>
</li>
<li>
<p>ARP只为在同一个子网上的主机和路由器解析IP地址</p>
</li>
<li>
<p>每台主机或路由器在其内存中具有一个ARP表</p>
</li>
<li>
<p>ARP通过自主学习得到局域网中所有主机IP和MAC的映射关系，不需要管理员进行任何配置。</p>
<p>而且如果某主机与子网断开连接，它的表项最终会从留在子网中的节点的表删除掉(ttl属性)</p>
</li>
<li>
<p>ARP可以认为是link协议，也可以认为是network协议(包含IP地址)</p>
</li>
<li>
<p>ARP访问</p>
<ul>
<li>
<p>局域网访问</p>
<ul>
<li>当ARP表中没有某个主机的MAC地址时，ARP将目标MAC地址替换成FF-FF-FF-FF-FF-FF，广播出去，和数据包中IP地址相符的主机将MAC地址发给ARP，ARP表项中增加一项</li>
</ul>
</li>
<li>
<p>访问外网</p>
<ul>
<li>
<p>假设时主机A向外网主机发送</p>
</li>
<li>
<p>主机A会将目的MAC地址替换成该局域网网关的MAC地址(通过ARP表获得)，然后网关路由器收到后，发现目标IP地址不是自己，就根据路由表进行转发，转发到目的网络的网关接口时，通过ARP表获得了真正的目的主机的MAC地址，此时将数据包的目的MAC地址换成真正的，源MAC地址换成该目的网络网关的MAC地址，从而编程了局域网中寻址。</p>
</li>
<li>
<p>每经过一跳，数据包的源MAC地址和目的MAC地址可能发生变化，比如上面那个例子</p>
<p>也有可能不变，比如:使用PPP(点对点协议)的广域网，则就不用变化， 因为使用PPP协议，目的地就只有一个，所以肯定就能找到，此时数据包中的MAC地址时更短的占位符</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="transport用port来寻址network用ip来寻址"><a class="markdownIt-Anchor" href="#transport用port来寻址network用ip来寻址"></a> Transport用port来寻址，Network用ip来寻址</h1>
<h1 id="以太网"><a class="markdownIt-Anchor" href="#以太网"></a> 以太网</h1>
<ul>
<li>网络拓扑结构：
<ul>
<li>逻辑拓扑结构</li>
<li>物理拓扑结构</li>
</ul>
</li>
<li>集线器是<strong>纯物理层</strong>的设备，因为它只是执行简单的广播，即接收到0就向全部接口广播这个0，收到1就广播1，没有对转发接口的选择性</li>
</ul>
</div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/08/05/S9tDOx7hiKQmCqa.png" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2020/12/25/SQLServer%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%92%8C%E9%94%81/"><img class="next-cover" data-lazy-src="https://i.loli.net/2020/08/03/cAsW6uovCd78OfI.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SQLServer事务管理和锁</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/08/08/计算机网络读书笔记1/" title="计算机网络读书笔记1"><img class="relatedPosts_cover" data-lazy-src="https://i.loli.net/2020/08/03/46YZfuTL5RmeWvl.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-08</div><div class="relatedPosts_title">计算机网络读书笔记1</div></div></a></div><div class="relatedPosts_item"><a href="/2020/10/14/计网实验/" title="计网实验"><img class="relatedPosts_cover" data-lazy-src="https://i.loli.net/2020/08/07/GBcki6rT4lJ5sxE.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-14</div><div class="relatedPosts_title">计网实验</div></div></a></div></div></div></article></main><footer id="footer" style="background-image: url(https://i.loli.net/2020/08/05/S9tDOx7hiKQmCqa.png)" data-type="photo"><div id="footer-wrap"><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">hi~ welcome to my blog</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script></div></body></html>