<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>phpStudy | Komorebi</title><meta name="description" content="[toc]  参考手册  php文件放入xampp中htdoc目录下  使用，输出时间 123456789&lt;html&gt;    &lt;body&gt;        &lt;?php			echo &quot;&lt;p&gt;今天是 &quot;;			date_default_timezone_set(&quot;PRC&quot;);			echo date(&quot;Y年m月"><meta name="keywords" content="php"><meta name="author" content="komorebi"><meta name="copyright" content="komorebi"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://feeblebird.github.io/2020/09/22/phpStudy/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="phpStudy"><meta property="og:url" content="http://feeblebird.github.io/2020/09/22/phpStudy/"><meta property="og:site_name" content="Komorebi"><meta property="og:description" content="[toc]  参考手册  php文件放入xampp中htdoc目录下  使用，输出时间 123456789&lt;html&gt;    &lt;body&gt;        &lt;?php			echo &quot;&lt;p&gt;今天是 &quot;;			date_default_timezone_set(&quot;PRC&quot;);			echo date(&quot;Y年m月"><meta property="og:image" content="https://i.loli.net/2020/08/03/UrEu8Zcjb7CReX6.jpg"><meta property="article:published_time" content="2020-09-22T00:36:55.000Z"><meta property="article:modified_time" content="2020-12-14T01:41:03.496Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"limitCount":50,"languages":{"author":"作者: komorebi","link":"链接: ","source":"来源: Komorebi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-14 09:41:03'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.0.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://i.loli.net/2020/08/02/WuXQnAJZ6twj5HU.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">32</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">35</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">16</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C"><span class="toc-number">1.</span> <span class="toc-text"> 参考手册</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E6%96%87%E4%BB%B6%E6%94%BE%E5%85%A5xampp%E4%B8%ADhtdoc%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="toc-number">2.</span> <span class="toc-text"> php文件放入xampp中htdoc目录下</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%BE%93%E5%87%BA%E6%97%B6%E9%97%B4"><span class="toc-number">3.</span> <span class="toc-text"> 使用，输出时间</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E6%B3%A8%E9%87%8A%E4%B8%BA%E5%8D%95%E8%A1%8C%E6%B3%A8%E9%87%8A%E5%A4%9A%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="toc-number">4.</span> <span class="toc-text"> php注释为&#x2F;&#x2F;单行注释，&#x2F;**&#x2F;多行注释</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#echo-print-print_r-var_dump"><span class="toc-number">5.</span> <span class="toc-text"> echo、print、print_r、var_dump</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E9%97%AE%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text"> 大小写问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.</span> <span class="toc-text"> 数据类型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#string-%E4%B8%89%E7%A7%8D%E5%BC%95%E5%8F%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">8.</span> <span class="toc-text"> string 三种引号的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E5%BC%95%E5%8F%B7%E6%8B%AC%E8%B5%B7%E6%9D%A5%E5%B0%B1%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">8.0.0.1.</span> <span class="toc-text"> 单引号括起来就是字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E5%BC%95%E5%8F%B7%E6%8B%AC%E8%B5%B7%E6%9D%A5"><span class="toc-number">8.0.0.2.</span> <span class="toc-text"> 双引号括起来</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%BC%95%E5%8F%B7"><span class="toc-number">8.0.0.3.</span> <span class="toc-text"> 反引号</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">9.</span> <span class="toc-text"> 类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">9.0.0.1.</span> <span class="toc-text"> 自动类型转换</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">10.</span> <span class="toc-text"> 变量的作用域</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%8F%AF%E5%8F%98%E5%8F%98%E9%87%8F%E5%90%8D"><span class="toc-number">11.</span> <span class="toc-text"> 声明可变变量名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-number">12.</span> <span class="toc-text"> 常量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">13.</span> <span class="toc-text"> 运算符</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#if-while-for-dowhile"><span class="toc-number">14.</span> <span class="toc-text"> if、while、for、do…while</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A5html%E6%96%87%E4%BB%B6%E4%B8%BA%E4%B8%BB%E7%84%B6%E5%90%8E%E5%86%8D%E5%86%99%E5%85%A5php%E4%BB%A3%E7%A0%81"><span class="toc-number">15.</span> <span class="toc-text"> 以html文件为主，然后再写入php代码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%BB%84-array"><span class="toc-number">16.</span> <span class="toc-text"> 数组 array()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-number">17.</span> <span class="toc-text"> 二维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">17.1.</span> <span class="toc-text"> 输出二维数组元素中的问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E4%B8%8B%E6%A0%87%E9%97%AE%E9%A2%98"><span class="toc-number">18.</span> <span class="toc-text"> 数组下标问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E4%B8%AD%E6%9C%89%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E7%9A%84%E8%AE%BF%E9%97%AE%E6%97%B6"><span class="toc-number">18.1.</span> <span class="toc-text"> 在双引号中有数组元素的访问时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E4%B8%8B%E6%A0%87%E6%98%AF%E5%90%A6%E5%8A%A0%E5%8D%95%E5%BC%95%E5%8F%B7%E6%9C%AA%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7"><span class="toc-number">18.2.</span> <span class="toc-text"> 数组元素下标是否加单引号(未使用双引号)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E4%B8%8B%E6%A0%87%E6%98%AF%E5%90%A6%E5%8A%A0%E5%8D%95%E5%BC%95%E5%8F%B7%E5%92%8C%E8%8A%B1%E6%8B%AC%E5%8F%B7%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7"><span class="toc-number">18.3.</span> <span class="toc-text"> 数组元素下标是否加单引号和花括号(使用双引号)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E4%B8%8B%E6%A0%87%E8%A2%AB%E5%BD%93%E4%BD%9C%E5%B8%B8%E9%87%8F%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">18.4.</span> <span class="toc-text"> 数组下标被当作常量的情况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8C%E5%BC%95%E5%8F%B7%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8D%95%E5%BC%95%E5%8F%B7"><span class="toc-number">18.5.</span> <span class="toc-text"> 双引号中使用单引号</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F%E5%87%BD%E6%95%B0"><span class="toc-number">19.</span> <span class="toc-text"> 数组排序函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sort-ksort-asort-rsort%E7%9A%84%E5%BC%82%E5%90%8C%E7%82%B9"><span class="toc-number">19.0.0.1.</span> <span class="toc-text"> sort()、ksort()、asort()、rsort()的异同点</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E5%AE%9E%E7%8E%B0%E9%9A%8F%E6%9C%BA%E6%98%BE%E7%A4%BA7%E5%BC%A0%E5%9B%BE%E7%89%87%E4%B8%AD%E7%9A%84%E4%B8%89%E5%BC%A0%E5%9B%BE"><span class="toc-number">20.</span> <span class="toc-text"> php实现随机显示7张图片中的三张图</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">21.</span> <span class="toc-text"> 函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E6%96%87%E4%BB%B6require%E5%92%8Cinclude"><span class="toc-number">22.</span> <span class="toc-text"> 引用文件–require()和include()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B6%85%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">23.</span> <span class="toc-text"> 超全局变量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#get%E6%96%B9%E6%B3%95%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0post%E6%96%B9%E6%B3%95%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0get%E5%92%8Cpost%E6%96%B9%E6%B3%95%E4%B8%80%E8%B5%B7%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-number">24.</span> <span class="toc-text"> get方法传递参数，post方法传递参数，get和post方法一起传递参数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#post%E4%BC%A0%E9%80%92%E5%A4%8D%E9%80%89%E6%A1%86%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">25.</span> <span class="toc-text"> post传递复选框的内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8E_post%E6%95%B0%E7%BB%84%E4%B8%AD%E8%BE%93%E5%87%BA%E5%A4%8D%E9%80%89%E6%A1%86%E5%86%85%E5%AE%B9"><span class="toc-number">26.</span> <span class="toc-text"> 从_POST数组中，输出复选框内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E8%A1%A8%E5%8D%95%E4%B8%AD%E5%86%85%E5%AE%B9"><span class="toc-number">27.</span> <span class="toc-text"> 判断表单中内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#_request%E6%95%B0%E7%BB%84%E4%B8%8D%E5%BB%BA%E8%AE%AE%E5%88%9D%E5%AD%A6%E8%80%85%E4%BD%BF%E7%94%A8"><span class="toc-number">28.</span> <span class="toc-text"> _request数组(不建议初学者使用)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#web%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">29.</span> <span class="toc-text"> web数据库工作原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E7%9A%84mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%87%BD%E6%95%B0"><span class="toc-number">30.</span> <span class="toc-text"> php的mysql数据库函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php_mysql%E6%89%A9%E5%B1%95%E5%BA%93"><span class="toc-number">31.</span> <span class="toc-text"> php_mysql扩展库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysqli%E5%A2%9E%E5%BC%BA%E7%89%88%E6%89%A9%E5%B1%95%E5%BA%93"><span class="toc-number">32.</span> <span class="toc-text"> mysqli(增强版扩展库)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E7%A0%81%E5%90%88%E4%B8%80%E6%95%B0%E6%8D%AE%E5%BA%93-%E9%A1%B5%E9%9D%A2-php%E4%BB%A3%E7%A0%81"><span class="toc-number">33.</span> <span class="toc-text"> 三码合一:数据库、页面、PHP代码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E5%90%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">34.</span> <span class="toc-text"> php向数据库插入数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%91%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%8F%92%E5%85%A5%E8%A1%A8%E5%8D%95%E4%B8%AD%E6%94%B6%E9%9B%86%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">35.</span> <span class="toc-text"> 向数据库中插入表单中收集的信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E8%8E%B7%E5%BE%97%E6%95%B0%E6%8D%AE%E6%BA%90%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9D%A1%E6%95%B0%E8%BF%94%E5%9B%9Eint%E5%9E%8B"><span class="toc-number">36.</span> <span class="toc-text"> php获得数据源中的数据条数，返回int型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E5%85%B3%E9%97%AD%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">37.</span> <span class="toc-text"> php关闭数据库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%85%E5%AE%B9"><span class="toc-number">38.</span> <span class="toc-text"> php删除数据库内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%85%E5%AE%B9"><span class="toc-number">39.</span> <span class="toc-text"> php查询数据库内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E8%BF%94%E5%9B%9E%E5%88%9A%E5%88%9A%E8%87%AA%E5%A2%9E%E5%88%9B%E5%BB%BA%E7%9A%84id"><span class="toc-number">40.</span> <span class="toc-text"> php返回刚刚自增创建的id</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E8%AF%AD%E5%8F%A5%E4%B8%ADvalue%E4%B8%AD%E5%8F%98%E9%87%8F%E5%BA%94%E8%AF%A5%E5%8A%A0"><span class="toc-number">41.</span> <span class="toc-text"> sql语句中value中变量应该加’ ’</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#headerlocatoinxxxphp"><span class="toc-number">42.</span> <span class="toc-text"> header(locatoin:xxx.php)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#die%E8%AF%AD%E5%8F%A5"><span class="toc-number">43.</span> <span class="toc-text"> die语句</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fetch_row-fetch_assoc"><span class="toc-number">44.</span> <span class="toc-text"> fetch_row() fetch_assoc()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%8A%80%E6%9C%AF"><span class="toc-number">45.</span> <span class="toc-text"> 分页技术</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%B8%AAphp%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%B8%AAphp%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">46.</span> <span class="toc-text"> 一个php文件中的多个php代码块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E5%AE%9E%E7%8E%B0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD"><span class="toc-number">47.</span> <span class="toc-text"> php实现评论功能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6cookiesession"><span class="toc-number">48.</span> <span class="toc-text"> php会话控制(cookie&amp;session)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cookie"><span class="toc-number">49.</span> <span class="toc-text"> cookie</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8cookie%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E4%BF%A1%E6%81%AF"><span class="toc-number">50.</span> <span class="toc-text"> 用cookie实现用户访问信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#session"><span class="toc-number">51.</span> <span class="toc-text"> session</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E7%BD%91%E7%AB%99session%E5%8F%91%E7%94%9F%E4%BA%86cookie%E5%8F%91%E7%94%9F%E4%BA%86"><span class="toc-number">52.</span> <span class="toc-text"> 用户访问网站session发生了，cookie发生了</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E6%97%B6%E5%8C%BA%E8%AE%BE%E7%BD%AE"><span class="toc-number">53.</span> <span class="toc-text"> php时区设置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sleep-usleep"><span class="toc-number">54.</span> <span class="toc-text"> sleep usleep</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">55.</span> <span class="toc-text"> 文件上传</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#php%E8%8E%B7%E5%BE%97%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%90%8D%E5%AD%97"><span class="toc-number">56.</span> <span class="toc-text"> php获得当前页面的名字</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#include_once"><span class="toc-number">57.</span> <span class="toc-text"> include_once()</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/08/03/UrEu8Zcjb7CReX6.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Komorebi</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">phpStudy</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-09-22T00:36:55.000Z" title="发表于 2020-09-22 08:36:55">2020-09-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-14T01:41:03.496Z" title="更新于 2020-12-14 09:41:03">2020-12-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/php/">php</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">15.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>69分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>[toc]</p>
<h1 id="参考手册"><a class="markdownIt-Anchor" href="#参考手册"></a> <a target="_blank" rel="noopener" href="https://www.w3school.com.cn/php/php_intro.asp">参考手册</a></h1>
<h1 id="php文件放入xampp中htdoc目录下"><a class="markdownIt-Anchor" href="#php文件放入xampp中htdoc目录下"></a> php文件放入xampp中htdoc目录下</h1>
<h1 id="使用输出时间"><a class="markdownIt-Anchor" href="#使用输出时间"></a> 使用，输出时间</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;?php</span><br><span class="line">			echo &quot;&lt;p&gt;今天是 &quot;;</span><br><span class="line">			date_default_timezone_set(&quot;PRC&quot;);</span><br><span class="line">			echo date(&quot;Y年m月d日H:i:s D&quot;);&#x2F;&#x2F;小写d几号，大写D周几</span><br><span class="line">		?&gt;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="php注释为单行注释多行注释"><a class="markdownIt-Anchor" href="#php注释为单行注释多行注释"></a> php注释为//单行注释，/**/多行注释</h1>
<h1 id="echo-print-print_r-var_dump"><a class="markdownIt-Anchor" href="#echo-print-print_r-var_dump"></a> echo、print、print_r、var_dump</h1>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;内容&lt;/h2&gt;&quot;</span>;</span><br><span class="line">    <span class="comment">//将内容传送到html服务端进行解释</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&quot;i&quot;</span>,<span class="string">&quot;am&quot;</span>,<span class="string">&quot;liwei&quot;</span>;</span><br><span class="line">	<span class="comment">//可以一次输出多个字符串,以&quot;,&quot;连接</span></span><br><span class="line">    <span class="keyword">echo</span> (<span class="string">&quot;内容&quot;</span>);</span><br><span class="line">	<span class="keyword">echo</span> ($b);</span><br><span class="line">	<span class="keyword">echo</span>(<span class="string">&quot;i&quot;</span>.<span class="string">&quot;am&quot;</span>.<span class="string">&quot;liwei&quot;</span>);</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&quot;var=&quot;</span>.$var.<span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line">	<span class="comment">//使用()输出多个字符串，中间用.进行连接，&quot;.&quot;为字符串连接符</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">print</span>(<span class="string">&quot;内容&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>print和echo的区别</p>
<p>print使用方法与echo相同，不同的地方是print有返回值，返回值始终为1。</p>
<p>所以使用过程中echo比print稍快，因为没有返回值</p>
</li>
<li>
<p>print_r和var_dump的区别</p>
<p>print_r输出数组</p>
<p>var_dump输出数据类型和变量的值</p>
</li>
<li>
<p>echo 和 print 打印不出boolean的&quot;true&quot;和&quot;false&quot;</p>
<p>true会打印出1,false会被认为是空</p>
</li>
</ul>
<h1 id="大小写问题"><a class="markdownIt-Anchor" href="#大小写问题"></a> 大小写问题</h1>
<ul>
<li>
<p>对自定义的变量名称大小写是敏感的</p>
</li>
<li>
<p>$+变量名，首次赋值的时候就会被创建( <strong>是紧跟，不加空格</strong> )</p>
<p>$a = 123;</p>
</li>
<li>
<p>对关键字大小写不敏感</p>
</li>
</ul>
<h1 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型"></a> 数据类型</h1>
<ul>
<li>标量类型
<ul>
<li>boolean</li>
<li>integer</li>
<li>float/double</li>
<li>string
<ul>
<li>$first = “hello”;</li>
<li>$first = ‘hello’;</li>
<li>$first = “hell”.“o”;</li>
</ul>
</li>
</ul>
</li>
<li>复合型
<ul>
<li>array</li>
<li>object</li>
</ul>
</li>
<li>特殊类型
<ul>
<li>resource</li>
<li>NULL</li>
</ul>
</li>
</ul>
<h1 id="string-三种引号的使用"><a class="markdownIt-Anchor" href="#string-三种引号的使用"></a> string 三种引号的使用</h1>
<ul>
<li>
<h4 id="单引号括起来就是字符串"><a class="markdownIt-Anchor" href="#单引号括起来就是字符串"></a> 单引号括起来就是字符串</h4>
<ul>
<li>含有单引号的话，就只是被认为是字符串</li>
</ul>
</li>
<li>
<h4 id="双引号括起来"><a class="markdownIt-Anchor" href="#双引号括起来"></a> 双引号括起来</h4>
<ul>
<li>表示字符串</li>
<li>特殊字符转义序列，&quot;\n&quot;</li>
<li>含有变量，则会显示变量的值</li>
</ul>
</li>
<li>
<p>打印单引号，使用双引号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;i&#x27;m liwei&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>打印双引号，使用单引号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&quot;它&quot;是啥&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>打印双引号，使用双引号</p>
<ul>
<li>使用转义字符</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;hello \&quot; 哈哈哈&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="反引号"><a class="markdownIt-Anchor" href="#反引号"></a> 反引号</h4>
<p>使用反引号括起来可以运行系统命令。</p>
</li>
</ul>
<h1 id="类型转换"><a class="markdownIt-Anchor" href="#类型转换"></a> 类型转换</h1>
<ul>
<li>
<h4 id="自动类型转换"><a class="markdownIt-Anchor" href="#自动类型转换"></a> 自动类型转换</h4>
<ul>
<li>赋值转换</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	$a = <span class="number">1</span>;</span><br><span class="line">	$a = <span class="string">&quot;string&quot;</span>;</span><br><span class="line"><span class="comment">//尽量一个变量存放的数据类型是固定的</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>表达式转换(临时转换，不改变原先变量数据类型)</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	$a = <span class="string">&quot;100&quot;</span>;</span><br><span class="line">	$b = $a*<span class="number">2</span>;</span><br><span class="line"><span class="comment">//自动把a变量转换称integer</span></span><br><span class="line">	<span class="keyword">echo</span> ($b);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>强制类型转换
<ul>
<li>(int),(integer)</li>
<li>(bool),(boolean)</li>
<li>(float),(double),(real)</li>
<li>(string)</li>
<li>(array)</li>
<li>(object)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="变量的作用域"><a class="markdownIt-Anchor" href="#变量的作用域"></a> 变量的作用域</h1>
<ul>
<li>
<p>声明局部变量</p>
<p>在函数内部声明变量</p>
</li>
<li>
<p>声明全局变量</p>
<p>在函数外部声明变量为全局变量</p>
<ul>
<li>
<p>若要在函数内部使用全局变量</p>
<p>要先在函数内部声明该变量为全局变量，global + $ + 变量名;</p>
</li>
</ul>
</li>
<li>
<p>声明静态变量</p>
<p>static $var = value;</p>
<p>在函数外部任然存在，不会被销毁</p>
</li>
</ul>
<h1 id="声明可变变量名"><a class="markdownIt-Anchor" href="#声明可变变量名"></a> 声明可变变量名</h1>
<p>用变量值作为变量名</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$var_name = <span class="string">&quot;myvar&quot;</span>;</span><br><span class="line">$$var_name = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<h1 id="常量"><a class="markdownIt-Anchor" href="#常量"></a> 常量</h1>
<ul>
<li>
<p>自定义常量</p>
<p>define(“constname”,“value”);</p>
</li>
<li>
<p>系统常量</p>
<ul>
<li>__FILE__( <strong>两个下划线</strong> )输出文件名，总是包含绝对路径</li>
<li>__LINE__( <strong>两个下划线</strong> )输出文件行数
<ul>
<li>魔术常量，值随着代码中的位置改变而改变</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h1>
<ul>
<li>
<p>算数运算符</p>
<p>就是学过的</p>
</li>
<li>
<p>逻辑运算符</p>
<ul>
<li>&amp;&amp; /and</li>
<li>|| / or</li>
<li>xor</li>
</ul>
</li>
<li>
<p>比较运算符</p>
<ul>
<li>==，值相等就返回true,数据类型可以不同</li>
<li>===，值相同且数据类型也相同</li>
<li>!=，值不等</li>
<li>!==，值不等或数据类型不等</li>
</ul>
</li>
<li>
<p>其他运算符</p>
<ul>
<li>.</li>
<li>$</li>
<li>@，错误控制运算符
<ul>
<li>在表达式之前加上@，则不会提示该句引起的错误</li>
<li>自定义错误输出</li>
</ul>
</li>
<li>$a&gt;$b?$a++:$a–; 三重运算符</li>
</ul>
</li>
</ul>
<h1 id="if-while-for-dowhile"><a class="markdownIt-Anchor" href="#if-while-for-dowhile"></a> if、while、for、do…while</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		td&#123;</span><br><span class="line">			border : 1px solid #ccc;</span><br><span class="line">			padding : 3px;</span><br><span class="line">			text-align : right;</span><br><span class="line">		&#125;</span><br><span class="line">		th&#123;</span><br><span class="line">			background : #ccc;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;table&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;</span><br><span class="line">				distance</span><br><span class="line">			&lt;&#x2F;th&gt;</span><br><span class="line">			&lt;th&gt;</span><br><span class="line">				price</span><br><span class="line">			&lt;&#x2F;th&gt;</span><br><span class="line">		&lt;&#x2F;tr&gt;</span><br><span class="line">		&lt;?php </span><br><span class="line">			$distance &#x3D; 50;</span><br><span class="line">			while($distance &lt;&#x3D; 300)</span><br><span class="line">			&#123;</span><br><span class="line">				$price &#x3D; $distance&#x2F;10;</span><br><span class="line">				echo &quot;&lt;tr&gt;&lt;td&gt;&quot;.$distance.&quot;&lt;&#x2F;td&gt;&lt;td&gt;&quot;.$price.&quot;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;&quot;;</span><br><span class="line">				$distance &#x3D; $distance + 50;</span><br><span class="line">			&#125;</span><br><span class="line">		?&gt;</span><br><span class="line">	&lt;table&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="以html文件为主然后再写入php代码"><a class="markdownIt-Anchor" href="#以html文件为主然后再写入php代码"></a> 以html文件为主，然后再写入php代码</h1>
<blockquote>
<p>当php周围代码很复杂的时候，可以这样写</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;tithle&gt;&lt;&#x2F;tithle&gt;</span><br><span class="line">    &lt;&#x2F;head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr&gt;&lt;th&gt;Distance&lt;&#x2F;th&gt;&lt;th&gt;Cost&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;</span><br><span class="line">            &lt;?php</span><br><span class="line">				$distance &#x3D; 50;</span><br><span class="line">				while($distance &lt;&#x3D; 250)</span><br><span class="line">				&#123;                &#x2F;&#x2F;没有结束大括号，继续向后执行  </span><br><span class="line">			?&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;?php echo ($distance) ?&gt;&lt;&#x2F;td&gt;</span><br><span class="line">                &lt;td&gt;&lt;?php echo ($distance&#x2F;10) ?&gt;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;&#x2F;tr&gt;</span><br><span class="line">            &lt;?php</span><br><span class="line">				$distance +&#x3D; 50;</span><br><span class="line">                &#125;</span><br><span class="line">			?&gt;</span><br><span class="line">        &lt;&#x2F;table&gt;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="数组-array"><a class="markdownIt-Anchor" href="#数组-array"></a> 数组 array()</h1>
<ul>
<li>
<p>array()定义数组</p>
</li>
<li>
<p>赋值</p>
<ul>
<li>$arr = array(“111”,“222”,…“nnn”);</li>
<li>$arr[0] = “111”;…</li>
</ul>
</li>
<li>
<p>获得数组长度</p>
<ul>
<li>$length = count($arr);</li>
</ul>
</li>
<li>
<p>自动添加到尾部(即最后一个元素的下标加一 )</p>
<ul>
<li>$arr[] = “string”;</li>
</ul>
</li>
<li>
<p>直接往数组中插入一个元素且指定下标元素</p>
<ul>
<li>但是中间没有赋值的元素无法输出</li>
<li>这样的话就不能用for循环进行遍历，因为下标变化是连续的</li>
<li>这时使用foreach</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>($arrname <span class="keyword">as</span> $key =&gt; $value)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//as后面 key存储下标	 value存储对应的值</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;$value&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>php中的数组下标可以为其他类型</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$b = <span class="keyword">array</span>(<span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;jessie&quot;</span>,<span class="string">&quot;city&quot;</span>=&gt;<span class="string">&quot;lanzhou&quot;</span>,<span class="string">&quot;age&quot;</span>=&gt;<span class="string">&quot;10&quot;</span>);</span><br><span class="line">$b[<span class="string">&quot;sex&quot;</span>] = <span class="string">&quot;famale&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="二维数组"><a class="markdownIt-Anchor" href="#二维数组"></a> 二维数组</h1>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$b = <span class="keyword">array</span>(</span><br><span class="line">	<span class="string">&quot;地支&quot;</span> =&gt; <span class="keyword">array</span>(<span class="string">&quot;子&quot;</span>,<span class="string">&quot;丑&quot;</span>,<span class="string">&quot;鄚&quot;</span>),</span><br><span class="line">    <span class="string">&quot;天干&quot;</span> =&gt; <span class="keyword">array</span>()</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>输出二维数组</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>($b <span class="keyword">as</span> $key =&gt; $value)&#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;$key: &quot;</span>;</span><br><span class="line">			<span class="keyword">foreach</span>($value <span class="keyword">as</span> $key1 =&gt; $value1)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&quot;$key1 is $value1 &amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="输出二维数组元素中的问题"><a class="markdownIt-Anchor" href="#输出二维数组元素中的问题"></a> 输出二维数组元素中的问题</h2>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$a = <span class="string">&quot;地支&quot;</span>;</span><br><span class="line">$c = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;$b[$a][$c]&quot;</span>;<span class="comment">//不能得到我们想要的结果</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里的解决方法就和下面这个数组下标问题一样</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$a = <span class="string">&#x27;地支&#x27;</span>; <span class="comment">//这里**为单引号**</span></span><br><span class="line">$c = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#123;$b[$a][$c]&#125;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> $b[$a][$c];</span><br><span class="line"></span><br><span class="line">$a = 地支;</span><br><span class="line">$c = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#123;$b[$a][$c]&#125;&quot;</span>;<span class="comment">//地支被解析为常量，若没有定义这个常量则会报错</span></span><br><span class="line"><span class="keyword">echo</span> $b[$a][$c];<span class="comment">//地支被当作常量来处理，若没有定义这个常量则当作字符串处理</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意二维数组不能直接通过<code>echo &quot;$b[name][name2]&quot;;</code> 输出的。</p>
<p>会报错，而一维数组可以</p>
</blockquote>
<h1 id="数组下标问题"><a class="markdownIt-Anchor" href="#数组下标问题"></a> 数组下标问题</h1>
<ul>
<li>
<p>数组的下标是不加引号、还是使用单引号、还是使用双引号</p>
<ul>
<li>不加引号：如果是数字下标就可，如果是字符串下标则还需要类型转换，影响效率</li>
<li>加单引号：就是字符串</li>
<li>加双引号：还要判断有无变量以及特殊字符转义，比单引号效率低一些</li>
</ul>
<h2 id="在双引号中有数组元素的访问时"><a class="markdownIt-Anchor" href="#在双引号中有数组元素的访问时"></a> 在双引号中有数组元素的访问时</h2>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012143455/article/details/50516965">参考</a></p>
</li>
<li>
<p>当在双引号中有数组元素的访问的时候，如下的写法是 <strong>错误</strong> 的</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;$_GET[&#x27;name&#x27;]&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;$myarr[&#x27;one&#x27;]&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>正确做法</strong> 如下，有三种：</p>
<ul>
<li>
<p>第一种：索引字符串不加引号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;$_GET[name]&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>第二种：索引字符串不加引号，且数组元素用花括号括起来</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">define (<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#123;$_GET[name]&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此时用花括号括起来的数组元素中的name就会被当作字符常量来处理，所以实际输出的相当于echo “$_GET[age]”;</p>
<p>如果没有定义该常量，则会 <strong>报错</strong></p>
</blockquote>
</li>
<li>
<p>第三种：索引字符串加单引号，且数组元素用花括号括起来</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#123;$_GET(&#x27;name&#x27;)&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>效果和第一种方法相同</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="数组元素下标是否加单引号未使用双引号"><a class="markdownIt-Anchor" href="#数组元素下标是否加单引号未使用双引号"></a> 数组元素下标是否加单引号(未使用双引号)</h2>
<ul>
<li>
<p>加单引号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> $_GET[<span class="string">&#x27;name&#x27;</span>]; ==&gt;<span class="keyword">echo</span> $_GET[<span class="string">&quot;name&quot;</span>];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>即输出该输出的内容，name当作字符串处理</p>
</blockquote>
</li>
<li>
<p>未加单引号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> $_GET[name];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此时name被当作常量处理，如果没有定义常量name则当作字符串处理。即name不是常量时就和echo $_GET[‘name’]效果相同。</p>
</blockquote>
</li>
</ul>
<h2 id="数组元素下标是否加单引号和花括号使用双引号"><a class="markdownIt-Anchor" href="#数组元素下标是否加单引号和花括号使用双引号"></a> 数组元素下标是否加单引号和花括号(使用双引号)</h2>
<ul>
<li>
<p>不加单引号，不加花括号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;$_GET[name]&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>name被当作字符串处理，即输出我们想要的内容</p>
</blockquote>
</li>
<li>
<p>加花括号，不加单引号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#123;$_GET[name]&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>name被当作字符常量处理，如果没有定义该常量，则会 <strong>报错</strong> 。</p>
</blockquote>
</li>
<li>
<p>加花括号，加单引号</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#123;$_GET[&#x27;name&#x27;]&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>name被当作字符串处理</p>
</blockquote>
</li>
</ul>
<h2 id="数组下标被当作常量的情况"><a class="markdownIt-Anchor" href="#数组下标被当作常量的情况"></a> 数组下标被当作常量的情况</h2>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#123;$myarr[name]&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>若常量不存在则会报错</p>
</blockquote>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> $myarr[name];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>若常量不存在则会将name解析成字符串</p>
</blockquote>
<h2 id="双引号中使用单引号"><a class="markdownIt-Anchor" href="#双引号中使用单引号"></a> 双引号中使用单引号</h2>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;$myarr[name]&#x27;&quot;</span>;</span><br><span class="line"><span class="comment">//相当于</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&#x27;&quot;</span>.<span class="string">&quot;$myarr[name]&quot;</span>.<span class="string">&quot;&#x27;&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>但是</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二维数组中就不能这样用</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="数组排序函数"><a class="markdownIt-Anchor" href="#数组排序函数"></a> 数组排序函数</h1>
<ul>
<li>sort()：以升序对数组排序</li>
<li>rsort()：以降序对数组排序</li>
</ul>
<blockquote>
<p>用sort()和rsort()进行的排序，输出下表时会只输出0，1，2，…不会输出自定义的下标</p>
<p>本函数会为排序的数组中的单元赋予新的键名，这将删除原有的键名而不仅是重新排序。</p>
<p>如果要输出自定义的下标，要使用下面的这四个排序函数</p>
</blockquote>
<ul>
<li>
<p>asort()：根据值，以升序对关联数组进行排序</p>
</li>
<li>
<p>ksort()：根据键，以升序对关联数组进行排序</p>
</li>
<li>
<p>arsort()：根据值，以降序对关联数组进行排序</p>
</li>
<li>
<p>krsort()：根据键，以降序对关联数组进行排序</p>
</li>
<li>
<h4 id="sort-ksort-asort-rsort的异同点"><a class="markdownIt-Anchor" href="#sort-ksort-asort-rsort的异同点"></a> sort()、ksort()、asort()、rsort()的异同点</h4>
</li>
</ul>
<blockquote>
<p>相同点：sort、ksort、asort都能对数组进行升序排序</p>
<p>不同点：sort排序在输出的时候会重新给键赋值为0~n-1，而原来的键值对没有变还能继续赋值等等，而ksort、asort在输出时都会输出原来的键值对。</p>
<p>rsort是降序排序，与sort类似</p>
<p>都由第二个参数sortingtype指定排序类型，ksort默认把键值转换为int型来排序，asort默认把值转换为字符串类型来排序。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		$arr &#x3D; array(&quot;bill&quot;&#x3D;&gt;&quot;a&quot;,&quot;steve&quot;&#x3D;&gt;&quot;b&quot;,&quot;elon&quot;&#x3D;&gt;&quot;c&quot;);</span><br><span class="line">		asort($arr);</span><br><span class="line">		echo &quot;根据值进行升序排序&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">		foreach($arr as $key &#x3D;&gt; $value)</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;key: &quot;.$key.&quot; value:&quot;.$value.&quot;&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		ksort($arr);</span><br><span class="line">		echo &quot;&lt;br &#x2F;&gt;根据键进行升序排序&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">		foreach($arr as $key &#x3D;&gt; $value)</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;key: &quot;.$key.&quot; value:&quot;.$value.&quot;&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="php实现随机显示7张图片中的三张图"><a class="markdownIt-Anchor" href="#php实现随机显示7张图片中的三张图"></a> php实现随机显示7张图片中的三张图</h1>
<ul>
<li>shuffle();函数，将数组 <strong>随机排序</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class="line">		#pics img&#123;</span><br><span class="line">			width : 200px;</span><br><span class="line">		&#125;</span><br><span class="line">		#pics div&#123;</span><br><span class="line">			float : left;</span><br><span class="line">			margin : 10px;</span><br><span class="line">			padding : 5px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id &#x3D; &quot;pics&quot;&gt;</span><br><span class="line">		&lt;?php</span><br><span class="line">			$arr &#x3D; array(&quot;1.jpg&quot;,&quot;2.png&quot;,&quot;3.png&quot;,&quot;4.png&quot;,&quot;5.png&quot;,&quot;6.jpg&quot;,&quot;7.jpg&quot;);</span><br><span class="line">			shuffle($arr);</span><br><span class="line">			for($i &#x3D; 0;$i &lt; 3;$i ++)</span><br><span class="line">			&#123;</span><br><span class="line">		?&gt;</span><br><span class="line">				&lt;div&gt;&lt;img src &#x3D; &quot;myimages&#x2F;&lt;?php echo &quot;$arr[$i]&quot;; ?&gt;&quot;kj&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">		&lt;?php</span><br><span class="line">			&#125;</span><br><span class="line">		?&gt;	</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>图片放在本地的myimages目录下</p>
</blockquote>
<h1 id="函数"><a class="markdownIt-Anchor" href="#函数"></a> 函数</h1>
<p>与其他语言类似。</p>
<h1 id="引用文件require和include"><a class="markdownIt-Anchor" href="#引用文件require和include"></a> 引用文件–require()和include()</h1>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;prepend.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require</span> $somefile;</span><br><span class="line"><span class="keyword">require</span>(<span class="string">&#x27;.txt&#x27;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>两个函数对于错误处理( <strong>主要区别</strong> )
<ul>
<li>require会生成致命错误并停止脚本，用@屏蔽错误提示后，后面一片空白，上面的内容还能解释。</li>
<li>include只会生成一个警告，后面的内容还会解释。</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;style type &#x3D; &quot;text&#x2F;css&quot;&gt;</span><br><span class="line">		#footer&#123;</span><br><span class="line">			width : 100%;</span><br><span class="line">			height : 30px;</span><br><span class="line">			background : #25506b;</span><br><span class="line">			text-align : center;</span><br><span class="line">			font-size : 12px;</span><br><span class="line">			padding : 8px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;</span><br><span class="line">        这是一个示例</span><br><span class="line">    &lt;&#x2F;h1&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		include &quot;shangke.php&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>shangke.php文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id &#x3D; &quot;footer&quot;&gt;</span><br><span class="line">		&lt;p&gt;Copyright &amp;copy; 2005-2020 兰州大学 All Rights Reserved&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="超全局变量"><a class="markdownIt-Anchor" href="#超全局变量"></a> 超全局变量</h1>
<ul>
<li>
<p>_SERVER数组</p>
<ul>
<li>里面存放了很多服务器和用户信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		$_SERVER[&quot;NAME&quot;] &#x3D; &quot;兰州大学&quot;;&#x2F;&#x2F;只会在当前进程中的所有数组插入该键值对，包括对引入文件中的该数据也起作用</span><br><span class="line">		echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">		print_r($_SERVER);</span><br><span class="line">		echo &quot;&lt;&#x2F;pre&gt;&quot;;</span><br><span class="line">		echo &quot;您来自于&quot;.$_SERVER[&quot;REMOTE_ADDR&quot;];</span><br><span class="line">    	include &quot;shangke.php&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>shangke.php中的内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">		print_r($_SERVER);</span><br><span class="line">		echo &quot;&lt;&#x2F;pre&gt;&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>_GET数组</p>
<ul>
<li>
<p>通过URL里面的参数来传递数据</p>
</li>
<li>
<blockquote>
<p><strong>通过表单传递的参数是放在url(放在报文头)中，会覆盖原来url中的参数</strong></p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">$_GET[&#39;id&#39;]和$_GET[&#39;name&#39;]访问GET数据</span><br><span class="line">&#x2F;&#x2F;注意中文乱码问题，使用urlencode编码</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;study.html文件</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;a href &#x3D; &quot;study.php?id&#x3D;3&quot;&gt;information&lt;&#x2F;a&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;shangke.php文件</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		include &quot;study.html&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;study.php文件</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;style type &#x3D; &quot;text&#x2F;css&quot;&gt;</span><br><span class="line">		#footer&#123;</span><br><span class="line">			width : 100%;</span><br><span class="line">			height : 30px;</span><br><span class="line">			background : #25506b;</span><br><span class="line">			text-align : center;</span><br><span class="line">			font-size : 12px;</span><br><span class="line">			padding : 8px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		$_SERVER[&quot;NAME&quot;] &#x3D; &quot;兰州大学&quot;;</span><br><span class="line">		echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">		print_r($_SERVER);</span><br><span class="line">		echo &quot;&lt;&#x2F;pre&gt;&quot;;</span><br><span class="line">		echo &quot;您来自于&quot;.$_SERVER[&quot;REMOTE_ADDR&quot;];	</span><br><span class="line">		include &quot;shangke.php&quot;;</span><br><span class="line">				echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">		print_r($_GET);</span><br><span class="line">		echo &quot;&lt;&#x2F;pre&gt;&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>判断是否为空</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(empty($_GET))</span><br><span class="line">&#123;</span><br><span class="line">	echo &quot;no information&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;防止其他用于直接访问该网页，而url中没有参数而出现错误</span><br></pre></td></tr></table></figure>
<ul>
<li>get不适用表单传递，因为敏感信息会出现在地址栏中</li>
<li>get适合于收藏夹情况，因为把具体的参数都保存了，不然每次都是去首页</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;study.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;a href &#x3D; &quot;study.php?id&#x3D;3&quot;&gt;information&lt;&#x2F;a&gt;</span><br><span class="line">	&lt;form action &#x3D; &quot;study.php&quot; method &#x3D; &quot;get&quot;&gt;</span><br><span class="line">		用户: &lt;input type &#x3D; &quot;text&quot; name &#x3D; &quot;username&quot;&#x2F;&gt;</span><br><span class="line">		&lt;br &#x2F;&gt;</span><br><span class="line">		密码: &lt;input type &#x3D; &quot;password&quot; name &#x3D; &quot;password&quot;&#x2F;&gt;</span><br><span class="line">		&lt;br &#x2F;&gt;</span><br><span class="line">		&lt;input type &#x3D; &quot;submit&quot; name &#x3D; &quot;sub&quot; &#x2F;&gt;</span><br><span class="line">	&lt;&#x2F;form&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;shangke.php</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		include &quot;study.html&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;study.php</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">		print_r($_GET);</span><br><span class="line">		echo &quot;&lt;&#x2F;pre&gt;&quot;;</span><br><span class="line">    	echo ($_GET[&quot;username&quot;]);</span><br><span class="line">    	&#x2F;&#x2F;或者  &quot;$_GET[username]&quot;</span><br><span class="line">   		&#x2F;&#x2F;或者  $_GET[username] $_GET[&quot;username&quot;]</span><br><span class="line">    	&#x2F;&#x2F;或者  &quot;&#123;$_GET[&#39;username&#39;]&#125;&quot; </span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;	</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里有个小问题，就是但就取get数组的值的时候，就是$_GET[“username”]。</p>
<p>但是再后面的数据库插入$_POST数组的值的时候就是</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$is = $conn-&gt;query(<span class="string">&quot;INSERT INTO `user`(`username`, `pwd`, `age`, `Gender`, `email`) VALUES (&#x27;$_POST[username]&#x27;,&#x27;$_POST[pawd]&#x27;,&#x27;$_POST[age]&#x27;,&#x27;$_POST[sex]&#x27;,&#x27;$_POST[email]&#x27;)&quot;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>php双引号中的单引号会被当作单纯的单引号，所以会吧变量转化为对应的值，此时转化完之后这些值都被单引号括起来，成为了sql中的字符串。</p>
</blockquote>
</li>
<li>
<p>表单传递用_POST数组，信息不会出现在地址栏中</p>
<blockquote>
<p>表单的信息不会出现在地址栏(放在报文体中)中，所以不会覆盖url中原来的参数</p>
<p>所以可以在method=post中在url中加参数，统一也就get数组中传递了参数</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;study.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;a href &#x3D; &quot;study.php?id&#x3D;3&quot;&gt;information&lt;&#x2F;a&gt;</span><br><span class="line">	&lt;form action &#x3D; &quot;study.php&quot; method &#x3D; &quot;post&quot;&gt;</span><br><span class="line">		用户: &lt;input type &#x3D; &quot;text&quot; name &#x3D; &quot;username&quot;&#x2F;&gt;</span><br><span class="line">		&lt;br &#x2F;&gt;</span><br><span class="line">		密码: &lt;input type &#x3D; &quot;password&quot; name &#x3D; &quot;password&quot;&#x2F;&gt;</span><br><span class="line">		&lt;br &#x2F;&gt;</span><br><span class="line">		&lt;input type &#x3D; &quot;submit&quot; name &#x3D; &quot;sub&quot; &#x2F;&gt;</span><br><span class="line">	&lt;&#x2F;form&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;shangke.php</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		include &quot;study.html&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;study.php</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">		print_r($_POST);</span><br><span class="line">		echo &quot;&lt;&#x2F;pre&gt;&quot;;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="get方法传递参数post方法传递参数get和post方法一起传递参数"><a class="markdownIt-Anchor" href="#get方法传递参数post方法传递参数get和post方法一起传递参数"></a> get方法传递参数，post方法传递参数，get和post方法一起传递参数</h1>
<ul>
<li>
<p>get方法传递的表单的参数会放在url中(放在报文头中)，且表单的参数会覆盖原来的参数</p>
</li>
<li>
<p>post方法传递的表单的参数不再url中(在报文体中)，且原来url中的参数不会被覆盖</p>
<blockquote>
<p>post方法传递表单，即使表单中没有填数据，也会提交含有空字符串的Post表单</p>
</blockquote>
</li>
<li>
<p>所以可以在post方法中在url中加上参数，也通过get数组传递了参数。</p>
</li>
</ul>
<h1 id="post传递复选框的内容"><a class="markdownIt-Anchor" href="#post传递复选框的内容"></a> post传递复选框的内容</h1>
<ul>
<li>要给复选框的name取名位name[]，才能正确传递。</li>
</ul>
<h1 id="从_post数组中输出复选框内容"><a class="markdownIt-Anchor" href="#从_post数组中输出复选框内容"></a> 从_POST数组中，输出复选框内容</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;最不满意的食品 : &quot;;</span><br><span class="line">foreach ($_POST[&quot;food2&quot;] as $key =&gt; $value) &#123;</span><br><span class="line">	echo &quot;$value &quot;;</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;&lt;br /&gt;&quot;;</span><br></pre></td></tr></table></figure>
<h1 id="判断表单中内容"><a class="markdownIt-Anchor" href="#判断表单中内容"></a> 判断表单中内容</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">		function <span class="keyword">check</span>()</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(tellsome.value == <span class="string">&quot;&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				tellsome.value = <span class="string">&quot;无建议&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">推荐使用document.getElementById();</span><br></pre></td></tr></table></figure>
<h1 id="_request数组不建议初学者使用"><a class="markdownIt-Anchor" href="#_request数组不建议初学者使用"></a> _request数组(不建议初学者使用)</h1>
<ul>
<li>既可以接受post数据，也可以接受get数据</li>
<li>即可以在action加上参数，也可以接受表单提交的数据(method = “post”)</li>
<li>且容易被别人利用漏洞攻击，所以实际中根据实际情况使用get和post</li>
</ul>
<h1 id="web数据库工作原理"><a class="markdownIt-Anchor" href="#web数据库工作原理"></a> web数据库工作原理</h1>
<ul>
<li>用户web浏览器发出http请求</li>
<li>web服务器接受请求，读取文件并发送给php引擎处理(对接数据库的操作是在php中进行的)</li>
<li>php引擎解析脚本</li>
<li>mysql数据库接受并执行数据库指令、返回结果给php引擎</li>
<li>php执行脚本结束，格式化查询结果，发送html至web服务器</li>
<li>web服务器将html返回给浏览器</li>
</ul>
<h1 id="php的mysql数据库函数"><a class="markdownIt-Anchor" href="#php的mysql数据库函数"></a> php的mysql数据库函数</h1>
<ul>
<li>实现连接数据库、执行sql语句、返回查询结果</li>
<li>即下面这些</li>
</ul>
<h1 id="php_mysql扩展库"><a class="markdownIt-Anchor" href="#php_mysql扩展库"></a> php_mysql扩展库</h1>
<ul>
<li>mysql扩展库已经停用，因为不能满足最新要求</li>
<li>先使用php_mysqli.dll,php_pdo_mysql等</li>
</ul>
<h1 id="mysqli增强版扩展库"><a class="markdownIt-Anchor" href="#mysqli增强版扩展库"></a> mysqli(增强版扩展库)</h1>
<ul>
<li>面向对象接口</li>
<li>面向过程接口</li>
</ul>
<blockquote>
<p>为了面向不同的使用习惯</p>
</blockquote>
<ul>
<li>
<p>连接数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		$mysqli &#x3D; new mysqli(&#39;localhost&#39;,&#39;my_user&#39;,&#39;my_password&#39;,&#39;my_db&#39;);</span><br><span class="line">		$mysqli &#x3D; new mysqli(数据库地址，用户名，密码，数据库名);</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head &gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		$host &#x3D; &quot;localhost&quot;;</span><br><span class="line">		$username &#x3D; &quot;root&quot;;</span><br><span class="line">		$password &#x3D; &quot;li33092728li&quot;;</span><br><span class="line">		$database &#x3D; &quot;test&quot;;</span><br><span class="line">    	$port &#x3D; &quot;13140&quot;;&#x2F;&#x2F;尤其是更换过默认端口的需要自己指定端口</span><br><span class="line">		$conn &#x3D; @new </span><br><span class="line">        mysqli($host,$username,$password,$database,$port);</span><br><span class="line">    &#x2F;&#x2F;@符号位忽略报错信息</span><br><span class="line">		if($conn-&gt;connect_errno)&#123;</span><br><span class="line">			die(&quot;数据库连接错误&quot;.$conn-&gt;connect_error);</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			echo &quot;数据库连接成功&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>mysqli-&gt;query()</code>返回值</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/06/eVkPwDKxmOWtGcF.png" alt="image.png" /></p>
</li>
</ul>
<h1 id="三码合一数据库-页面-php代码"><a class="markdownIt-Anchor" href="#三码合一数据库-页面-php代码"></a> 三码合一:数据库、页面、PHP代码</h1>
<ul>
<li>存储的编码问题</li>
<li>通信的编码问题（可能默认情况下不是utf-8编码）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head &gt;</span><br><span class="line">		&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">		&lt;meta charset&#x3D;&quot;utf-8&quot; &#x2F;&gt; --客户端的编码方式</span><br><span class="line">	&lt;&#x2F;head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">        &lt;?php</span><br><span class="line">        	header(&quot;Content-type: text&#x2F;html;charset &#x3D; utf-8&quot;);</span><br><span class="line">        	&#x2F;&#x2F;设置页面内容为html，变法方式为utf-8</span><br><span class="line">        	$host &#x3D; &quot;localhost&quot;;</span><br><span class="line">            $username &#x3D; &quot;root&quot;;</span><br><span class="line">            $password &#x3D; &quot;li33092728li&quot;;</span><br><span class="line">            $database &#x3D; &quot;test&quot;;</span><br><span class="line">            $port &#x3D; &quot;13140&quot;;&#x2F;&#x2F;尤其是更换过默认端口的需要自己指定端口</span><br><span class="line">            $conn &#x3D; @new </span><br><span class="line">            mysqli($host,$username,$password,$database,$port);</span><br><span class="line">        &#x2F;&#x2F;@符号位忽略报错信息</span><br><span class="line">            if($conn-&gt;connect_errno)&#123;</span><br><span class="line">                die(&quot;数据库连接错误&quot;.$conn-&gt;connect_error);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                echo &quot;数据库连接成功&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        	$conn-&gt;query(&quot;set names utf8&quot;);&#x2F;&#x2F;注意这里是utf8，不是utf-8</span><br><span class="line">        &#x2F;&#x2F;而且这个编码的设置针对写库的操作的，所以要放在插入数据语句的前面</span><br><span class="line">       	&#x2F;&#x2F;相当于</span><br><span class="line">        &#x2F;&#x2F;set character_set_client &#x3D; &#39;utf8&#39;</span><br><span class="line">        &#x2F;&#x2F;set character_set_connection &#x3D; &#39;utf8&#39;</span><br><span class="line">        &#x2F;&#x2F;set character_set_results &#x3D; &#39;utf8&#39;</span><br><span class="line">        ?&gt;</span><br><span class="line">	&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="php向数据库插入数据"><a class="markdownIt-Anchor" href="#php向数据库插入数据"></a> php向数据库插入数据</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head &gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		header(&quot;Content-type: text&#x2F;html;charset &#x3D; utf-8&quot;);</span><br><span class="line">		$host &#x3D; &quot;localhost&quot;;</span><br><span class="line">		$username &#x3D; &quot;root&quot;;</span><br><span class="line">		$password &#x3D; &quot;li33092728li&quot;;</span><br><span class="line">		$database &#x3D; &quot;test&quot;;</span><br><span class="line">		$port &#x3D; &quot;13140&quot;;</span><br><span class="line">		$conn &#x3D; @new mysqli($host,$username,$password,$database,$port);</span><br><span class="line">		if($conn-&gt;connect_errno)&#123;</span><br><span class="line">			die(&quot;数据库连接错误&quot;.$conn-&gt;connect_error);</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">		?&gt;</span><br><span class="line">			&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">				alert(&quot;数据库连接成功&quot;);</span><br><span class="line">			&lt;&#x2F;script&gt;</span><br><span class="line">		&lt;?php</span><br><span class="line">		&#125;</span><br><span class="line">		$conn-&gt;query(&quot;set names utf8&quot;);</span><br><span class="line">		$is &#x3D; $conn-&gt;query(&quot;INSERT INTO &#96;user&#96;(&#96;ID&#96;, &#96;username&#96;, &#96;pwd&#96;, &#96;age&#96;, &#96;Gender&#96;, &#96;email&#96;) VALUES (&#39;1&#39;,&#39;liwei&#39;,&#39;111&#39;,12,&#39;男&#39;,&#39;20113@qq.com&#39;)&quot;);</span><br><span class="line">    	if($is)</span><br><span class="line">        &#123;</span><br><span class="line">            ?&gt;</span><br><span class="line">    			&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    				alert(&quot;插入数据成功&quot;);</span><br><span class="line">    			&lt;&#x2F;script&gt;</span><br><span class="line">    		&lt;?php</span><br><span class="line">        &#125;else</span><br><span class="line">        &#123;</span><br><span class="line">        	?&gt;</span><br><span class="line">    			&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    				alert(&quot;插入数据失败&quot;);</span><br><span class="line">    			&lt;&#x2F;script&gt;</span><br><span class="line">    		&lt;?php</span><br><span class="line">        &#125;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>数据表用反引号，字段名用反引号括起来</p>
</blockquote>
<h1 id="向数据库中插入表单中收集的信息"><a class="markdownIt-Anchor" href="#向数据库中插入表单中收集的信息"></a> 向数据库中插入表单中收集的信息</h1>
<ul>
<li>表单内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot; &#x2F;&gt;</span><br><span class="line">	&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class="line">		div&#123;</span><br><span class="line">			margin :0 auto;</span><br><span class="line">			text-align : center;</span><br><span class="line">			border : 1px solid;</span><br><span class="line">			width : 700px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">	&lt;script type &#x3D; &quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">		function judge()</span><br><span class="line">		&#123;</span><br><span class="line">			var v1 &#x3D; document.getElementById(&quot;2&quot;);</span><br><span class="line">			var v2 &#x3D; document.getElementById(&quot;3&quot;);</span><br><span class="line">			if(v1.value !&#x3D; v2.value)</span><br><span class="line">			&#123;</span><br><span class="line">				window.alert(&quot;两次密码不一致&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		function rese()</span><br><span class="line">		&#123;</span><br><span class="line">			alert(&quot;输入的数据将被清空，你确定吗？&quot;)</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div style&#x3D;&quot;white-space:pre&quot;; id &#x3D; &quot;main&quot;&gt;</span><br><span class="line">		&lt;h2&gt;用户注册&lt;&#x2F;h2&gt;</span><br><span class="line">		&lt;form action &#x3D; &quot;study.php&quot; method &#x3D; &quot;post&quot;&gt;</span><br><span class="line">		用  户  名：	&lt;input type &#x3D; &quot;text&quot; name &#x3D; &quot;username&quot; required&#x3D;&quot;required&quot; placeholder&#x3D;&quot;请输入用户名&quot; &#x2F;&gt;</span><br><span class="line">		&lt;br&#x2F;&gt;</span><br><span class="line">		密       码：	&lt;input type &#x3D; &quot;password&quot; id &#x3D; &quot;2&quot; name &#x3D; &quot;pawd&quot; required&#x3D;&quot;required&quot;&#x2F;&gt;</span><br><span class="line">		&lt;br&#x2F;&gt;</span><br><span class="line">		确认密码：	&lt;input type &#x3D; &quot;password&quot; id &#x3D; &quot;3&quot; name &#x3D; &quot;pawd&quot; required&#x3D;&quot;required&quot;&#x2F;&gt;</span><br><span class="line">		&lt;br&#x2F;&gt;</span><br><span class="line">		性       别：	&lt;select name &#x3D; &quot;sex&quot;&gt;</span><br><span class="line">			&lt;option&gt;男&lt;&#x2F;option&gt;</span><br><span class="line">			&lt;option&gt;女&lt;&#x2F;option&gt;</span><br><span class="line">		&lt;&#x2F;select&gt;</span><br><span class="line">		&lt;br &#x2F;&gt;</span><br><span class="line">		年       龄：       &lt;input type &#x3D; &quot;number&quot; name &#x3D; &quot;age&quot; &#x2F;&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;bt &#x2F;&gt;</span><br><span class="line">		邮       件：       &lt;input type &#x3D; &quot;email&quot; name &#x3D; &quot;email&quot; required&#x3D;&quot;required&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">		&lt;input type &#x3D; &quot;submit&quot;  onclick &#x3D; &quot;judge()&quot; value &#x3D; &quot;注册&quot;&#x2F;&gt;                                        &lt;input type &#x3D; &quot;reset&quot;  onclick &#x3D; &quot;rese()&quot; &#x2F;&gt;</span><br><span class="line">		&lt;&#x2F;form&gt;</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>连接数据库进行插入操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot; &#x2F;&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class="line">		div&#123;</span><br><span class="line">			margin :0 auto;</span><br><span class="line">			text-align : center;</span><br><span class="line">			border : 1px solid;</span><br><span class="line">			width : 700px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">	header(&quot;Content-type: text&#x2F;html;charset &#x3D; utf-8&quot;);</span><br><span class="line">		if(empty($_POST))</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;NoInformation&quot;;</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			header(&quot;Content-type: text&#x2F;html;charset &#x3D; utf-8&quot;);</span><br><span class="line">			$host &#x3D; &quot;localhost&quot;;</span><br><span class="line">			$username &#x3D; &quot;root&quot;;</span><br><span class="line">			$password &#x3D; &quot;li33092728li&quot;;</span><br><span class="line">			$database &#x3D; &quot;test&quot;;</span><br><span class="line">			$port &#x3D; &quot;13140&quot;;</span><br><span class="line">			$conn &#x3D; @new mysqli($host,$username,$password,$database,$port);</span><br><span class="line">			&#125;</span><br><span class="line">			if($conn-&gt;connect_errno)&#123;</span><br><span class="line">	?&gt;</span><br><span class="line">				&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">					alert(&quot;数据库连接错误&quot;);</span><br><span class="line">				&lt;&#x2F;script&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">			die($conn-&gt;connect_error);</span><br><span class="line">			&#125;</span><br><span class="line">			$conn-&gt;query(&quot;set names utf8&quot;);</span><br><span class="line">			$is &#x3D; $conn-&gt;query(&quot;INSERT INTO &#96;user&#96;(&#96;username&#96;, &#96;pwd&#96;, &#96;age&#96;, &#96;Gender&#96;, &#96;email&#96;) VALUES (&#39;$_POST[username]&#39;,&#39;$_POST[pawd]&#39;,&#39;$_POST[age]&#39;,&#39;$_POST[sex]&#39;,&#39;$_POST[email]&#39;)&quot;);</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">			if($is)</span><br><span class="line">			&#123;</span><br><span class="line">				echo(&quot;&lt;h2&gt;注册成功!&lt;&#x2F;h2&gt;&lt;br&#x2F;&gt;注册的数据如下：&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">				echo(&quot;username:&quot;.$_POST[&quot;username&quot;].&quot;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">				echo(&quot;age:&quot;.$_POST[&quot;age&quot;].&quot;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">				echo(&quot;sex:&quot;.$_POST[&quot;sex&quot;].&quot;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">				echo(&quot;email:&quot;.$_POST[&quot;email&quot;].&quot;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;&quot;);</span><br><span class="line"></span><br><span class="line">				$id &#x3D; $conn-&gt;query(&quot;select last_insert_id()&quot;);</span><br><span class="line"></span><br><span class="line">				$row &#x3D; $id-&gt;fetch_row();</span><br><span class="line">				echo(&quot;您的ID号为：&quot;.$row[0].&quot;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;请记住此ID号，以便下次登录&quot;);</span><br><span class="line">			&#125;else</span><br><span class="line">			&#123;</span><br><span class="line">				echo(&quot;&lt;br&#x2F;&gt;注册失败&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="php获得数据源中的数据条数返回int型"><a class="markdownIt-Anchor" href="#php获得数据源中的数据条数返回int型"></a> php获得数据源中的数据条数，返回int型</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqli_num_rows(数据资源);&#x2F;&#x2F;面向过程写法</span><br><span class="line">mysqli-&gt;num_rows()&#x2F;&#x2F;面向对象写法</span><br></pre></td></tr></table></figure>
<h1 id="php关闭数据库"><a class="markdownIt-Anchor" href="#php关闭数据库"></a> php关闭数据库</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_close(数据资源);</span><br></pre></td></tr></table></figure>
<h1 id="php删除数据库内容"><a class="markdownIt-Anchor" href="#php删除数据库内容"></a> php删除数据库内容</h1>
<ul>
<li>再query()语句中执行delete语句即可</li>
</ul>
<h1 id="php查询数据库内容"><a class="markdownIt-Anchor" href="#php查询数据库内容"></a> php查询数据库内容</h1>
<ul>
<li>返回值为资源类型的结果集</li>
<li>处理有效资源类型数据，返回数组类型
<ul>
<li>fetch_row() //获取结果集中的一行记录，返回索引数组(下标为1,2,3,4…)，取到一行后下标增一,即可以用一个循环输出所有行</li>
<li>fetch_array()//返回索引和关联数组，即返回下标(0,1,2,…)也返回数据库字段为下标</li>
<li>fetch_assoc()//直接返回以数据库字段为下标的数组</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		$mysqli &#x3D; new mysqli(&#39;localhost&#39;,&#39;my_user&#39;,&#39;my_password&#39;,&#39;my_db&#39;);</span><br><span class="line">		$mysqli &#x3D; new mysqli(数据库地址，用户名，密码，数据库名);</span><br><span class="line">    	$sql &#x3D; &quot;select * from &#96;user&#96;&quot;;</span><br><span class="line">    	$result &#x3D; $conn-&gt;query($sql);</span><br><span class="line">    	$row &#x3D; $result -&gt; fetch_row();</span><br><span class="line">    	var_dump($row);</span><br><span class="line">    	echo &quot;id:&quot;.$row[0];</span><br><span class="line">    	while($row &#x3D; $result-&gt;fetch_row())&#123;</span><br><span class="line">            echo &quot;id:&quot;.row[0]; &#x2F;&#x2F;显示所有行</span><br><span class="line">        &#125;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="php返回刚刚自增创建的id"><a class="markdownIt-Anchor" href="#php返回刚刚自增创建的id"></a> php返回刚刚自增创建的id</h1>
<ul>
<li>
<p>三种方法</p>
</li>
<li>
<p>用以下语句</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$id = $conn-&gt;query(<span class="string">&quot;select max(id) from user&quot;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>但是这种方法不适合多线程</p>
</blockquote>
</li>
<li>
<p>用以下函数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$id = mysql_insert_id();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当系统执行完INSERT后，再执行SELECT时，可能已经被分发到了不同的后端服务器，如果你使用的编程语言是PHP的话，此时应该通过 mysql_insert_id()来得到最新插入的id，每次INSERT结束后，其实对应的autoincrement值就已经计算好返回给PHP 了，你无需再发出一次独立的查询，直接用mysql_insert_id()就可以了这个函数很好用 当我们插入一条语句时 它自动返回了 最后的id值并且此函数 仅对当前链接有用 也就是说 它是多用户安全型的所以我们经常用此函数；</p>
<p>但此函数有一个问题 就是 当id 为bigint 型时 就不在起作用了 所以 现在 正在用此函数的请小心了不过 我们平时很少遇到这样的问题，所以可以不用管它。</p>
<p>但是我的用不了，字符集有问题</p>
</blockquote>
</li>
<li>
<p>用以下查询</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$result = $conn-&gt;query(<span class="string">&quot;select last_insert_id()&quot;</span>);</span><br><span class="line">$id = $result-&gt;fetch_row();</span><br><span class="line"><span class="keyword">echo</span>($id[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个查询等同于第二种方法，而且解决了bigint的问题</p>
<p>这个我这里可以使用，没有字符集的问题</p>
</blockquote>
</li>
</ul>
<h1 id="sql语句中value中变量应该加"><a class="markdownIt-Anchor" href="#sql语句中value中变量应该加"></a> sql语句中value中变量应该加’ ’</h1>
<ul>
<li>双引号中使用单引号</li>
</ul>
<h1 id="headerlocatoinxxxphp"><a class="markdownIt-Anchor" href="#headerlocatoinxxxphp"></a> header(locatoin:xxx.php)</h1>
<ul>
<li>执行跳转</li>
</ul>
<h1 id="die语句"><a class="markdownIt-Anchor" href="#die语句"></a> die语句</h1>
<ul>
<li>停止后面的语句运行并输出语句</li>
</ul>
<h1 id="fetch_row-fetch_assoc"><a class="markdownIt-Anchor" href="#fetch_row-fetch_assoc"></a> fetch_row() fetch_assoc()</h1>
<ul>
<li>
<p><code>$result = $conn-&gt;query($sql)</code> 返回值为一个资源型结果集</p>
</li>
<li>
<p><code>$row = $result-&gt;fetch_row()</code> 将结果集中的下标对应的行取出来给$row</p>
<p>没取出一个下标加一，所以可以用一个循环取出结果集中的所有行</p>
</li>
<li>
<p><code>$row = $result-&gt;fetch_assoc()</code>  一样的只是取出来的下标不同，区别如下：</p>
<ul>
<li>fetch_row() //获取结果集中的一行记录，返回索引数组(下标为0,1,2,3,4…)，取到一行后下标增一,即可以用一个循环输出所有行</li>
<li>fetch_array()//返回索引和关联数组，即返回下标(0,1,2,…)也返回数据库字段为下标</li>
<li>fetch_assoc()//直接返回以数据库字段为下标的数组</li>
</ul>
</li>
</ul>
<h1 id="分页技术"><a class="markdownIt-Anchor" href="#分页技术"></a> 分页技术</h1>
<ul>
<li>
<p>首页   上一页   下一页   尾页</p>
</li>
<li>
<p>首页:show.php?page=1</p>
</li>
<li>
<p>上一页:show.php?page =n-1(当前页为n)</p>
</li>
<li>
<p>下一页:show.php?page=n+1</p>
</li>
<li>
<p>尾页:show.php?page= 总页数</p>
</li>
<li>
<p>总页数=ceil(总记录条数/每页显示记录)</p>
</li>
<li>
<p>ceil()函数：小数点舍掉并加一</p>
</li>
<li>
<p>从指定位置开始查询指定条数的记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> message <span class="keyword">limit</span> sart,<span class="keyword">rows</span></span><br><span class="line"><span class="comment">--start:起始位置(默认值为0)</span></span><br><span class="line"><span class="comment">--rows:每次取几条记录</span></span><br><span class="line">第一页:<span class="keyword">select</span> * <span class="keyword">from</span> message <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">3</span></span><br><span class="line">第二页:<span class="keyword">select</span> * <span class="keyword">from</span> message <span class="keyword">limit</span> <span class="number">3</span>,<span class="number">3</span></span><br><span class="line">第三页:<span class="keyword">select</span> * <span class="keyword">from</span> message <span class="keyword">limit</span> <span class="number">6</span>,<span class="number">3</span></span><br><span class="line">...</span><br><span class="line">第n页:<span class="keyword">select</span> * <span class="keyword">from</span> message <span class="keyword">limit</span> <span class="number">3</span>*(n<span class="number">-1</span>),<span class="number">3</span></span><br><span class="line"></span><br><span class="line">每页显示条数:$pagesize</span><br><span class="line">总页数:$totalPage = <span class="keyword">ceil</span>(总记录条数/$pagesize)</span><br><span class="line">当前页码:$page</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> message <span class="keyword">limit</span> ($page<span class="number">-1</span>)*$pagesize,$pagesize</span><br></pre></td></tr></table></figure>
<ul>
<li>以下代码示例，并显示出页面跳转链接</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">		header(&quot;Content-type:text&#x2F;html;charset&#x3D;utf-8&quot;);</span><br><span class="line">		require &quot;conn.php&quot;;</span><br><span class="line">		if(!empty($_GET[&#39;key&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			$key &#x3D; $_GET[&#39;key&#39;];</span><br><span class="line">			$k &#x3D; &quot;&#96;Title&#96; like &#39;%$key%&#39;&quot;;</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			$k &#x3D; &quot;1&quot;;</span><br><span class="line">			$key &#x3D; &quot;&quot;;&#x2F;&#x2F;不加这句如果url参数中没有key则没有这个变量，会出错</span><br><span class="line">		&#125;</span><br><span class="line">		$pagesize &#x3D; 3;</span><br><span class="line">		$sql &#x3D; &quot;select * from message where $k&quot;;</span><br><span class="line">		$result &#x3D; $conn-&gt;query($sql);</span><br><span class="line">		$rows &#x3D; $result-&gt;num_rows;&#x2F;&#x2F;取出记录的总条数</span><br><span class="line">		&#x2F;&#x2F;num_rows是结果集的属性，所以不加括号</span><br><span class="line">		$totalpage &#x3D; ceil($rows&#x2F;$pagesize);</span><br><span class="line">		if(!empty($_GET[&#39;page&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			$page &#x3D; $_GET[&#39;page&#39;];</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			$page &#x3D; 1;</span><br><span class="line">		&#125;</span><br><span class="line">		$start&#x3D;($page-1)*$pagesize;</span><br><span class="line">		$sql &#x3D; &quot;select * from &#96;message&#96; where $k order by &#96;Ptime&#96; DESC limit $start,$pagesize&quot;;</span><br><span class="line">		$result &#x3D; $conn-&gt;query($sql);</span><br><span class="line">		while($row &#x3D; $result-&gt;fetch_assoc())</span><br><span class="line">		&#123;</span><br><span class="line">	?&gt;</span><br><span class="line">			&lt;hr &#x2F;&gt;</span><br><span class="line">			&lt;h3&gt;标题：&lt;?php echo $row[&#39;Title&#39;]; ?&gt;&lt;&#x2F;h3&gt;</span><br><span class="line">			&lt;p&gt;昵称：&lt;?php echo $row[&#39;Author&#39;]; ?&gt; | from: &lt;?php echo $row[&#39;IP&#39;]; ?&gt;&lt;&#x2F;p&gt;</span><br><span class="line">			&lt;p&gt;留言内容(&lt;?php echo $row[&#39;Ptime&#39;]; ?&gt;)：&lt;br &#x2F;&gt;</span><br><span class="line">			&lt;?php echo $row[&#39;Content&#39;]; ?&gt;&lt;&#x2F;p&gt;</span><br><span class="line">			&lt;p&gt;</span><br><span class="line">			&lt;a href &#x3D; edit.php?id&#x3D;&lt;?php echo $row[&#39;ID&#39;]; ?&gt;&gt;编辑&lt;&#x2F;a&gt; | &lt;a href &#x3D; &quot;javascript:do_del(&lt;?php echo $row[&#39;ID&#39;]; ?&gt;)&quot;&gt;删除&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;p&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		if($page&gt;1)</span><br><span class="line">		&#123;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;1&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;首页&lt;&#x2F;a&gt; &#39;;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;&#39;.($page-1).&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;上一页&lt;&#x2F;a&gt;&#39;;</span><br><span class="line">		&#125;</span><br><span class="line">		for($i &#x3D; 1;$i &lt;&#x3D; $totalpage;$i ++)</span><br><span class="line">		&#123;</span><br><span class="line">			if($page!&#x3D;$i)</span><br><span class="line">			&#123;</span><br><span class="line">				echo &#39;&lt;a class&#x3D;&quot;mya&quot; href&#x3D;&quot;show.php?page&#x3D;&#39;.$i.&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot; &gt;&#39;.$i.&quot;&lt;&#x2F;a&gt;|&quot;;</span><br><span class="line">			&#125;else</span><br><span class="line">			&#123;</span><br><span class="line">				echo &quot;$i|&quot;;		</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		if($page&lt;$totalpage)</span><br><span class="line">		&#123;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;&#39;.($page+1).&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;下一页&lt;&#x2F;a&gt; &#39;;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;&#39;.$totalpage.&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;尾页&lt;&#x2F;a&gt;&#39;;</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="一个php文件中的多个php代码块"><a class="markdownIt-Anchor" href="#一个php文件中的多个php代码块"></a> 一个php文件中的多个php代码块</h1>
<ul>
<li>相当于一个代码块，然后代码进行合并</li>
</ul>
<h1 id="php实现评论功能"><a class="markdownIt-Anchor" href="#php实现评论功能"></a> php实现评论功能</h1>
<ul>
<li>
<p>conn.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		header(&quot;Content-type: text&#x2F;html;charset &#x3D; utf-8&quot;);</span><br><span class="line">		$ip &#x3D; &#39;localhost&#39;;</span><br><span class="line">		$user &#x3D; &#39;root&#39;;</span><br><span class="line">		$password &#x3D; &#39;li33092728li&#39;;</span><br><span class="line">		$database &#x3D; &#39;test&#39;;</span><br><span class="line">		$port &#x3D; &#39;13140&#39;;</span><br><span class="line">		$conn &#x3D; @new mysqli($ip,$user,$password,$database,$port);</span><br><span class="line">		if($conn-&gt;connect_errno)</span><br><span class="line">		&#123;</span><br><span class="line">			die(&quot;数据库连接错误&quot;.$conn-&gt;connect_error);</span><br><span class="line">		&#125;</span><br><span class="line">		$conn-&gt;query(&quot;set names utf8&quot;);	 </span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>show.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset &#x3D; &quot;utf-8&quot; &#x2F;&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class="line">		a&#123;</span><br><span class="line">				text-decoration: none;</span><br><span class="line">		&#125;</span><br><span class="line">		.mya&#123;</span><br><span class="line">				text-decoration:underline;</span><br><span class="line">		&#125;</span><br><span class="line">		textarea&#123;</span><br><span class="line">			resize:none;</span><br><span class="line">			border:0;</span><br><span class="line">			border-radius:18px;</span><br><span class="line">			background-color:rgba(241,241,241,.98);</span><br><span class="line">			width: 355px;</span><br><span class="line">			height: 100px;</span><br><span class="line">			padding: 10px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">	&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">		function judge()</span><br><span class="line">		&#123;</span><br><span class="line">			var name &#x3D; document.getElementById(&quot;name2&quot;);</span><br><span class="line">			var title &#x3D; document.getElementById(&quot;title2&quot;);</span><br><span class="line">			if(name.value &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">			&#123;</span><br><span class="line">				name.value &#x3D; &quot;匿名用户&quot;;</span><br><span class="line">			&#125;</span><br><span class="line">			if(title.value &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">			&#123;</span><br><span class="line">				title.value &#x3D; &quot;无标题&quot;;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		function do_del(id)</span><br><span class="line">		&#123;</span><br><span class="line">			if(window.confirm(&#39;确定要删除吗&#39;))</span><br><span class="line">			&#123;</span><br><span class="line">				window.location.href &#x3D; &quot;delete.php?id&#x3D;&quot;+id;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;form style &#x3D; &quot;white-space:pre&quot; action &#x3D; &quot;show.php&quot; method &#x3D; &quot;post&quot;&gt;</span><br><span class="line">		昵称:&lt;input type &#x3D; &quot;text&quot; placeholder &#x3D; &quot;请输入你的昵称&quot; name &#x3D; &quot;name1&quot; id &#x3D; &quot;name2&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">		标题:&lt;input type &#x3D; &quot;text&quot; placeholder &#x3D; &quot;请输入标题&quot; name &#x3D; &quot;title1&quot; id &#x3D; &quot;title2&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">		&lt;textarea name &#x3D; &quot;content&quot; placeholder &#x3D; &quot;留下些什么，证明你来过&quot; required&#x3D;&quot;required&quot; &gt;&lt;&#x2F;textarea&gt;</span><br><span class="line"></span><br><span class="line">		&lt;input type &#x3D; &quot;submit&quot; name &#x3D; &quot;sub&quot; onclick&#x3D;&quot;judge()&quot; &#x2F;&gt;</span><br><span class="line">	&lt;&#x2F;form&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		header(&quot;Content-type: text&#x2F;html;charset &#x3D; utf-8&quot;);</span><br><span class="line">		if(!empty($_POST))</span><br><span class="line">		&#123;</span><br><span class="line">			require &quot;conn.php&quot;;</span><br><span class="line">			$sql &#x3D; &quot;INSERT INTO &#96;message&#96;(&#96;ID&#96;,&#96;Title&#96;, &#96;Author&#96;, &#96;Content&#96;, &#96;IP&#96;, &#96;Ptime&#96;) VALUES (null,&#39;$_POST[title1]&#39;,&#39;$_POST[name1]&#39;,&#39;$_POST[content]&#39;,&#39;$_SERVER[REMOTE_ADDR]&#39;,now())&quot;;</span><br><span class="line">			$is &#x3D; $conn-&gt;query($sql);</span><br><span class="line">			if(!$is)</span><br><span class="line">			&#123;</span><br><span class="line">				echo &quot;插入失败&quot;;</span><br><span class="line">			&#125;</span><br><span class="line">			header(&quot;location:show.php&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;form method&#x3D;&quot;get&quot; action&#x3D;&quot;&quot;&gt;</span><br><span class="line">		&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;key&quot; &#x2F;&gt;&lt;input type&#x3D;&quot;submit&quot; name&#x3D;&quot;sub&quot; &#x2F;&gt;</span><br><span class="line">	&lt;&#x2F;form&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		header(&quot;Content-type:text&#x2F;html;charset&#x3D;utf-8&quot;);</span><br><span class="line">		require &quot;conn.php&quot;;</span><br><span class="line">		if(!empty($_GET[&#39;key&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			$key &#x3D; $_GET[&#39;key&#39;];</span><br><span class="line">			$k &#x3D; &quot;&#96;Title&#96; like &#39;%$key%&#39;&quot;;</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			$k &#x3D; &quot;1&quot;;</span><br><span class="line">			$key &#x3D; &quot;&quot;;&#x2F;&#x2F;不加这句如果url参数中没有key则没有这个变量，会出错</span><br><span class="line">		&#125;</span><br><span class="line">		$pagesize &#x3D; 3;</span><br><span class="line">		$sql &#x3D; &quot;select * from message where $k&quot;;</span><br><span class="line">		$result &#x3D; $conn-&gt;query($sql);</span><br><span class="line">		$rows &#x3D; $result-&gt;num_rows;&#x2F;&#x2F;取出记录的总条数</span><br><span class="line">		&#x2F;&#x2F;num_rows是结果集的属性，所以不加括号</span><br><span class="line">		$totalpage &#x3D; ceil($rows&#x2F;$pagesize);</span><br><span class="line">		if(!empty($_GET[&#39;page&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			$page &#x3D; $_GET[&#39;page&#39;];</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			$page &#x3D; 1;</span><br><span class="line">		&#125;</span><br><span class="line">		$start&#x3D;($page-1)*$pagesize;</span><br><span class="line">		$sql &#x3D; &quot;select * from &#96;message&#96; where $k order by &#96;Ptime&#96; DESC limit $start,$pagesize&quot;;</span><br><span class="line">		$result &#x3D; $conn-&gt;query($sql);</span><br><span class="line">		while($row &#x3D; $result-&gt;fetch_assoc())</span><br><span class="line">		&#123;</span><br><span class="line">	?&gt;</span><br><span class="line">			&lt;hr &#x2F;&gt;</span><br><span class="line">			&lt;h3&gt;标题：&lt;?php echo $row[&#39;Title&#39;]; ?&gt;&lt;&#x2F;h3&gt;</span><br><span class="line">			&lt;p&gt;昵称：&lt;?php echo $row[&#39;Author&#39;]; ?&gt; | from: &lt;?php echo $row[&#39;IP&#39;]; ?&gt;&lt;&#x2F;p&gt;</span><br><span class="line">			&lt;p&gt;留言内容(&lt;?php echo $row[&#39;Ptime&#39;]; ?&gt;)：&lt;br &#x2F;&gt;</span><br><span class="line">			&lt;?php echo $row[&#39;Content&#39;]; ?&gt;&lt;&#x2F;p&gt;</span><br><span class="line">			&lt;p&gt;</span><br><span class="line">			&lt;a href &#x3D; edit.php?id&#x3D;&lt;?php echo $row[&#39;ID&#39;]; ?&gt;&gt;编辑&lt;&#x2F;a&gt; | &lt;a href &#x3D; &quot;javascript:do_del(&lt;?php echo $row[&#39;ID&#39;]; ?&gt;)&quot;&gt;删除&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;p&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		if($page&gt;1)</span><br><span class="line">		&#123;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;1&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;首页&lt;&#x2F;a&gt; &#39;;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;&#39;.($page-1).&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;上一页&lt;&#x2F;a&gt;&#39;;</span><br><span class="line">		&#125;</span><br><span class="line">		for($i &#x3D; 1;$i &lt;&#x3D; $totalpage;$i ++)</span><br><span class="line">		&#123;</span><br><span class="line">			if($page!&#x3D;$i)</span><br><span class="line">			&#123;</span><br><span class="line">				echo &#39;&lt;a class&#x3D;&quot;mya&quot; href&#x3D;&quot;show.php?page&#x3D;&#39;.$i.&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot; &gt;&#39;.$i.&quot;&lt;&#x2F;a&gt;|&quot;;</span><br><span class="line">			&#125;else</span><br><span class="line">			&#123;</span><br><span class="line">				echo &quot;$i|&quot;;		</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		if($page&lt;$totalpage)</span><br><span class="line">		&#123;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;&#39;.($page+1).&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;下一页&lt;&#x2F;a&gt; &#39;;</span><br><span class="line">			echo &#39;&lt;a href &#x3D; &quot;show.php?page&#x3D;&#39;.$totalpage.&#39;&amp;key&#x3D;&#39;.$key.&#39;&quot;&gt;尾页&lt;&#x2F;a&gt;&#39;;</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>edit.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset &#x3D; &quot;utf8&quot; &#x2F;&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">		function judge()</span><br><span class="line">		&#123;</span><br><span class="line">			var name &#x3D; document.getElementById(&quot;name2&quot;);</span><br><span class="line">			var title &#x3D; document.getElementById(&quot;title2&quot;);</span><br><span class="line">			if(name.value &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">			&#123;</span><br><span class="line">				name.value &#x3D; &quot;匿名用户&quot;;</span><br><span class="line">			&#125;</span><br><span class="line">			if(title.value &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">			&#123;</span><br><span class="line">				title.value &#x3D; &quot;无标题&quot;;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line">	&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class="line">		textarea&#123;</span><br><span class="line">			resize:none;</span><br><span class="line">			border:0;</span><br><span class="line">			border-radius:18px;</span><br><span class="line">			background-color:rgba(241,241,241,.98);</span><br><span class="line">			width: 355px;</span><br><span class="line">			height: 100px;</span><br><span class="line">			padding: 10px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php </span><br><span class="line">		if(!empty($_GET))</span><br><span class="line">		&#123;</span><br><span class="line">			require &quot;conn.php&quot;;</span><br><span class="line">			$id &#x3D; $_GET[&#39;id&#39;];</span><br><span class="line">			$sql &#x3D; &quot;select * from &#96;message&#96; where &#96;ID&#96; &#x3D; $id&quot;;</span><br><span class="line">			$result &#x3D; $conn-&gt;query($sql);</span><br><span class="line">			$row &#x3D; $result-&gt;fetch_assoc();</span><br><span class="line">			$title &#x3D; $row[&#39;Title&#39;];</span><br><span class="line">			$name &#x3D; $row[&#39;Author&#39;];</span><br><span class="line">			$content &#x3D; $row[&#39;Content&#39;];</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;form style &#x3D; &quot;white-space:pre&quot; action &#x3D; &quot;edit.php&quot; method &#x3D; &quot;post&quot;&gt;</span><br><span class="line">		昵称:&lt;input type &#x3D; &quot;text&quot; placeholder &#x3D; &quot;请输入你的昵称&quot; name &#x3D; &quot;name1&quot; id &#x3D; &quot;name2&quot; value &#x3D; &lt;?php echo &#39;&quot;&#39;.$name.&#39;&quot;&#39;; ?&gt; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">		标题:&lt;input type &#x3D; &quot;text&quot; placeholder &#x3D; &quot;请输入标题&quot; name &#x3D; &quot;title1&quot; id &#x3D; &quot;title2&quot; value &#x3D; &lt;?php echo &#39;&quot;&#39;.$title.&#39;&quot;&#39;; ?&gt; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">		&lt;textarea name &#x3D; &quot;content&quot; placeholder &#x3D; &quot;留下些什么，证明你来过&quot; required&#x3D;&quot;required&quot; &gt;&lt;?php echo $content; ?&gt; &lt;&#x2F;textarea&gt;</span><br><span class="line"></span><br><span class="line">		&lt;input type &#x3D; &quot;hidden&quot; name &#x3D; &quot;id&quot; value &#x3D; &lt;?php echo $id; ?&gt; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">		&lt;input type &#x3D; &quot;submit&quot; name &#x3D; &quot;sub&quot; onclick&#x3D;&quot;judge()&quot; &#x2F;&gt;</span><br><span class="line">	&lt;&#x2F;form&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		header(&quot;Content-type: text&#x2F;html;charset &#x3D; utf-8&quot;);</span><br><span class="line">		if(!empty($_POST))</span><br><span class="line">		&#123;</span><br><span class="line">			require &quot;conn.php&quot;;</span><br><span class="line">			$sql &#x3D; &quot;UPDATE &#96;message&#96; SET &#96;Title&#96;&#x3D;&#39;$_POST[title1]&#39;,&#96;Author&#96;&#x3D;&#39;$_POST[name1]&#39;,&#96;Content&#96;&#x3D;&#39;$_POST[content]&#39;,&#96;Ptime&#96;&#x3D;now() WHERE &#96;ID&#96; &#x3D; $_POST[id]&quot;;</span><br><span class="line">			$conn-&gt;query($sql);</span><br><span class="line">			header(&quot;location:show.php&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>delete.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">	</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php </span><br><span class="line">		if(!empty($_GET))</span><br><span class="line">		&#123;</span><br><span class="line">			require &quot;conn.php&quot;;</span><br><span class="line">			$id &#x3D; $_GET[&#39;id&#39;];</span><br><span class="line">			$sql &#x3D; &quot;delete from &#96;message&#96; where &#96;ID&#96; &#x3D; $id&quot;;</span><br><span class="line">			$is &#x3D; $conn-&gt;query($sql);</span><br><span class="line">		&#125;</span><br><span class="line">		header(&quot;location:show.php&quot;);</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="php会话控制cookiesession"><a class="markdownIt-Anchor" href="#php会话控制cookiesession"></a> php会话控制(cookie&amp;session)</h1>
<ul>
<li>
<p>会话控制是为了解决什么问题</p>
<p>http为无状态协议，为了让服务器跟踪同一个客户端发出的连续请求，而使用会话控制</p>
</li>
<li>
<p>会话跟踪的方式(当一个用户请求一个页面以后再请求另一个页面时，需要让服务器知道这是同一个用户)</p>
<ul>
<li>超链接或者header()函数等重定向方式</li>
<li>使用Cookie将用户的信息状态，存放在客户端的计算机中</li>
<li>使用Session将用户的信息状态，存放在服务器中</li>
</ul>
</li>
<li>
<p>会话控制用到哪两种技术</p>
<ul>
<li>将用户状态信息，存放在客户端上，<strong>cookie</strong></li>
<li>将用户状态信息，存放再服务器中，<strong>session</strong></li>
</ul>
</li>
<li>
<p>这两种技术有什么特点</p>
</li>
</ul>
<h1 id="cookie"><a class="markdownIt-Anchor" href="#cookie"></a> cookie</h1>
<ul>
<li>
<p>cookie是一种由服务器发送给客户端的片段信息，存储在客户端浏览器的内存或者硬盘上，由用户的浏览器进行管理。</p>
</li>
<li>
<p>常用于保存用户名，密码，个性化设置，个人偏好记录等</p>
</li>
<li>
<p>当用户访问服务器时，服务器可以设置和访问cookie的信息。再http请求报文中会加上用户的cookie识别码，所以服务器可以借助这个码对用户进行识别和跟踪。</p>
</li>
<li>
<p>cookie存放的位置取决于浏览器，而且如果浏览器上存放的cookie太多，浏览器会自动删除</p>
</li>
<li>
<p>设置cookie</p>
<ul>
<li>语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bool setcookie(string name,[string value,[int expire,[string path,[string domain,[int secure]]]]]);</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>参数</p>
<ul>
<li>
<p>string name 规定cookie的名称，这个参数时必写参数。</p>
<p>可以通过省略cookie参数的所有列删除指定cookie</p>
</li>
<li>
<p>string value 规定cookie的值</p>
</li>
<li>
<p>int expire 规定cookie的有效期</p>
<ul>
<li>注意是我们设置的的UNIX时间戳减去当前的UNIX时间戳才是 cookie变量保存的时间。（UNIX时间戳：是从1970年1月1日（UTC/GMT的午夜）开始所经过的秒数)</li>
</ul>
</li>
<li>
<p>一般我们可以通过time()函数获取当前的UNIX时间戳，再加上我们要保存的时间（单位为秒）</p>
</li>
</ul>
<blockquote>
<p>如果不设置有效期，则该cookie只会存在在客户端的内存中，如果此次会话关闭，则该cookie就会消失。</p>
</blockquote>
</li>
<li>
<p>string path 规定cookie的服务器路径</p>
<ul>
<li>
<p>cookie的有效范围，这个参数是下一个参数domain基础上的有效范围。</p>
<ul>
<li>
<p>如果path设置为”/”，那就是在整个 domain都有效，比如setcookie(“user”,”php”,time()+3600,”/”),这样我们domain下的任何目录，任何文件都可以通过$_COOKIE[‘user’]来调用这个cookie变量的值。</p>
</li>
<li>
<p>如果path设置为”/test”,那么只在domain下的/test 目录及子目录才有效，比如domain下有两个目录: test1,test2,我们设置为setcookie(“user”,”php,time()+3600,”/test1″)，那么只有test1目录 下才能通过$_COOKIE[‘user’]调用user这个cookie变量的值，test2目录下获取不到。</p>
</li>
</ul>
</li>
<li>
<p>string domain 规定cookie的域名</p>
<ul>
<li>如果domain,<a target="_blank" rel="noopener" href="http://xn--googlephp-fp6n1344bx44a.cn">设置为googlephp.cn</a>，那么在googlephp.cn下的所有子域都有效。</li>
<li>假设googlephp.cn有两个子域，<a target="_blank" rel="noopener" href="http://php.googlephp.cn">php.googlephp.cn</a>，<a target="_blank" rel="noopener" href="http://css.googlephp.cn">css.googlephp.cn</a>，我们设置为 setcookie(“user”,”php”,time()+3600,”/”,”<a target="_blank" rel="noopener" href="http://php.googlephp.cn">php.googlephp.cn</a>”),那么只有在 php.googlephp.cn这个子域下才能获取user这个cookie变量的值.</li>
<li>再举一个例子：setcookie(“user”,”php”,time()+3600,”/test”,”<a target="_blank" rel="noopener" href="http://php.googlephp.cn">php.googlephp.cn</a>”),那么 只有在php.googlephp.cn这个子域下的test目录下才能获取user这个cookie变量的值.</li>
</ul>
</li>
<li>
<p>int secure 规定是否通过安全的https连接来传输cookie参数</p>
<ul>
<li>值cookie是否仅通过安全的https,值为0或1</li>
<li>如果值为1，则cookie只能在https连接上有效</li>
<li>默认值为 0，表示cookei在http和https连接上都有效。</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;sky&quot;</span>,time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">7</span>);</span><br><span class="line"><span class="comment">//返回值bool类型</span></span><br><span class="line"><span class="comment">//向客户端发送一个Cookie，将变量username值为sky，保存一周时间</span></span><br><span class="line"><span class="comment">//直接写数字，以秒为单位，不行</span></span><br><span class="line"><span class="comment">//以time()为基准</span></span><br><span class="line"><span class="comment">//不设置存在时间，则只会存放在客户端内存中，当关闭会话后，不会存储在客户端上</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>读取Cookie，可以通过$_COOKIE超全局数组获取cookie中的内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		setcookie(&quot;testcookie&quot;,&quot;My first cookie&quot;,time()+24*60*60*30);</span><br><span class="line">		setcookie(&quot;username&quot;,&quot;admin111&quot;,time()+60*60*24*7);</span><br><span class="line">		print_r($_COOKIE);</span><br><span class="line">		if(isset($_COOKIE[&#39;username&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;欢迎回家&quot;;</span><br><span class="line">			echo $_COOKIE[&#39;username&#39;].&quot;来访&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;欢迎你首次访问本网站&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>cookie的数组形态应用</p>
<ul>
<li>
<p>Cookie数组也可以利用多维数组的形式，将多个内容值存储在相同Cookie名称标识符下</p>
<p>example：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	setcookie(<span class="string">&quot;user[username]&quot;</span>,<span class="string">&quot;test&quot;</span>);</span><br><span class="line">	--$_COOKIE[<span class="string">&quot;user&quot;</span>][<span class="string">&quot;username&quot;</span>]</span><br><span class="line">	setcookie(<span class="string">&quot;user[password]&quot;</span>,md5(<span class="string">&quot;123456&quot;</span>));</span><br><span class="line">	--$_COOKIE[<span class="string">&quot;user&quot;</span>][<span class="string">&quot;password&quot;</span>]</span><br><span class="line">	setcookie(<span class="string">&quot;user[email]&quot;</span>,<span class="string">&quot;user@lzu.edu.cn&quot;</span>);</span><br><span class="line">	--$_COOKIE[<span class="string">&quot;user&quot;</span>][<span class="string">&quot;email&quot;</span>]</span><br><span class="line">	--遍历$_COOKIE[<span class="string">&quot;user&quot;</span>]数组</span><br><span class="line">	<span class="keyword">foreach</span>($_COOKIE[<span class="string">&quot;user&quot;</span>]<span class="keyword">as</span> $key =&gt; $value)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">echo</span> $key.<span class="string">&quot;:&quot;</span>.$value.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>删除cookie的两种方式</p>
<ul>
<li>
<p>省略setcookie()函数的所有可省略参数，即只设置name</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setCookie(<span class="string">&quot;account&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>设置cookie为已过期</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setCookie(<span class="string">&quot;isLogin&quot;</span>,<span class="string">&quot;&quot;</span>,time()<span class="number">-1</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>修改username的值时，第一次刷新不改变，第二次刷新才改变</p>
<p>因为第一次刷新的时候，执行setcookie语句，将设置内容发送给服务器，但是我们本地还没有被服务器写入，后面访问本地cookie时还是原来的值，第二次刷新的时候服务器写入了，所以本地cookie也更新了。</p>
</li>
<li>
<p>删除cookie</p>
<ul>
<li>
<p>忽略setcookie参数，只指定第一个参数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">&quot;username&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>设置已经过期</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;&quot;</span>,time()<span class="number">-1</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="用cookie实现用户访问信息"><a class="markdownIt-Anchor" href="#用cookie实现用户访问信息"></a> 用cookie实现用户访问信息</h1>
<ul>
<li>
<p>cookie有不可跨域名性</p>
</li>
<li>
<p>当用户第一次访问这个网站的时候，即客户端cookie数组中没有保存该用户的用户名，则显示欢迎信息。</p>
</li>
<li>
<p>如果该用户已经访问过该网站，则显示该用户访问的次数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		&#x2F;&#x2F;1.判断当前客户端是否存在计数器cookie</span><br><span class="line">		&#x2F;&#x2F;2.如果有则读出</span><br><span class="line">		if(isset($_COOKIE[&#39;count&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			$count &#x3D; $_COOKIE[&#39;count&#39;];</span><br><span class="line">			$count++;</span><br><span class="line">			echo &quot;您已经访问本页面&quot;.$count.&quot;次了&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		&#x2F;&#x2F;3.如果没有则新设</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">			$count &#x3D; 0;</span><br><span class="line">			echo &quot;欢迎您首次访问本站&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		setcookie(&quot;count&quot;,$count,time()+60*60*24*30);</span><br><span class="line">		setcookie(&quot;username&quot;,&quot;admin111&quot;,time()+60*60*24*7);</span><br><span class="line">		&#x2F;&#x2F; print_r($_COOKIE);</span><br><span class="line">		if(isset($_COOKIE[&#39;username&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;欢迎回家&quot;;</span><br><span class="line">			echo $_COOKIE[&#39;username&#39;].&quot;&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;欢迎你首次访问本网站&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上述代码中，设置用户名的setcookie语句，不管是第一次还不是第一次访问本网站。都直接设置用户名。</p>
<p>原因：当用户第一次访问该网站时，执行setcookie设置用户名的语句。此时setcookie语句经过服务器的处理，将相应的cookie信息写到客户端上。而此时客户端之前和服务器建立连接的时候中的cookie还没有进行设置。所以服务器判断该用户是第一次访问该网页。 当下一次刷新页面，用户把客户端中的cookie信息发送到服务器，服务器此时判断该用户已经是识别过的用户。</p>
<p>所以有一些cookie设置得刷新两次才能生效。</p>
</blockquote>
</li>
</ul>
<h1 id="session"><a class="markdownIt-Anchor" href="#session"></a> session</h1>
<ul>
<li>
<p>session把用户信息存放在服务器端上</p>
</li>
<li>
<p><strong>注意程序中Session中直接保存了Person类对象与Date类对象，使用起来要比Cookie方便。当多个客户端执行程序时，服务器会保存多个客户端的Session。获取Session的时候也不需要声明获取谁的Session。Session机制决定了当前客户只会获取到自己的Session，而不会获取到别人的Session。各客户的Session也彼此独立，互不可见</strong></p>
</li>
<li>
<p>session对浏览器的要求</p>
<blockquote>
<p>虽然Session保存在服务器，对客户端是透明的，它的正常运行仍然需要客户端浏览器的支持。这是因为Session需要使用Cookie作为识别标志。HTTP协议是无状态的，Session不能依据HTTP连接来判断是否为同一客户，因此服务器向客户端浏览器发送一个名为JSESSIONID的Cookie，它的值为该Session的id（也就是HttpSession.getId()的返回值）。Session依据该Cookie来识别是否为同一用户。</p>
<p><strong>该Cookie为服务器自动生成的，它的maxAge属性一般为–1，表示仅当前浏览器内有效，并且各浏览器窗口间不共享，关闭浏览器就会失效。</strong></p>
<p>因此同一机器的两个浏览器窗口访问服务器时，会生成两个不同的Session。但是由浏览器窗口内的链接、脚本等打开的新窗口（也就是说不是双击桌面浏览器图标等打开的窗口）除外。<strong>这类子窗口会共享父窗口的Cookie，因此会共享一个Session。</strong></p>
</blockquote>
</li>
<li>
<p>session都可以暂时保存在多个页面中使用的变量</p>
<p>它们的有本质差别:</p>
<ul>
<li>
<p>cookie存放在客户端浏览器中</p>
</li>
<li>
<p>session存放在服务器上</p>
</li>
</ul>
<p>它们之间的联系是：</p>
<ul>
<li>session ID一般保存在cookie中，或者放在url中</li>
</ul>
</li>
<li>
<p>客户端上只需要一个唯一的session id，session id往往以<strong>cookie的形式</strong>存放在客户端上</p>
<blockquote>
<p>session的工作原理如下，即为sessionid在客户端和浏览器端的交互：<br />
当浏览器A去访问一个有打开了session机制的php1文件时，session文件会创建，同时会将该session文件的id以cookie的形式发送给浏览器（session文件的id号可以session_id()这个函数来获得）。</p>
<p>​        当浏览器A没有关闭（会话没有结束），反而去访问另一个也开启session机制的php2文件时，那么该sessionid也会跟着http协议从浏览器发送到服务器上，访问到之前创建的session文件，将相关内存也保存到该session文件内。<br />
​        当我们开启了另一个浏览器B，也就是创建了另一个会话，那么该浏览器访问一个带有开启session机制的网页，会另外生成一个新的session文件，并将该session文件id号以cookie的形式传递给浏览器B.<br />
​        可以这么理解，一个会话对应一个sessionid。</p>
</blockquote>
</li>
<li>
<p>如果客户端禁止cookie，则可以通过attach在url上的方式</p>
</li>
<li>
<p>session的设置不同于cookie，必须先启动，然后才能进行设置</p>
</li>
<li>
<p>使用方式</p>
<ul>
<li>
<pre class="highlight"><code class="php">session_start();
<span class="hljs-comment">//一般写在最前面</span>
&lt;!--hexoPostRenderEscape:&lt;figure <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">highlight</span> <span class="hljs-title">plain</span>"&gt;&lt;<span class="hljs-title">table</span>&gt;&lt;<span class="hljs-title">tr</span>&gt;&lt;<span class="hljs-title">td</span> <span class="hljs-title">class</span>="<span class="hljs-title">gutter</span>"&gt;&lt;<span class="hljs-title">pre</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;1&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;2&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;3&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;4&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;5&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;6&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;/<span class="hljs-title">pre</span>&gt;&lt;/<span class="hljs-title">td</span>&gt;&lt;<span class="hljs-title">td</span> <span class="hljs-title">class</span>="<span class="hljs-title">code</span>"&gt;&lt;<span class="hljs-title">pre</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;* 直接以数组的方式使用&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;  &amp;#96;&amp;#96;&amp;#96;<span class="hljs-title">php</span>&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;  $<span class="hljs-title">_SESSION</span>[&amp;<span class="hljs-title">quot</span>;<span class="hljs-title">username</span>&amp;<span class="hljs-title">quot</span>;] &amp;#<span class="hljs-title">x3D</span>; &amp;<span class="hljs-title">quot</span>;<span class="hljs-title">test</span>&amp;<span class="hljs-title">quot</span>;;&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">line</span>"&gt;  $<span class="hljs-title">_SESSION</span>[&amp;<span class="hljs-title">quot</span>;<span class="hljs-title">uid</span>&amp;<span class="hljs-title">quot</span>;] &amp;#<span class="hljs-title">x3D</span>; 1;&lt;/<span class="hljs-title">span</span>&gt;&lt;<span class="hljs-title">br</span>&gt;&lt;/<span class="hljs-title">pre</span>&gt;&lt;/<span class="hljs-title">td</span>&gt;&lt;/<span class="hljs-title">tr</span>&gt;&lt;/<span class="hljs-title">table</span>&gt;&lt;/<span class="hljs-title">figure</span>&gt;:<span class="hljs-title">hexoPostRenderEscape</span>--&gt;

</span></code></pre>
</li>
<li>
<p>删除某个session或者销毁整个session</p>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">unset</span>($_SESSION[<span class="string">&#x27;key&#x27;</span>]);</span><br><span class="line"><span class="comment">//清除内存中所有的session变量可以用：</span></span><br><span class="line"> $_SESSION = <span class="keyword">array</span>();</span><br><span class="line"> <span class="comment">//删除内存中由session数组保存的变量</span></span><br><span class="line"> <span class="comment">//再次刷子刷新后，服务器段的session中也没有了这个变量</span></span><br><span class="line"> <span class="comment">//删除某个key值对</span></span><br><span class="line"> session_destory();</span><br><span class="line"> <span class="comment">//删除服务器端保留session信息的文件，此时内存中还是有这个变量，可以访问</span></span><br><span class="line"> <span class="comment">//再次刷新后，内存中也没有了这个变量</span></span><br><span class="line"> <span class="comment">//返回值为bool</span></span><br><span class="line"> <span class="comment">//销毁整个session</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>体会unset删除内存中变量已经写回服务器的延迟</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;?php</span><br><span class="line">		session_start();</span><br><span class="line">		date_default_timezone_set(&quot;Asia&#x2F;Shanghai&quot;);</span><br><span class="line">		if(!empty($_SESSION[&#39;last_visit&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;您上次访问的时间为：&quot;;</span><br><span class="line">			echo date(&quot;y-m-d h:i:s&quot;,$_SESSION[&#39;last_visit&#39;]);</span><br><span class="line">			echo &quot;&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">			echo &quot;访问次数：&quot;.$_SESSION[&#39;count_visit&#39;];</span><br><span class="line">		&#125;else</span><br><span class="line">		&#123;</span><br><span class="line">			$_SESSION[&#39;count_visit&#39;]&#x3D;0;</span><br><span class="line">			echo &quot;这是您第一次访问本站&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		$_SESSION[&#39;last_visit&#39;] &#x3D; time();</span><br><span class="line">		$_SESSION[&#39;count_visit&#39;]++;</span><br><span class="line">		unset($_SESSION[&#39;last_visit&#39;]);</span><br><span class="line">	?&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们先把unset那句去掉，然后访问该页面</p>
<p>页面显示为：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/27/i2IBrGjy6T1valc.png" alt="image.png" /></p>
<p>第一次访问后内存中设置了session变量，刷新后写到服务器中</p>
<p>即</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/27/CwEpPfmUvbLreFl.png" alt="image.png" /></p>
<p>我们再多刷新几次</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/27/ZOkbCqoGtfwTgsm.png" alt="image.png" /></p>
<p>然后我们把unset语句加上，刷新一次：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/27/1hKzBj6qdZk9g3o.png" alt="image.png" /></p>
<p>此时虽然内存中已经没有了该访问次数变量，但是服务器端还有，我们再刷新一次</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/27/AcRIJekfqWlzrNp.png" alt="image.png" /></p>
<p>此时说明刷新后内存中的信息写回到服务器端了。</p>
</blockquote>
</li>
<li>
<p>session变量会被保存在服务器端的某个文件中，该文件的位置式通过php.ini文件，在session.save_path属性指定的目录下。</p>
</li>
</ul>
</li>
<li>
<p>session自动回收机制</p>
<ul>
<li>
<p>session.cookie_lifetime = 0;</p>
<p>关闭浏览器相应的cookie文件即被删除</p>
</li>
<li>
<p>session.gc_maxlifetime;</p>
<p>设置过期session时间，默认1440秒(24分钟)</p>
</li>
<li>
<p>session.gc_probability/session.gc_divisor;</p>
<p>启动垃圾回收机制的概率(建议值为1/1000~1/5000)</p>
</li>
</ul>
</li>
</ul>
<h1 id="用户访问网站session发生了cookie发生了"><a class="markdownIt-Anchor" href="#用户访问网站session发生了cookie发生了"></a> 用户访问网站session发生了，cookie发生了</h1>
<ul>
<li>每个用户访问一个站点，则该站点给用户创建一个session id，该id以cookie的形式保存在客户端浏览器中，则该用户每次向站点发送http请求的时候，这个session id就会attach到请求报文的头部当中，然后服务器就可以通过session id进行用户的识别。就可以将用户与用户之间分开了。</li>
<li>set_cookie()函数中有domain和path参数，即设置cookie作用的域名和该域名下的路径，即规定了该cookie作用的范围，所以当我们浏览器访问某个站点的时候，直接将该站点路径下有效的cookie的信息都发送到服务器端。</li>
<li>session_id一般会以cookie的形式存放在客户端，相当于&quot;会员卡&quot;，该cookie也一样设置了path和domain，所以该用户下次再访问该网站的时候，能给服务器出示会员卡。服务器与服务器端的文件匹配，就可以知道了该用户的个人信息和偏好设置。</li>
<li>session比cookie更加安全一些，因为cookie可以由人为修改然后发送到服务器进行识别。而session存储在服务器端，不允许人为远程修改。所以安全性更高。</li>
<li>cookie有不可跨域名性</li>
</ul>
<h1 id="php时区设置"><a class="markdownIt-Anchor" href="#php时区设置"></a> php时区设置</h1>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date_default_timezone_set(<span class="string">&quot;Asia/Shanghai&quot;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="sleep-usleep"><a class="markdownIt-Anchor" href="#sleep-usleep"></a> sleep usleep</h1>
<ul>
<li>
<p>sleep</p>
<ul>
<li>
<p>延迟脚本执行</p>
</li>
<li>
<p>单位为秒</p>
</li>
</ul>
</li>
<li>
<p>usleep</p>
<ul>
<li>延迟代码执行</li>
<li>单位为<strong>微秒</strong></li>
</ul>
</li>
</ul>
<h1 id="文件上传"><a class="markdownIt-Anchor" href="#文件上传"></a> 文件上传</h1>
<ul>
<li>
<p>使用POST方法上传文件</p>
<blockquote>
<p>要在表单form标签中添加<code>enctype=&quot;multipart/form-data&quot;</code>属性</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enctype=&quot;&quot; mime类型</span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">enctype</span> = <span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span> = <span class="string">&quot;post&quot;</span> <span class="attr">action</span> = <span class="string">&quot;test.php&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;file&quot;</span> <span class="attr">name</span> = <span class="string">&quot;file1&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">inout</span> <span class="attr">type</span> = <span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里注意！！！</p>
<p>这个表单提交之后并没有$_post[‘file1’]</p>
<p>只是通过这个input type = “file”，给$_FILES[‘file1’]赋了值</p>
</blockquote>
<ul>
<li>接收文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面的file1为表单中type=&quot;file&quot;的name属性值</span></span><br><span class="line">$_FILES[<span class="string">&#x27;file1&#x27;</span>][<span class="string">&#x27;Name&#x27;</span>]</span><br><span class="line">$_FILES[<span class="string">&#x27;file1&#x27;</span>][<span class="string">&#x27;type&#x27;</span>]</span><br><span class="line"><span class="comment">//文件的mim类型，例如img,gif</span></span><br><span class="line">$_FILES[<span class="string">&#x27;file1&#x27;</span>][<span class="string">&#x27;size&#x27;</span>]</span><br><span class="line">$_FILES[<span class="string">&#x27;file1&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>]</span><br><span class="line"><span class="comment">//文件被上传后，在服务器端保存的临时文件名</span></span><br><span class="line">$_FILES[<span class="string">&#x27;file1&#x27;</span>][<span class="string">&#x27;error&#x27;</span>]</span><br><span class="line"><span class="comment">//错误号为0代表没有错误</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>限制上传文件大小</p>
<p>php.ini中限制，表单中也可限制</p>
<ul>
<li>
<p>php.ini配置文件中：</p>
<ul>
<li>
<p><code>post_max_size</code>选项</p>
<blockquote>
<p>此项不是限制上传单个文件的大小,而是针对整个表单的提交数据进行限制的</p>
<p>默认为8M</p>
<p>直接在等号后面写xxM即可，下面这个也一样</p>
</blockquote>
</li>
<li>
<p><code>upload_max_filesize</code>选项</p>
<blockquote>
<p>最大上传文件大小,此项针对上传文件时单个文件的大小</p>
<p>默认为2M</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>表单中进行设置：</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">&quot;test.php&quot;</span> <span class="attr">enctype</span> = <span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span> = <span class="string">&quot;post&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;hidden&quot;</span> <span class="attr">name</span> = <span class="string">&quot;MAX_FILE_SIZE&quot;</span> <span class="attr">value</span> = <span class="string">&quot;3&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;file&quot;</span> <span class="attr">name</span> = <span class="string">&quot;file1&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span> = <span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>限制文件大小的表单要放在file表单之前</p>
<p>限制的单位是字节大小</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>错误号</p>
<p>记住常用的0,1,2,4</p>
<blockquote>
<p>0:上传成功，没有发生错误</p>
<p>1:上传的文件超过了php.ini中<code>upload_max_filesize</code>选项限制的值</p>
<p>2:上传的文件超过了html表单中<code>MAX_FILE_SIZE</code>选项指定的值</p>
<p>4:没有上传的文件</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/ch9NV17HMXu2Wwv.jpg" alt="" /></p>
</li>
<li>
<p>常用函数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">move_uploaded_file(临时地址，目标地址);</span><br><span class="line"><span class="comment">//将上传的文件移动到新的位置，如果目标文件已经存在，则会覆盖</span></span><br><span class="line">Is_upload_file();</span><br><span class="line"><span class="comment">//判断是不是从post表单上传递过来的，防止恶意传递</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>判断文件类型</p>
<ul>
<li>
<p>判读mime类型</p>
<blockquote>
<p>$_FILES[‘name’][‘type’]的值为文件的mime类型</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>根据这个值进行文件类型的判断</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$allow_files = <span class="keyword">array</span>(<span class="string">&#x27;image/jpeg&#x27;</span>,<span class="string">&#x27;image/png&#x27;</span>,<span class="string">&#x27;image/gif&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(!in_array($_FILES[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;type&#x27;</span>],$allow_files))<span class="comment">//判断mime类型</span></span><br><span class="line">&#123;</span><br><span class="line"> 	<span class="keyword">echo</span> <span class="string">&quot;&lt;br/&gt;上传的文件不是图像&lt;br/&gt;&quot;</span>;</span><br><span class="line"> 	<span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>
<p>判断文件后缀</p>
<blockquote>
<p>使用<code>strchr(name,sep)</code>和<code>strrcgr(name,sep)</code>函数分离后缀名</p>
<p>strchr是从左边开始分离’.'后面的内容</p>
<p>strrchr是从右边开始分离’.'后面的内容</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$type = strchr($_FILES[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;name&#x27;</span>],<span class="string">&#x27;.&#x27;</span>);<span class="comment">//分离后缀名</span></span><br><span class="line"><span class="comment">//strrchr从右边开始分割，文件名中可能出现&#x27;.&#x27;</span></span><br><span class="line"><span class="keyword">if</span>(!in_array($type, $allow_files))</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&quot;&lt;br/&gt;上传的文件不是图像&lt;br /&gt;&quot;</span>;</span><br><span class="line">	<span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p>前两种方式会有安全问题，因为不能判断出真正的文件类型，容易被恶意攻击</p>
</li>
<li>
<p>使用php中finfo_file()获取文件真正的mime类型</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $savepath = $_FILES[<span class="string">&#x27;name&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line">	<span class="comment">//1.创建finfo资源</span></span><br><span class="line">    $finfo = finfo_open(FIFEINFO_MIME_TYPE); </span><br><span class="line">	<span class="comment">//2.将finfo资源和上传的文件进行比较，此时文件应该存放在服务器的暂时文件夹下面</span></span><br><span class="line">	<span class="comment">//因为此时还不确定文件类型复合要求，所以不能移动到正式的目录下面</span></span><br><span class="line">	$mime = finfo_file($finfo,$savepath);</span><br><span class="line">	<span class="keyword">echo</span> $mime;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>如果两次移动的文件名字一样，则后面的会覆盖前面的</p>
<ul>
<li>
<p>采用时间戳当文件名</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>文件上传代码示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">	if(isset($_FILES[&#39;upfile&#39;]))</span><br><span class="line">	&#123;</span><br><span class="line">        if($_FILES[&#39;upfile&#39;][&#39;error&#39;])</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;上传失败&quot;.$_FILES[&#39;upfile&#39;][&#39;error&#39;].&quot;&lt;br&#x2F;&gt;&quot;;&#x2F;&#x2F;自己做的时候具体判断错误原因</span><br><span class="line">			exit;</span><br><span class="line">		&#125;</span><br><span class="line">        &#x2F;&#x2F;第一种方式判断文件类型</span><br><span class="line">		&#x2F;&#x2F; $allow_files &#x3D; array(&#39;.jpg&#39;,&#39;.png&#39;,&#39;.gif&#39;);&#x2F;&#x2F;判断文件后缀</span><br><span class="line">		&#x2F;&#x2F; $type &#x3D; strchr($_FILES[&#39;upfile&#39;][&#39;name&#39;],&#39;.&#39;);&#x2F;&#x2F;分离后缀名</span><br><span class="line">		&#x2F;&#x2F;strrchr从右边开始分割，文件名中可能出现.</span><br><span class="line">		&#x2F;&#x2F; if(!in_array($type, $allow_files))&#123;</span><br><span class="line">		&#x2F;&#x2F; 	echo &quot;&lt;br&#x2F;&gt;上传的文件不是jpg图像&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">		&#x2F;&#x2F; 	exit;</span><br><span class="line">		&#x2F;&#x2F; &#125;</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F;第二种方式判断文件类型</span><br><span class="line">		&#x2F;&#x2F; if($_FILES[&#39;upfile&#39;][&#39;type&#39;]!&#x3D;&#39;image&#x2F;jpeg&#39;)&#x2F;&#x2F;判断mime类型</span><br><span class="line">		&#x2F;&#x2F; &#123;</span><br><span class="line">		&#x2F;&#x2F; 	echo &quot;&lt;br&#x2F;&gt;上传的文件不是jpg图像&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">		&#x2F;&#x2F; 	exit;</span><br><span class="line">		&#x2F;&#x2F; &#125;</span><br><span class="line">        </span><br><span class="line">		&#x2F;&#x2F;第三种方式</span><br><span class="line">		&#x2F;&#x2F;创建fileinfo资源</span><br><span class="line">		$info &#x3D; finfo_open(FILEINFO_MIME_TYPE);</span><br><span class="line">		&#x2F;&#x2F;将info资源与本身的文件做比较</span><br><span class="line">		$mime&#x3D;finfo_file($info,$_FILES[&#39;upfile&#39;][&#39;tmp_name&#39;]);</span><br><span class="line">		$allow_files &#x3D; array(&#39;image&#x2F;jpeg&#39;,&#39;image&#x2F;png&#39;,&#39;image&#x2F;gif&#39;);</span><br><span class="line">		if(!in_array($mime, $allow_files))</span><br><span class="line">		&#123;</span><br><span class="line">			echo &quot;&lt;br&#x2F;&gt;上传的文件不是jpg&#x2F;png&#x2F;gif图像&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">			exit;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		&#x2F;&#x2F;设置目标位置</span><br><span class="line">		&#x2F;&#x2F; $upload_file &#x3D; &#39;..&#x2F;uploaddir&#x2F;&#39;.$_FILES[&#39;upfile&#39;][&#39;name&#39;];</span><br><span class="line">        &#x2F;&#x2F;这个是采用原来的名字作为名字</span><br><span class="line">        &#x2F;&#x2F;为了避免不同用户同名文件导致的覆盖问题</span><br><span class="line">        &#x2F;&#x2F;采用时间戳命名</span><br><span class="line">        &#x2F;&#x2F;判断是否是由post传递过来的文件，防止恶意攻击</span><br><span class="line">		if(is_uploaded_file($_FILES[&#39;upfile&#39;][&#39;tmp_name&#39;]))</span><br><span class="line">		&#123;</span><br><span class="line">			$type &#x3D; strrchr($_FILES[&#39;upfile&#39;][&#39;name&#39;],&#39;.&#39;);</span><br><span class="line">			$filename &#x3D; time().$type;</span><br><span class="line">			$upload_file &#x3D; &#39;..&#x2F;uploaddir&#x2F;&#39;.$filename;</span><br><span class="line">			$is &#x3D; move_uploaded_file($_FILES[&#39;upfile&#39;][&#39;tmp_name&#39;], $upload_file);</span><br><span class="line">			if(!$is)</span><br><span class="line">			&#123;</span><br><span class="line">				echo &quot;&lt;br&#x2F;&gt;没有移动到指定目录&lt;br &#x2F;&gt;&quot;;</span><br><span class="line">				exit;</span><br><span class="line">			&#125;</span><br><span class="line">			echo &quot;&lt;br&#x2F;&gt;上传成功&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">			echo &#39;&lt;img src&#x3D;&quot;&#39;.$upload_file.&#39;&quot;&quot;&gt;&#39;;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;form action &#x3D; &quot;test.php&quot; enctype &#x3D; &quot;multipart&#x2F;form-data&quot; method &#x3D; &quot;post&quot; &#x2F;&gt;</span><br><span class="line">	&lt;input type &#x3D; &quot;hidden&quot; name &#x3D; &quot;MAX_FILE_SIZE&quot; value &#x3D; &quot;3000&quot; &#x2F;&gt;</span><br><span class="line">	&lt;input type &#x3D; &quot;file&quot; name &#x3D; &quot;upfile&quot; &#x2F;&gt;</span><br><span class="line">	&lt;input  type &#x3D; &quot;submit&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;form&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="php获得当前页面的名字"><a class="markdownIt-Anchor" href="#php获得当前页面的名字"></a> php获得当前页面的名字</h1>
<ul>
<li>使用<code>basename()</code>和<code>$_SERVER['PHP_SELF']</code>获取当前页面文件名</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> basename($_SERVER[<span class="string">&#x27;PHP_SELF&#x27;</span>]);</span><br><span class="line"><span class="comment">/*Returns The Current PHP File Name*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>basename()</code>函数</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">basename(path,suffix);</span><br><span class="line"><span class="comment">//path:文件的路径</span></span><br><span class="line"><span class="comment">//suffix:文件后缀名</span></span><br><span class="line"><span class="comment">//指定文件后缀名后，返回的字符串中将不包括文件的后缀名，而只是文件名字</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>$_SERVER['PHP_SELF']</code></li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/06/4z2GZPYdWfiDN5e.png" alt="image.png" /></p>
<h1 id="include_once"><a class="markdownIt-Anchor" href="#include_once"></a> include_once()</h1>
</div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/php/">php</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/08/03/UrEu8Zcjb7CReX6.jpg" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/10/12/SQLServerStudy/"><img class="prev-cover" data-lazy-src="https://i.loli.net/2020/08/07/GBcki6rT4lJ5sxE.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SQLServerStudy</div></div></a></div><div class="next-post pull-right"><a href="/2020/09/20/JSStudy/"><img class="next-cover" data-lazy-src="https://i.loli.net/2020/08/07/9i5sBP1MglDOemW.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JSStudy</div></div></a></div></nav></article></main><footer id="footer" style="background-image: url(https://i.loli.net/2020/08/03/UrEu8Zcjb7CReX6.jpg)" data-type="photo"><div id="footer-wrap"><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">hi~ welcome to my blog</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script></div></body></html>