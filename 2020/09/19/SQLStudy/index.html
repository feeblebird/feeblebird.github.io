<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SQLStudy | Komorebi</title><meta name="description" content="[toc]  SQLä¸åŒºåˆ†å¤§å°å†™  sqlæ˜¯å¤§å°å†™æ— å…³çš„ï¼Œä»–æŠŠå¤§å†™å’Œå°å†™å­—æ¯çœ‹ä½œç›¸åŒçš„å­—æ¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¿ç•™å­—FROMï¼Œæ— è®ºå†™æˆFROMã€Fromæˆ–è€…FrOméƒ½æ˜¯æ­£ç¡®çš„ã€‚ å…³ç³»åã€å±æ€§åå’Œåˆ«åéƒ½åŒæ ·æ˜¯å¤§å°å†™æ— å…³çš„ã€‚ åªæœ‰å¼•å·é‡Œé¢çš„å­—ç¬¦æ‰æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚   è¯­æ³•    è¿›å…¥mysql(dosçª—å£ä¸­) 12345mysql -h localhost -u root -p password&#x2F;&#x2F;-h"><meta name="keywords" content="SQL"><meta name="author" content="komorebi"><meta name="copyright" content="komorebi"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://feeblebird.github.io/2020/09/19/SQLStudy/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="SQLStudy"><meta property="og:url" content="http://feeblebird.github.io/2020/09/19/SQLStudy/"><meta property="og:site_name" content="Komorebi"><meta property="og:description" content="[toc]  SQLä¸åŒºåˆ†å¤§å°å†™  sqlæ˜¯å¤§å°å†™æ— å…³çš„ï¼Œä»–æŠŠå¤§å†™å’Œå°å†™å­—æ¯çœ‹ä½œç›¸åŒçš„å­—æ¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¿ç•™å­—FROMï¼Œæ— è®ºå†™æˆFROMã€Fromæˆ–è€…FrOméƒ½æ˜¯æ­£ç¡®çš„ã€‚ å…³ç³»åã€å±æ€§åå’Œåˆ«åéƒ½åŒæ ·æ˜¯å¤§å°å†™æ— å…³çš„ã€‚ åªæœ‰å¼•å·é‡Œé¢çš„å­—ç¬¦æ‰æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚   è¯­æ³•    è¿›å…¥mysql(dosçª—å£ä¸­) 12345mysql -h localhost -u root -p password&#x2F;&#x2F;-h"><meta property="og:image" content="https://i.loli.net/2020/08/07/GBcki6rT4lJ5sxE.jpg"><meta property="article:published_time" content="2020-09-19T11:09:02.000Z"><meta property="article:modified_time" content="2021-01-02T13:21:12.399Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: {"limitCount":50,"languages":{"author":"ä½œè€…: komorebi","link":"é“¾æ¥: ","source":"æ¥æº: Komorebi","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2021-01-02 21:21:12'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.0.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://i.loli.net/2020/08/02/WuXQnAJZ6twj5HU.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">39</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">38</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">19</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E4%B8%8D%E5%8C%BA%E5%88%86%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-number">1.</span> <span class="toc-text"> SQLä¸åŒºåˆ†å¤§å°å†™</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text"> è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5mysqldos%E7%AA%97%E5%8F%A3%E4%B8%AD"><span class="toc-number">2.0.0.1.</span> <span class="toc-text"> è¿›å…¥mysql(dosçª—å£ä¸­)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#help%E5%91%BD%E4%BB%A4"><span class="toc-number">2.0.0.2.</span> <span class="toc-text"> helpå‘½ä»¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86"><span class="toc-number">2.0.0.3.</span> <span class="toc-text"> æ•°æ®åº“ç®¡ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%9F%90%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.0.0.4.</span> <span class="toc-text"> ä½¿ç”¨æŸä¸€ä¸ªæ•°æ®åº“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%AE%A1%E7%90%86"><span class="toc-number">2.0.0.5.</span> <span class="toc-text"> æ•°æ®è¡¨ç®¡ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.0.0.6.</span> <span class="toc-text"> sqlæ•°æ®ç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.0.0.7.</span> <span class="toc-text"> çº¦æŸç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">2.0.0.8.</span> <span class="toc-text"> åˆ›å»ºæ•°æ®è¡¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unique%E7%BA%A6%E6%9D%9F%E5%92%8Cprimary-key%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.0.0.9.</span> <span class="toc-text"> uniqueçº¦æŸå’Œprimary keyçº¦æŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">2.0.0.10.</span> <span class="toc-text"> æ’å…¥æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%9C%80%E5%A5%BD%E5%9C%A8%E5%8A%A0%E5%85%A5%E6%95%B0%E6%8D%AE%E5%89%8D%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-number">2.0.0.11.</span> <span class="toc-text"> ä¿®æ”¹è¡¨(æœ€å¥½åœ¨åŠ å…¥æ•°æ®å‰ä¿®æ”¹è¡¨)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">2.0.0.12.</span> <span class="toc-text"> åˆ é™¤è¡¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8"><span class="toc-number">2.0.0.13.</span> <span class="toc-text"> å¤åˆ¶è¡¨</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#select-from-where-%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.</span> <span class="toc-text"> select from where è¯­å¥</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#as-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">4.</span> <span class="toc-text"> AS å…³é”®å­—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E5%85%B3%E7%B3%BB%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">4.0.0.1.</span> <span class="toc-text"> ç»™å…³ç³»èµ·åˆ«å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E5%B1%9E%E6%80%A7%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">4.0.0.2.</span> <span class="toc-text"> ç»™å±æ€§èµ·åˆ«å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E5%8F%AF%E4%BB%A5%E8%A2%AB%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%9B%BF%E4%BB%A3"><span class="toc-number">4.0.0.3.</span> <span class="toc-text"> å±æ€§å¯ä»¥è¢«è¡¨è¾¾å¼æ›¿ä»£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86%E5%B8%B8%E9%87%8F%E4%BD%9C%E4%B8%BA%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%9C%A8select%E8%AF%AD%E5%8F%A5%E4%B8%AD%E5%88%97%E5%87%BA"><span class="toc-number">4.0.0.4.</span> <span class="toc-text"> å°†å¸¸é‡ä½œä¸ºè¡¨è¾¾å¼åœ¨SELECTè¯­å¥ä¸­åˆ—å‡º</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#where%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.</span> <span class="toc-text"> whereè¯­å¥ä¸­çš„è¿ç®—ç¬¦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.0.0.1.</span> <span class="toc-text"> ç®—æœ¯è¿ç®—ç¬¦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E7%AC%A6"><span class="toc-number">5.0.0.2.</span> <span class="toc-text"> å­—ç¬¦ä¸²è¿æ¥ç¬¦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.0.0.3.</span> <span class="toc-text"> æ¯”è¾ƒè¿ç®—ç¬¦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.0.0.4.</span> <span class="toc-text"> é€»è¾‘è¿ç®—ç¬¦</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%95%E5%BC%95%E5%8F%B7%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8D%95%E5%BC%95%E5%8F%B7"><span class="toc-number">6.</span> <span class="toc-text"> å•å¼•å·ä¸­ä½¿ç”¨å•å¼•å·</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">7.</span> <span class="toc-text"> NULL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="toc-number">8.</span> <span class="toc-text"> å­—ç¬¦ä¸²æ¯”è¾ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E8%BF%99%E9%87%8C%E8%BF%9B%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83%E7%9A%84%E6%97%B6%E5%80%99%E4%BC%9A%E5%BF%BD%E7%95%A5sql%E4%B8%BA%E4%BA%86%E4%BF%9D%E8%AF%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E8%80%8C%E5%A1%AB%E5%85%85%E7%9A%84%E5%A1%AB%E5%85%85%E5%AD%97%E7%AC%A6%E8%80%8Csql%E4%B8%B2%E7%9A%84%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E4%B8%AD%E4%B8%8D%E4%BC%9A%E5%BF%BD%E7%95%A5"><span class="toc-number">8.0.0.1.</span> <span class="toc-text"> æ³¨æ„è¿™é‡Œè¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒçš„æ—¶å€™ä¼šå¿½ç•¥SQLä¸ºäº†ä¿è¯å­—ç¬¦ä¸²é•¿åº¦è€Œå¡«å……çš„å¡«å……å­—ç¬¦ï¼Œè€ŒSQLä¸²çš„æ¨¡å¼åŒ¹é…ä¸­ä¸ä¼šå¿½ç•¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8sql%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E4%B8%AD%E4%BD%BF%E7%94%A8trim%E5%87%BD%E6%95%B0%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%A4%E7%AB%AF%E7%9A%84%E7%A9%BA%E6%A0%BC"><span class="toc-number">8.0.0.2.</span> <span class="toc-text"> åœ¨SQLæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨trimå‡½æ•°å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="toc-number">9.</span> <span class="toc-text"> å­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="toc-number">9.0.0.1.</span> <span class="toc-text"> æ¨¡å¼åŒ¹é…ä¸­çš„ç‰¹æ®Šå­—ç¬¦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%92%8C_%E4%BD%BF%E7%94%A8%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="toc-number">9.0.0.2.</span> <span class="toc-text"> æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨%å’Œ_ï¼Œä½¿ç”¨è½¬ä¹‰å­—ç¬¦</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%8E%92%E5%BA%8F"><span class="toc-number">10.</span> <span class="toc-text"> è¾“å‡ºæ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#asc-desc%E6%8C%87%E5%AE%9A%E6%98%AF%E5%8D%87%E5%BA%8F%E8%BF%98%E6%98%AF%E9%99%8D%E5%BA%8F"><span class="toc-number">10.0.0.1.</span> <span class="toc-text"> ASC DESCæŒ‡å®šæ˜¯å‡åºè¿˜æ˜¯é™åº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#order%E8%AF%AD%E5%8F%A5%E5%90%8E%E9%9D%A2%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">10.0.0.2.</span> <span class="toc-text"> ORDERè¯­å¥åé¢ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%A4%9A%E5%85%B3%E7%B3%BB%E6%9F%A5%E8%AF%A2"><span class="toc-number">11.</span> <span class="toc-text"> å¤šè¡¨æŸ¥è¯¢ï¼Œå¤šå…³ç³»æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E5%8F%98%E9%87%8F"><span class="toc-number">12.</span> <span class="toc-text"> å…ƒç»„å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E4%BF%97%E6%9D%A5%E8%AE%B2%E5%B0%B1%E6%98%AF%E7%BB%99%E5%85%B3%E7%B3%BB%E8%B5%B7%E4%B8%AA%E5%88%AB%E5%90%8D"><span class="toc-number">12.0.0.1.</span> <span class="toc-text"> é€šä¿—æ¥è®²å°±æ˜¯ç»™å…³ç³»èµ·ä¸ªåˆ«å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E4%B8%80%E4%B8%AAselect-from-where%E8%AF%AD%E5%8F%A5%E4%B8%AD%E8%A6%81%E5%B0%86%E5%90%8C%E4%B8%80%E4%B8%AA%E5%85%B3%E7%B3%BB%E4%B8%AD%E7%9A%84%E4%B8%8D%E5%90%8C%E5%85%83%E7%BB%84%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E7%9A%84%E6%97%B6%E5%80%99"><span class="toc-number">12.0.0.2.</span> <span class="toc-text"> åœ¨ä¸€ä¸ªselect-from-whereè¯­å¥ä¸­ï¼Œè¦å°†åŒä¸€ä¸ªå…³ç³»ä¸­çš„ä¸åŒå…ƒç»„è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%9A%84%E7%BB%93%E6%9E%9C%E6%98%AF%E4%B8%80%E4%B8%AAbag%E5%8D%B3%E6%B2%A1%E6%9C%89%E4%B8%8D%E9%87%8D%E5%A4%8D%E6%80%A7"><span class="toc-number">13.</span> <span class="toc-text"> æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€ä¸ªBagï¼Œå³æ²¡æœ‰ä¸é‡å¤æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%86%E6%98%AF%E5%BD%93%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%B9%B6-%E4%BA%A4-%E5%B7%AE%E7%9A%84%E6%97%B6%E5%80%99%E4%BC%9A%E5%85%88%E5%8E%BB%E9%87%8D%E8%BD%AC%E6%8D%A2%E6%88%90%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88%E5%9B%A0%E4%B8%BA%E8%BF%99%E6%A0%B7%E6%95%88%E7%8E%87%E9%AB%98"><span class="toc-number">13.0.0.1.</span> <span class="toc-text"> ä½†æ˜¯å½“è¿›è¡ŒæŸ¥è¯¢çš„å¹¶ã€äº¤ã€å·®çš„æ—¶å€™ä¼šå…ˆå»é‡ï¼Œè½¬æ¢æˆä¸€ä¸ªé›†åˆï¼Œå› ä¸ºè¿™æ ·æ•ˆç‡é«˜ã€‚</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#controlling-duplicate-elimination%E6%8E%A7%E5%88%B6%E9%87%8D%E5%A4%8D%E6%B6%88%E9%99%A4"><span class="toc-number">14.</span> <span class="toc-text"> Controlling Duplicate Eliminationæ§åˆ¶é‡å¤æ¶ˆé™¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E5%8E%BB%E9%87%8D"><span class="toc-number">14.0.0.1.</span> <span class="toc-text"> å¼ºåˆ¶å»é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E5%B0%86%E9%9B%86%E5%90%88%E8%BD%AC%E6%8D%A2%E4%B8%BAbag%E5%9C%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E4%B8%AD%E4%BD%BF%E7%94%A8all%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">14.0.0.2.</span> <span class="toc-text"> å¼ºåˆ¶å°†é›†åˆè½¬æ¢ä¸ºBag(åœ¨å­æŸ¥è¯¢å…³ç³»è¿ç®—ä¸­ä½¿ç”¨ALLå…³é”®å­—)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%B9%B6-%E4%BA%A4-%E5%B7%AE"><span class="toc-number">15.</span> <span class="toc-text"> æŸ¥è¯¢çš„å¹¶ã€äº¤ã€å·®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#intersect-%E4%BA%A4"><span class="toc-number">15.0.0.1.</span> <span class="toc-text"> intersect äº¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#union-%E5%B9%B6"><span class="toc-number">15.0.0.2.</span> <span class="toc-text"> union å¹¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#except-%E5%B7%AE"><span class="toc-number">15.0.0.3.</span> <span class="toc-text"> except å·®</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2subquery%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">16.</span> <span class="toc-text"> ä½¿ç”¨å­æŸ¥è¯¢(subquery)çš„æƒ…å†µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BA%E7%8E%B0%E5%9C%A8from%E4%B8%AD"><span class="toc-number">16.0.0.1.</span> <span class="toc-text"> å‡ºç°åœ¨fromä¸­</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BA%E7%8E%B0%E5%9C%A8where%E4%B8%AD"><span class="toc-number">16.0.0.2.</span> <span class="toc-text"> å‡ºç°åœ¨whereä¸­</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E7%9A%84%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%80%BC%E4%B8%8E%E5%85%B3%E7%B3%BB%E4%B9%8B%E9%97%B4"><span class="toc-number">17.</span> <span class="toc-text"> å…³ç³»çš„æ¡ä»¶è¡¨è¾¾å¼(å€¼ä¸å…³ç³»ä¹‹é—´)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#exists"><span class="toc-number">17.0.0.1.</span> <span class="toc-text"> EXISTS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#in"><span class="toc-number">17.0.0.2.</span> <span class="toc-text"> IN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#any"><span class="toc-number">17.0.0.3.</span> <span class="toc-text"> ANY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#all"><span class="toc-number">17.0.0.4.</span> <span class="toc-text"> ALL</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E7%9A%84%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%83%E7%BB%84%E4%B8%8E%E5%85%B3%E7%B3%BB%E4%B9%8B%E9%97%B4"><span class="toc-number">18.</span> <span class="toc-text"> å…ƒç»„çš„æ¡ä»¶è¡¨è¾¾å¼(å…ƒç»„ä¸å…³ç³»ä¹‹é—´)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E5%85%83%E7%BB%84%E4%B8%8E%E8%AF%A5%E5%85%B3%E7%B3%BB%E7%9A%84%E5%85%83%E7%BB%84%E4%B9%8B%E9%97%B4%E6%9C%89%E7%9B%B8%E5%90%8C%E7%9A%84%E7%BB%84%E6%88%90%E5%88%86%E9%87%8Fcomponent%E4%B8%AA%E6%95%B0%E9%82%A3%E4%B9%88%E8%BF%99%E4%B8%AA%E6%AF%94%E8%BE%83%E6%98%AF%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84"><span class="toc-number">18.0.0.1.</span> <span class="toc-text"> å¦‚æœå…ƒç»„ä¸è¯¥å…³ç³»çš„å…ƒç»„ä¹‹é—´æœ‰ç›¸åŒçš„ç»„æˆåˆ†é‡(component)ä¸ªæ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¯”è¾ƒæ˜¯æœ‰æ„ä¹‰çš„</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2correlated-subquery"><span class="toc-number">19.</span> <span class="toc-text"> å…³è”å­æŸ¥è¯¢ï¼Œç›¸å…³å­æŸ¥è¯¢(correlated subquery)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%BF%87%E7%A8%8B%E4%B8%AD%E8%A6%81%E7%94%A8%E5%88%B0%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%A4%96%E9%83%A8%E5%85%B3%E7%B3%BB%E7%9A%84%E5%85%83%E7%BB%84"><span class="toc-number">19.0.0.1.</span> <span class="toc-text"> åœ¨å­æŸ¥è¯¢è¿‡ç¨‹ä¸­è¦ç”¨åˆ°å­æŸ¥è¯¢å¤–éƒ¨å…³ç³»çš„å…ƒç»„</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E8%BF%9E%E6%8E%A5%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">20.</span> <span class="toc-text"> SQLè¿æ¥è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cross-join-%E7%AC%9B%E5%8D%A1%E5%B0%94%E4%B9%98%E7%A7%AF"><span class="toc-number">21.</span> <span class="toc-text"> cross join ç¬›å¡å°”ä¹˜ç§¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5natural-join"><span class="toc-number">22.</span> <span class="toc-text"> è‡ªç„¶è¿æ¥Natural Join</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#theta-join"><span class="toc-number">23.</span> <span class="toc-text"> Theta Join</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#xxx-outer-joins"><span class="toc-number">24.</span> <span class="toc-text"> XXX Outer joins</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#natural-left-outer-join"><span class="toc-number">24.0.0.1.</span> <span class="toc-text"> natural left outer join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#natural-right-outer-join"><span class="toc-number">24.0.0.2.</span> <span class="toc-text"> natural right outer join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#natural-full-outer-join"><span class="toc-number">24.0.0.3.</span> <span class="toc-text"> natural full outer join</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%99%E5%85%B3%E7%B3%BB%E8%B5%B7%E5%88%AB%E5%90%8D%E5%90%8E%E4%B8%8D%E8%83%BD%E5%86%8Dfrom%E8%BF%99%E4%B8%AA%E5%88%AB%E5%90%8D"><span class="toc-number">25.</span> <span class="toc-text"> ç»™å…³ç³»èµ·åˆ«ååä¸èƒ½å†fromè¿™ä¸ªåˆ«å</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98"><span class="toc-number">26.</span> <span class="toc-text"> ä¾‹é¢˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%A0%E9%A2%98"><span class="toc-number">27.</span> <span class="toc-text"> ä¹ é¢˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#homework1"><span class="toc-number">28.</span> <span class="toc-text"> homework1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E4%BF%AE%E6%94%B9%E8%A1%A8%E4%B8%AD%E5%85%83%E7%BB%84%E4%B8%AD%E5%85%83%E7%B4%A0"><span class="toc-number">29.</span> <span class="toc-text"> SQLä¿®æ”¹è¡¨ä¸­å…ƒç»„ä¸­å…ƒç´ </span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E5%88%A0%E9%99%A4%E8%A1%A8%E4%B8%AD%E5%85%83%E7%BB%84"><span class="toc-number">30.</span> <span class="toc-text"> SQLåˆ é™¤è¡¨ä¸­å…ƒç»„</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%B0%86%E5%A4%9A%E4%B8%AA%E5%80%BC%E8%81%9A%E5%90%88%E6%88%90%E4%B8%80%E4%B8%AA%E5%80%BC"><span class="toc-number">31.</span> <span class="toc-text"> èšåˆå‡½æ•°ï¼ˆå°†å¤šä¸ªå€¼èšåˆæˆä¸€ä¸ªå€¼ï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8B%A5%E4%BD%BF%E7%94%A8%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0select%E4%B8%AD-%E5%85%B6%E4%BB%96%E5%B1%9E%E6%80%A7%E8%A6%81%E4%B9%88%E4%BD%BF%E7%94%A8%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E8%A6%81%E4%B9%88%E4%BD%BF%E7%94%A8group-by"><span class="toc-number">32.</span> <span class="toc-text"> è‹¥ä½¿ç”¨èšåˆå‡½æ•°ï¼Œselectä¸­ å…¶ä»–å±æ€§è¦ä¹ˆä½¿ç”¨èšåˆå‡½æ•°ï¼Œè¦ä¹ˆä½¿ç”¨group by</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#group-by%E5%88%86%E7%BB%84"><span class="toc-number">33.</span> <span class="toc-text"> GROUP BYåˆ†ç»„</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#having-%E5%8F%AA%E8%83%BD%E5%AF%B9%E5%88%86%E7%BB%84%E6%95%B4%E4%BD%93%E8%BF%9B%E8%A1%8C%E9%99%90%E5%88%B6"><span class="toc-number">34.</span> <span class="toc-text"> having åªèƒ½å¯¹åˆ†ç»„æ•´ä½“è¿›è¡Œé™åˆ¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E4%B8%8D%E8%83%BD%E5%87%BA%E7%8E%B0%E5%9C%A8where%E8%AF%AD%E5%8F%A5%E4%B8%AD"><span class="toc-number">35.</span> <span class="toc-text"> èšåˆå‡½æ•°ä¸èƒ½å‡ºç°åœ¨whereè¯­å¥ä¸­</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%92%8C%E5%88%86%E7%BB%84%E4%B8%AD%E7%9A%84null%E5%80%BC"><span class="toc-number">36.</span> <span class="toc-text"> èšåˆå‡½æ•°å’Œåˆ†ç»„ä¸­çš„NULLå€¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">37.</span> <span class="toc-text"> å±æ€§çš„é»˜è®¤å€¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E6%9B%B4%E6%96%B0"><span class="toc-number">38.</span> <span class="toc-text"> è¡¨çš„æ›´æ–°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#views%E8%A7%86%E5%9B%BE%E5%92%8Cindexes%E7%B4%A2%E5%BC%95"><span class="toc-number">39.</span> <span class="toc-text"> (views)è§†å›¾å’Œ(indexes)ç´¢å¼•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql-tuning-advisorsta"><span class="toc-number">40.</span> <span class="toc-text"> SQL Tuning Advisor(STA)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">41.</span> <span class="toc-text"> ç´¢å¼•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8Bentity-relation-model"><span class="toc-number">42.</span> <span class="toc-text"> å®ä½“å…³ç³»æ¨¡å‹(Entity-Relation Model)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E9%9B%86entity"><span class="toc-number">43.</span> <span class="toc-text"> å®ä½“é›†Entity</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%94%E7%B3%BBrelationship%E4%BA%8C%E5%85%83"><span class="toc-number">44.</span> <span class="toc-text"> è”ç³»relationship(äºŒå…ƒ)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%94%E7%B3%BB%E9%9B%86relationship-set"><span class="toc-number">45.</span> <span class="toc-text"> è”ç³»é›†(relationship set)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E5%85%83%E8%81%94%E7%B3%BB%E5%A4%9A%E8%B7%AF%E8%81%94%E7%B3%BBmultiway-relationshiops"><span class="toc-number">46.</span> <span class="toc-text"> å¤šå…ƒè”ç³»(å¤šè·¯è”ç³»)(Multiway relationshiops)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E8%81%94%E7%B3%BBmany-many-relationships"><span class="toc-number">47.</span> <span class="toc-text"> å¤šå¯¹å¤šè”ç³»(many-many relationships)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E4%B8%80%E8%81%94%E7%B3%BBmany-one-relationships"><span class="toc-number">48.</span> <span class="toc-text"> å¤šå¯¹ä¸€è”ç³»(many-one relationships)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E8%81%94%E7%B3%BBone-one-relationships"><span class="toc-number">49.</span> <span class="toc-text"> ä¸€å¯¹ä¸€è”ç³»(one-one relationships)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%94%E7%B3%BB%E7%9A%84%E5%A4%9A%E6%A0%B7%E6%80%A7mltiplicity"><span class="toc-number">50.</span> <span class="toc-text"> è”ç³»çš„å¤šæ ·æ€§(mltiplicity)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%94%E7%B3%BB%E4%B8%8A%E5%8F%AF%E8%83%BD%E6%9C%89%E5%B1%9E%E6%80%A7attribute-on-relationship"><span class="toc-number">51.</span> <span class="toc-text"> è”ç³»ä¸Šå¯èƒ½æœ‰å±æ€§(attribute on relationship)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rolestabels-of-one-way-relationships%E4%B8%80%E5%85%83%E8%81%94%E7%B3%BB"><span class="toc-number">52.</span> <span class="toc-text"> roles(tabels of one way relationshipsä¸€å…ƒè”ç³»)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%90%E7%B1%BBsub-classes"><span class="toc-number">53.</span> <span class="toc-text"> å­ç±»(sub classes)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#er%E5%9B%BE%E4%B8%AD%E7%9A%84%E4%B8%BB%E9%94%AEkeys"><span class="toc-number">54.</span> <span class="toc-text"> E&#x2F;Rå›¾ä¸­çš„ä¸»é”®(keys)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%A6%E7%9A%84%E7%BA%A6%E6%9D%9Fdegree-constaint"><span class="toc-number">55.</span> <span class="toc-text"> åº¦çš„çº¦æŸ(degree constaint)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%B1%E5%AE%9E%E4%BD%93%E9%9B%86weak-entity-set"><span class="toc-number">56.</span> <span class="toc-text"> å¼±å®ä½“é›†(weak entity set)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7"><span class="toc-number">57.</span> <span class="toc-text"> è®¾è®¡æŠ€å·§</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8Eer%E5%9B%BE%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%81%94%E7%B3%BB%E4%B8%8E%E5%AE%9E%E4%BD%93%E9%9B%86%E5%B1%9E%E6%80%A7%E7%9A%84%E5%90%88%E5%B9%B6"><span class="toc-number">58.</span> <span class="toc-text"> ä»E&#x2F;Rå›¾åˆ°æ•°æ®åº“(è”ç³»ä¸å®ä½“é›†å±æ€§çš„åˆå¹¶)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9Fconstraint"><span class="toc-number">59.</span> <span class="toc-text"> çº¦æŸ(constraint)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E5%A4%96%E9%94%AE%E7%9A%84%E5%80%BC%E8%A6%81%E5%8F%82%E7%85%A7%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E5%85%B3%E7%B3%BB%E4%B8%AD%E4%B8%BB%E9%94%AE%E6%88%96%E5%94%AF%E4%B8%80%E9%94%AE%E7%9A%84%E5%80%BC"><span class="toc-number">60.</span> <span class="toc-text"> å¤–é”®ï¼Œå¤–é”®çš„å€¼è¦å‚ç…§å¦å¤–ä¸€ä¸ªå…³ç³»ä¸­ä¸»é”®æˆ–å”¯ä¸€é”®çš„å€¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#check%E7%BA%A6%E6%9D%9F"><span class="toc-number">61.</span> <span class="toc-text"> checkçº¦æŸ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#modification-of-constraints"><span class="toc-number">62.</span> <span class="toc-text"> modification of Constraints</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#assertions%E6%96%AD%E8%A8%80"><span class="toc-number">63.</span> <span class="toc-text"> assertions(æ–­è¨€)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#triggers%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">64.</span> <span class="toc-text"> triggers(è§¦å‘å™¨)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#authorization%E6%9D%83%E9%99%90"><span class="toc-number">65.</span> <span class="toc-text"> authorization(æƒé™)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1transaction"><span class="toc-number">66.</span> <span class="toc-text"> äº‹åŠ¡(transaction)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%BB%93%E6%9D%9F%E6%A0%87%E5%BF%97commit"><span class="toc-number">67.</span> <span class="toc-text"> äº‹åŠ¡ç»“æŸæ ‡å¿—commit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%97%AE%E9%A2%98%E8%84%8F%E8%AF%BB-%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB-%E5%B9%BB%E5%BD%B1%E8%AF%BB"><span class="toc-number">68.</span> <span class="toc-text"> äº‹åŠ¡çš„é—®é¢˜:è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»å½±è¯»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E5%92%8C%E9%94%81"><span class="toc-number">69.</span> <span class="toc-text"> äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œé”ğŸ”’</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9E%E6%BB%9A%E6%9C%BA%E5%88%B6rollback"><span class="toc-number">70.</span> <span class="toc-text"> å›æ»šæœºåˆ¶rollback</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0sets%E5%8D%B3%E7%BB%93%E6%9E%9C%E4%B8%BA%E9%9B%86%E5%90%88"><span class="toc-number">71.</span> <span class="toc-text"> å…³ç³»ä»£æ•°(sets,å³ç»“æœä¸ºé›†åˆ)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8bags%E4%B8%8A%E7%9A%84%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97"><span class="toc-number">72.</span> <span class="toc-text"> åœ¨bagsä¸Šçš„å…³ç³»è¿ç®—</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">73.</span> <span class="toc-text"> å‡½æ•°ä¾èµ–</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#anomalies%E5%BC%82%E5%B8%B8%E6%83%85%E5%86%B5"><span class="toc-number">74.</span> <span class="toc-text"> Anomalies(å¼‚å¸¸æƒ…å†µ)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lossless-join%E6%97%A0%E6%8D%9F%E8%BF%9E%E6%8E%A5"><span class="toc-number">75.</span> <span class="toc-text"> Lossless join(æ— æŸè¿æ¥)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%81%E6%98%8E%E6%97%A0%E6%8D%9F%E8%BF%9E%E6%8E%A5"><span class="toc-number">76.</span> <span class="toc-text"> è¯æ˜æ— æŸè¿æ¥</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E8%A7%A3%E5%AE%8C%E4%B9%8B%E5%90%8E%E7%9A%84%E8%A1%A8%E5%9C%A8natural-join%E5%90%8E%E5%8F%AF%E8%83%BD%E4%B8%A2%E5%A4%B1%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">77.</span> <span class="toc-text"> åˆ†è§£å®Œä¹‹åçš„è¡¨åœ¨natural joinåå¯èƒ½ä¸¢å¤±å‡½æ•°ä¾èµ–</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F-3nf"><span class="toc-number">78.</span> <span class="toc-text"> å¼•å…¥ç¬¬ä¸‰èŒƒå¼ 3NF</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E8%A7%A3%E6%97%B6%E8%A6%81%E6%B1%82%E6%97%A0%E6%8D%9F%E5%92%8C%E4%B8%8D%E4%B8%A2%E5%A4%B1%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">79.</span> <span class="toc-text"> åˆ†è§£æ—¶è¦æ±‚æ— æŸå’Œä¸ä¸¢å¤±å‡½æ•°ä¾èµ–</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%BD%E9%80%90%E6%B5%8B%E8%AF%95chase-test"><span class="toc-number">80.</span> <span class="toc-text"> è¿½é€æµ‹è¯•(chase test)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F%E7%9A%84%E5%88%86%E8%A7%A3%E7%AE%97%E6%B3%95"><span class="toc-number">81.</span> <span class="toc-text"> ç¬¬ä¸‰èŒƒå¼çš„åˆ†è§£ç®—æ³•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96"><span class="toc-number">82.</span> <span class="toc-text"> æŸ¥è¯¢ä¼˜åŒ–</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/08/07/GBcki6rT4lJ5sxE.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Komorebi</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">SQLStudy</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-09-19T11:09:02.000Z" title="å‘è¡¨äº 2020-09-19 19:09:02">2020-09-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-01-02T13:21:12.399Z" title="æ›´æ–°äº 2021-01-02 21:21:12">2021-01-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SQL/">SQL</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">15.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>57åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>[toc]</p>
<h1 id="sqlä¸åŒºåˆ†å¤§å°å†™"><a class="markdownIt-Anchor" href="#sqlä¸åŒºåˆ†å¤§å°å†™"></a> SQLä¸åŒºåˆ†å¤§å°å†™</h1>
<blockquote>
<p>sqlæ˜¯å¤§å°å†™æ— å…³çš„ï¼Œä»–æŠŠå¤§å†™å’Œå°å†™å­—æ¯çœ‹ä½œç›¸åŒçš„å­—æ¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¿ç•™å­—FROMï¼Œæ— è®ºå†™æˆFROMã€Fromæˆ–è€…FrOméƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>å…³ç³»åã€å±æ€§åå’Œåˆ«åéƒ½åŒæ ·æ˜¯å¤§å°å†™æ— å…³çš„ã€‚</p>
<p>åªæœ‰å¼•å·é‡Œé¢çš„å­—ç¬¦æ‰æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚</p>
</blockquote>
<h1 id="è¯­æ³•"><a class="markdownIt-Anchor" href="#è¯­æ³•"></a> è¯­æ³•</h1>
<ul>
<li>
<h4 id="è¿›å…¥mysqldosçª—å£ä¸­"><a class="markdownIt-Anchor" href="#è¿›å…¥mysqldosçª—å£ä¸­"></a> è¿›å…¥mysql(dosçª—å£ä¸­)</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql -h localhost -u root -p password</span><br><span class="line">//-h ä¸ºipåœ°å€,æœ¬æœºä¸ºlocalhostæˆ–è€…127.0.0.1</span><br><span class="line">//-u ä¸ºuserç”¨æˆ·å</span><br><span class="line">//-p å°å†™ï¼Œåé¢ä¸ºå¯†ç  æˆ–è€… ä¸è¾“å…¥ï¼Œå› ä¸ºä¸åšéšè—çš„</span><br><span class="line">//-P ä¸ºPortç«¯å£å·</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="helpå‘½ä»¤"><a class="markdownIt-Anchor" href="#helpå‘½ä»¤"></a> helpå‘½ä»¤</h4>
<p>ä½¿ç”¨helpæŸ¥çœ‹ä¸€äº›å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤åœ¨ä½¿ç”¨çš„æ—¶å€™éƒ½ä¸ç”¨åŠ åˆ†å·ã€‚</p>
</li>
<li>
<h4 id="æ•°æ®åº“ç®¡ç†"><a class="markdownIt-Anchor" href="#æ•°æ®åº“ç®¡ç†"></a> æ•°æ®åº“ç®¡ç†</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> dbname;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> dbname;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="ä½¿ç”¨æŸä¸€ä¸ªæ•°æ®åº“"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æŸä¸€ä¸ªæ•°æ®åº“"></a> ä½¿ç”¨æŸä¸€ä¸ªæ•°æ®åº“</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="keyword">database</span> dbname;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="æ•°æ®è¡¨ç®¡ç†"><a class="markdownIt-Anchor" href="#æ•°æ®è¡¨ç®¡ç†"></a> æ•°æ®è¡¨ç®¡ç†</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbname;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tbname;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="sqlæ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#sqlæ•°æ®ç±»å‹"></a> sqlæ•°æ®ç±»å‹</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">tinyint         1byte</span><br><span class="line">smallint		2byte</span><br><span class="line">mediumint		3byte</span><br><span class="line">int/integer		4byte</span><br><span class="line">bigint			8byte</span><br><span class="line">float			4byte</span><br><span class="line">double			8byte</span><br><span class="line">decimal			</span><br><span class="line"><span class="comment">-----------------------------</span></span><br><span class="line">date		3byte 1000-01-01/9999-12-31</span><br><span class="line">time 		3byte -839:59:59/839:59:59</span><br><span class="line">year		1byte 1901/2155</span><br><span class="line">datetime 	8byte 1000-01-01 00:00:00/9999-12-31 23:59:59</span><br><span class="line">timestamp	4byte 0/2147483647(æ—¶é—´æˆ³)</span><br><span class="line">//ä»¥å­—ç¬¦ä¸²çš„å½¢å¼&#x27;2020-01-01 15:30:02.5&#x27;</span><br><span class="line"><span class="comment">-----------------------------</span></span><br><span class="line">char		å®šé•¿å­—ç¬¦ 					0-255byte</span><br><span class="line">varchar		å˜é•¿å­—ç¬¦ 					0-65535byte</span><br><span class="line">tinyblob	äºŒè¿›åˆ¶å­—ç¬¦ä¸² 				   0-255byte</span><br><span class="line">tinytext	çŸ­æ–‡æœ¬å­—ç¬¦ä¸²				   0-255byte</span><br><span class="line">blob		äºŒè¿›åˆ¶å½¢å¼é•¿æ–‡æœ¬æ•°æ® 			0-65535byte</span><br><span class="line">text		é•¿æ–‡æœ¬æ•°æ® 					0-65535byte</span><br><span class="line">mediumblob	äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®	  0-16777215byte</span><br><span class="line">mediumtext	ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®			  0-16777215byte</span><br><span class="line">longblob	äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ®	   0-4294967295byte</span><br><span class="line">longtext	æå¤§æ–‡æœ¬æ•°æ®				   0-4294967295byte</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="çº¦æŸç±»å‹"><a class="markdownIt-Anchor" href="#çº¦æŸç±»å‹"></a> çº¦æŸç±»å‹</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">not null ç”¨äºé™åˆ¶è¯¥å­—æ®µä¸ºå¿…å¡«é¡¹</span><br><span class="line">default ç”¨äºé™åˆ¶è¯¥å­—æ®µæ²¡æœ‰æ˜¾å¼æ’å…¥å€¼ï¼Œåˆ™ç›´æ¥æ˜¾ç¤ºé»˜è®¤å€¼</span><br><span class="line">primary key  ç”¨äºé™åˆ¶è¯¥å­—æ®µå€¼ä¸èƒ½é‡å¤ï¼Œè®¾ç½®ä¸ºä¸»é”®åˆ—çš„å­—æ®µé»˜è®¤ä¸èƒ½ä¸ºç©ºï¼Œå¯ä»¥è”åˆä¸»é”®ï¼Œä½†ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®</span><br><span class="line">unique ç”¨äºé™åˆ¶è¯¥å­—æ®µä¸èƒ½é‡å¤ï¼Œå­—æ®µå¯ä»¥ä¸ºç©ºï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªunique</span><br><span class="line"><span class="keyword">check</span>  ç”¨äºé™åˆ¶è¯¥å­—æ®µå€¼å¿…é¡»æ»¡è¶³æŒ‡å®šæ¡ä»¶</span><br><span class="line">       <span class="keyword">check</span>(age <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">100</span>)</span><br><span class="line"><span class="keyword">foreign</span> <span class="keyword">key</span> å¤–é”®ï¼šç”¨äºé™åˆ¶ä¸¤ä¸ªè¡¨çš„å…³ç³»ï¼Œè¦æ±‚å¤–é”®åˆ—çš„å€¼å¿…é¡»æ¥è‡ªä¸»è¡¨çš„å…³è”åˆ—</span><br><span class="line">		è¦æ±‚ï¼š</span><br><span class="line">		â‘ ä¸»è¡¨çš„å…³è”åˆ—å’Œä»è¡¨çš„å…³è”åˆ—çš„ç±»å‹å¿…é¡»ä¸€è‡´ï¼Œæ„æ€ä¸€æ ·ï¼Œåç§°æ— è¦æ±‚</span><br><span class="line">		â‘¡ä¸»è¡¨çš„å…³è”åˆ—è¦æ±‚å¿…é¡»æ˜¯ä¸»é”®</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="åˆ›å»ºæ•°æ®è¡¨"><a class="markdownIt-Anchor" href="#åˆ›å»ºæ•°æ®è¡¨"></a> åˆ›å»ºæ•°æ®è¡¨</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbname(</span><br><span class="line">	attribute1 <span class="built_in">varchar</span>(<span class="number">20</span>)/<span class="built_in">char</span>(<span class="number">20</span>),</span><br><span class="line">    attribute2 <span class="built_in">integer</span>/<span class="built_in">int</span>/<span class="built_in">smallint</span>,</span><br><span class="line">    attribute3 <span class="built_in">date</span>,</span><br><span class="line">    attribute4 <span class="built_in">time</span>,</span><br><span class="line">    attribute5 <span class="built_in">real</span>/<span class="built_in">float</span>,</span><br><span class="line">    attribute6 <span class="built_in">real</span>/<span class="built_in">float</span> <span class="keyword">default</span> <span class="number">0.1</span> //è®¾ç½®é»˜è®¤å€¼ä¸º<span class="number">0.1</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbname(</span><br><span class="line">	attribute1 <span class="built_in">varchar</span>(<span class="number">20</span>)/<span class="built_in">char</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    attribute2 <span class="built_in">integer</span> primary <span class="keyword">key</span>//ä¸»é”® é»˜è®¤ä¸èƒ½ä¸ºç©º</span><br><span class="line">    //attribute2 <span class="built_in">integer</span> <span class="keyword">unique</span> //é€æ¸ å¯ä»¥ä¸ºç©º</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbname(</span><br><span class="line">	attribute1 <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    attribute2 <span class="built_in">real</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    primary <span class="keyword">key</span>(attribute1,attribute2)//è”åˆä¸»é”® é»˜è®¤ä¸èƒ½ä¸ºç©º</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbname(</span><br><span class="line">	attribute1 <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    attribute2 <span class="built_in">float</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    <span class="keyword">unique</span>(attribute1,attribute2)//è”åˆä¸»é”® é»˜è®¤å¯ä»¥ä¸ºç©º</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="uniqueçº¦æŸå’Œprimary-keyçº¦æŸ"><a class="markdownIt-Anchor" href="#uniqueçº¦æŸå’Œprimary-keyçº¦æŸ"></a> uniqueçº¦æŸå’Œprimary keyçº¦æŸ</h4>
<ul>
<li>åœ¨ä¸€ä¸ªè¡¨ä¸­åªèƒ½æœ‰ä¸€ä¸ªprimary keyä½†æ˜¯å¯ä»¥å¤šä¸ªunique</li>
<li>primary key å’Œ unique çº¦æŸéƒ½èƒ½çº¦æŸæŸä¸ªå±æ€§å€¼ä¸èƒ½é‡å¤ï¼Œprimary key çº¦æŸçš„å±æ€§å€¼ä¸èƒ½ä¸ºç©ºï¼Œunique çº¦æŸçš„å±æ€§å¯ä»¥ä¸ºç©ºã€‚</li>
</ul>
</li>
<li>
<h4 id="æ’å…¥æ•°æ®"><a class="markdownIt-Anchor" href="#æ’å…¥æ•°æ®"></a> æ’å…¥æ•°æ®</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbname //è¿™é‡Œä¸èƒ½åŠ <span class="keyword">table</span>ï¼Œä¸ç„¶æ‰§è¡Œä¸äº†</span><br><span class="line">(attribute1,attribute2,attribute3...)</span><br><span class="line">valuses</span><br><span class="line">(value1,value2,value3...)</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="ä¿®æ”¹è¡¨æœ€å¥½åœ¨åŠ å…¥æ•°æ®å‰ä¿®æ”¹è¡¨"><a class="markdownIt-Anchor" href="#ä¿®æ”¹è¡¨æœ€å¥½åœ¨åŠ å…¥æ•°æ®å‰ä¿®æ”¹è¡¨"></a> ä¿®æ”¹è¡¨(æœ€å¥½åœ¨åŠ å…¥æ•°æ®å‰ä¿®æ”¹è¡¨)</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">add</span>|<span class="keyword">modify</span>|<span class="keyword">change</span>|<span class="keyword">drop</span> <span class="keyword">column</span> å­—æ®µå å­—ç¬¦ç±»å‹ å­—æ®µçº¦æŸ;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">rename</span> <span class="keyword">to</span> newtbname; <span class="comment">--æ”¹è¡¨å</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">column</span> bir datetime <span class="keyword">not</span> <span class="literal">null</span>; <span class="comment">--æ·»åŠ å±æ€§ï¼Œè¦å¸¦ä¸Šå±æ€§çš„æ•°æ®ç±»å‹</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">change</span> <span class="keyword">column</span> bir birthday datetime; <span class="comment">--ä¿®æ”¹å±æ€§åï¼Œç±»å‹å¿…é¡»è¦åŠ ï¼Œå¯ä»¥è®¤ä¸ºè¿™é‡Œçš„ä¿®æ”¹å°±æ˜¯åˆ é™¤åŸæ¥çš„å±æ€§è€Œæ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œçº¦æŸä¹Ÿå¯ä»¥æ”¹å˜ã€‚  </span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">modify</span> <span class="keyword">column</span> bir <span class="built_in">timestamp</span>; <span class="comment">--ä¿®æ”¹å±æ€§ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">modify</span> <span class="keyword">column</span> bir <span class="built_in">timestamp</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment">--å¯ä»¥ä¿®æ”¹å±æ€§ä»ç©ºå˜ä¸ºä¸ç©ºï¼Œæˆ–åä¹‹ï¼Œç›¸å½“äºé‡æ–°è®¾ç½®äº†ä¸€ä¸ªå±æ€§</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">column</span> bir; <span class="comment">--åˆ é™¤å±æ€§</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">drop</span> primary <span class="keyword">key</span>; <span class="comment">--åˆ é™¤ä¸»é”®</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">change</span> <span class="keyword">column</span> bir bir datetime <span class="keyword">unique</span>;<span class="comment">--æ·»åŠ çº¦æŸ</span></span><br><span class="line"><span class="keyword">change</span> <span class="keyword">column</span> bir bir datetime primary <span class="keyword">key</span>;<span class="comment">--å¦‚æœæ­¤æ—¶è¯¥å±æ€§çš„å€¼ä¸ºnot nullåˆ™å¯ä»¥ï¼Œå¦åˆ™åº”è¯¥å…ˆè®¾ç½®ä¸ºnot null,å› ä¸ºprimary keyé»˜è®¤not null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbname</span><br><span class="line"><span class="keyword">modify</span> <span class="keyword">column</span> bir bir datetime primary <span class="keyword">key</span>; <span class="comment">--è‹¥éç©ºåˆ™å¯ä»¥è®¾ç½®ç§°ä¸»é”®</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="åˆ é™¤è¡¨"><a class="markdownIt-Anchor" href="#åˆ é™¤è¡¨"></a> åˆ é™¤è¡¨</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> tbname;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="å¤åˆ¶è¡¨"><a class="markdownIt-Anchor" href="#å¤åˆ¶è¡¨"></a> å¤åˆ¶è¡¨</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> newtable <span class="keyword">like</span> oldtable;</span><br><span class="line">//åªæ˜¯èµ‹å€¼è¡¨ç»“æ„</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> newtable <span class="keyword">select</span> * <span class="keyword">from</span> oldtable;</span><br><span class="line">//å¤åˆ¶æœ¬åº“å¦ä¸€ä¸ªè¡¨çš„å†…å®¹</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> newtable <span class="keyword">select</span> * <span class="keyword">from</span> girls.<span class="string">&#x27;beauty&#x27;</span>;</span><br><span class="line">//å¤åˆ¶åˆ«çš„åº“é‡Œé¢çš„å†…å®¹ï¼Œgirlsåº“é‡Œé¢çš„beautyè¡¨</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> newtable <span class="keyword">select</span> last_name,department_id <span class="keyword">from</span> myemployee.<span class="string">&#x27;employees&#x27;</span> <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line">//åªå¤åˆ¶myemployeeåº“ä¸­çš„employeesè¡¨ä¸­çš„last_name,departmentå­—æ®µçš„ç»“æ„ï¼Œä¸åŒ…æ‹¬å…·ä½“æ•°æ®</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="select-from-where-è¯­å¥"><a class="markdownIt-Anchor" href="#select-from-where-è¯­å¥"></a> select from where è¯­å¥</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> drinkers</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">trim</span>(<span class="keyword">NAME</span>) <span class="keyword">LIKE</span> <span class="string">&#x27;% % %&#x27;</span>;</span><br><span class="line"><span class="comment">--å»æ‰å‰åçš„ç©ºæ ¼ï¼Œä¸­é—´çš„ç©ºæ ¼ä¸å»,é€‰å‡ºåå­—ç”±ä¸‰éƒ¨åˆ†ç»„æˆ</span></span><br></pre></td></tr></table></figure>
<h1 id="as-å…³é”®å­—"><a class="markdownIt-Anchor" href="#as-å…³é”®å­—"></a> AS å…³é”®å­—</h1>
<ul>
<li>
<h4 id="ç»™å…³ç³»èµ·åˆ«å"><a class="markdownIt-Anchor" href="#ç»™å…³ç³»èµ·åˆ«å"></a> ç»™å…³ç³»èµ·åˆ«å</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//ç»™å…³ç³»èµ·åˆ«åï¼Œå¯è®¤ä¸ºåŸæ¥æ˜¯åŸå as åŸå</span><br><span class="line"><span class="keyword">SELECT</span> bar,beer</span><br><span class="line"><span class="keyword">from</span> bars [<span class="keyword">as</span>] ba,beers [<span class="keyword">as</span>] be //<span class="keyword">as</span>å¯çœç•¥    </span><br><span class="line"><span class="keyword">where</span> ba....   be....;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="ç»™å±æ€§èµ·åˆ«å"><a class="markdownIt-Anchor" href="#ç»™å±æ€§èµ·åˆ«å"></a> ç»™å±æ€§èµ·åˆ«å</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//ç»™å±æ€§èµ·åˆ«å</span><br><span class="line"><span class="keyword">SELECT</span> bar,beer,price <span class="keyword">as</span> priceInYen</span><br><span class="line"><span class="keyword">from</span> sells;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="å±æ€§å¯ä»¥è¢«è¡¨è¾¾å¼æ›¿ä»£"><a class="markdownIt-Anchor" href="#å±æ€§å¯ä»¥è¢«è¡¨è¾¾å¼æ›¿ä»£"></a> å±æ€§å¯ä»¥è¢«è¡¨è¾¾å¼æ›¿ä»£</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//å±æ€§å¯ä»¥è¢«è¡¨è¾¾å¼æ›¿ä»£</span><br><span class="line"><span class="keyword">SELECT</span> bar,beer,price*<span class="number">14</span> <span class="keyword">as</span> priceInYen</span><br><span class="line"><span class="keyword">from</span> sells;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="å°†å¸¸é‡ä½œä¸ºè¡¨è¾¾å¼åœ¨selectè¯­å¥ä¸­åˆ—å‡º"><a class="markdownIt-Anchor" href="#å°†å¸¸é‡ä½œä¸ºè¡¨è¾¾å¼åœ¨selectè¯­å¥ä¸­åˆ—å‡º"></a> å°†å¸¸é‡ä½œä¸ºè¡¨è¾¾å¼åœ¨SELECTè¯­å¥ä¸­åˆ—å‡º</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> title,<span class="keyword">length</span>,<span class="string">&#x27;hrs.&#x27;</span> <span class="keyword">AS</span> inHours</span><br><span class="line"><span class="keyword">from</span> movies</span><br><span class="line"><span class="keyword">where</span> studioname = <span class="string">&#x27;Disney&#x27;</span> <span class="keyword">AND</span> <span class="keyword">year</span> = <span class="number">1990</span>;</span><br><span class="line"></span><br><span class="line">//åˆ™ç»“æœä¸­ä¼šå‡ºç°ä¸€åˆ—å±æ€§åä¸ºinHoursçš„åˆ—ï¼Œå€¼éƒ½ä¸º&#x27;hrs.&#x27;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯ä»¥ç†è§£ä¸ºæŸ¥è¯¢æ—¶ï¼Œæ¯æ¬¡éƒ½æ˜¯å°†å…³ç³»ä¸­çš„å…ƒç»„èµ‹å€¼ç»™select-from-whereè¯­å¥ä¸­çš„selectä¸­çš„å±æ€§ï¼Œç„¶ååˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œæ‰€ä»¥é‚£ä¸ªå¸¸é‡å°±ä¸€ç›´æ˜¯è¿™ä¸ªè€Œä¸”ä¿ç•™äº†ä¸‹æ¥ã€‚</p>
</blockquote>
</li>
</ul>
<h1 id="whereè¯­å¥ä¸­çš„è¿ç®—ç¬¦"><a class="markdownIt-Anchor" href="#whereè¯­å¥ä¸­çš„è¿ç®—ç¬¦"></a> whereè¯­å¥ä¸­çš„è¿ç®—ç¬¦</h1>
<ul>
<li>
<h4 id="ç®—æœ¯è¿ç®—ç¬¦"><a class="markdownIt-Anchor" href="#ç®—æœ¯è¿ç®—ç¬¦"></a> ç®—æœ¯è¿ç®—ç¬¦</h4>
<p>æœ‰+ - * /</p>
</li>
<li>
<h4 id="å­—ç¬¦ä¸²è¿æ¥ç¬¦"><a class="markdownIt-Anchor" href="#å­—ç¬¦ä¸²è¿æ¥ç¬¦"></a> å­—ç¬¦ä¸²è¿æ¥ç¬¦</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;foo&#x27;||&#x27;bar&#x27;ç›¸å½“äº&#x27;foobar&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a class="markdownIt-Anchor" href="#æ¯”è¾ƒè¿ç®—ç¬¦"></a> æ¯”è¾ƒè¿ç®—ç¬¦</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&lt;</span><br><span class="line">&gt;=</span><br><span class="line">&lt;=</span><br><span class="line">=</span><br><span class="line">&lt;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="é€»è¾‘è¿ç®—ç¬¦"><a class="markdownIt-Anchor" href="#é€»è¾‘è¿ç®—ç¬¦"></a> é€»è¾‘è¿ç®—ç¬¦</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AND</span><br><span class="line">OR</span><br><span class="line">NOT</span><br><span class="line">//å¯ä»¥å¯¹è¿”å›å€¼ä¸ºå¸ƒå°”å€¼çš„è¡¨è¾¾å¼è¿›è¡Œå–é</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="å•å¼•å·ä¸­ä½¿ç”¨å•å¼•å·"><a class="markdownIt-Anchor" href="#å•å¼•å·ä¸­ä½¿ç”¨å•å¼•å·"></a> å•å¼•å·ä¸­ä½¿ç”¨å•å¼•å·</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;i&#x27;&#x27;m liwei&#x27; =&gt; i&#x27;m liwei</span><br></pre></td></tr></table></figure>
<h1 id="null"><a class="markdownIt-Anchor" href="#null"></a> NULL</h1>
<ul>
<li>
<p>ä¸å…¶ä»–è¿›è¡Œè¿ç®—å€¼éƒ½æ˜¯NULL</p>
</li>
<li>
<p>ä¸å…¶ä»–å€¼æ¯”è¾ƒç»“æœä¸ºunknow</p>
</li>
<li>
<p>åˆ¤æ–­æ˜¯å¦ä¸ºç©º</p>
<p>where is now; / where is not null;</p>
</li>
</ul>
<h1 id="å­—ç¬¦ä¸²æ¯”è¾ƒ"><a class="markdownIt-Anchor" href="#å­—ç¬¦ä¸²æ¯”è¾ƒ"></a> å­—ç¬¦ä¸²æ¯”è¾ƒ</h1>
<ul>
<li>
<h4 id="æ³¨æ„è¿™é‡Œè¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒçš„æ—¶å€™ä¼šå¿½ç•¥sqlä¸ºäº†ä¿è¯å­—ç¬¦ä¸²é•¿åº¦è€Œå¡«å……çš„å¡«å……å­—ç¬¦è€Œsqlä¸²çš„æ¨¡å¼åŒ¹é…ä¸­ä¸ä¼šå¿½ç•¥"><a class="markdownIt-Anchor" href="#æ³¨æ„è¿™é‡Œè¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒçš„æ—¶å€™ä¼šå¿½ç•¥sqlä¸ºäº†ä¿è¯å­—ç¬¦ä¸²é•¿åº¦è€Œå¡«å……çš„å¡«å……å­—ç¬¦è€Œsqlä¸²çš„æ¨¡å¼åŒ¹é…ä¸­ä¸ä¼šå¿½ç•¥"></a> æ³¨æ„è¿™é‡Œè¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒçš„æ—¶å€™ä¼šå¿½ç•¥SQLä¸ºäº†ä¿è¯å­—ç¬¦ä¸²é•¿åº¦è€Œå¡«å……çš„å¡«å……å­—ç¬¦ï¼Œè€ŒSQLä¸²çš„æ¨¡å¼åŒ¹é…ä¸­ä¸ä¼šå¿½ç•¥</h4>
</li>
<li>
<h4 id="åœ¨sqlæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨trimå‡½æ•°å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼"><a class="markdownIt-Anchor" href="#åœ¨sqlæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨trimå‡½æ•°å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼"></a> åœ¨SQLæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨trimå‡½æ•°å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼</h4>
</li>
</ul>
<h1 id="å­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…"><a class="markdownIt-Anchor" href="#å­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…"></a> å­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">S LIKE P</span><br><span class="line">S NOT LIKE P</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>Sæ˜¯å­—ç¬¦ä¸²</p>
</li>
<li>
<p>Pæ˜¯æ¨¡å¼(pattern)</p>
</li>
<li>
<h4 id="æ¨¡å¼åŒ¹é…ä¸­çš„ç‰¹æ®Šå­—ç¬¦"><a class="markdownIt-Anchor" href="#æ¨¡å¼åŒ¹é…ä¸­çš„ç‰¹æ®Šå­—ç¬¦"></a> æ¨¡å¼åŒ¹é…ä¸­çš„ç‰¹æ®Šå­—ç¬¦</h4>
<ul>
<li>%ï¼Œèƒ½åŒ¹é…ä»»æ„é•¿åº¦çš„ä¸²</li>
<li>_ ï¼Œèƒ½åŒ¹é…sä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦</li>
</ul>
</li>
<li>
<h4 id="æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨å’Œ_ä½¿ç”¨è½¬ä¹‰å­—ç¬¦"><a class="markdownIt-Anchor" href="#æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨å’Œ_ä½¿ç”¨è½¬ä¹‰å­—ç¬¦"></a> æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨%å’Œ_ï¼Œä½¿ç”¨è½¬ä¹‰å­—ç¬¦</h4>
<blockquote>
<p>likeè¡¨è¾¾å¼ä¸­çš„è½¬ç§»å­—ç¬¦</p>
<p>likeè¡¨è¾¾å¼ä¸­æ²¡æœ‰å›ºå®šçš„è½¬ç§»å­—ç¬¦ï¼Œè€Œæ˜¯é€šè¿‡ escapeå…³é”®å­—æŒ‡å®šè½¬ä¹‰å­—ç¬¦ã€‚</p>
<p>æ¯”å¦‚ï¼šWHERE beer LIKE â€˜x%x%â€™ ESCAPE â€˜xâ€™;å°±æ˜¯æŒ‡å®šxä¸ºè½¬ä¹‰å­—ç¬¦ã€‚</p>
</blockquote>
</li>
</ul>
<h1 id="è¾“å‡ºæ’åº"><a class="markdownIt-Anchor" href="#è¾“å‡ºæ’åº"></a> è¾“å‡ºæ’åº</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ORDER BY &lt;list of attributes&gt;</span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> movies</span><br><span class="line"><span class="keyword">where</span> studioName = <span class="string">&#x27;Disney&#x27;</span> <span class="keyword">AND</span> <span class="keyword">year</span> = <span class="number">1990</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">length</span>,title <span class="keyword">ASC</span>;</span><br><span class="line">//ORDER BY length,title DESC;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<h4 id="asc-descæŒ‡å®šæ˜¯å‡åºè¿˜æ˜¯é™åº"><a class="markdownIt-Anchor" href="#asc-descæŒ‡å®šæ˜¯å‡åºè¿˜æ˜¯é™åº"></a> ASC DESCæŒ‡å®šæ˜¯å‡åºè¿˜æ˜¯é™åº</h4>
</li>
<li>
<h4 id="orderè¯­å¥åé¢ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼"><a class="markdownIt-Anchor" href="#orderè¯­å¥åé¢ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼"></a> ORDERè¯­å¥åé¢ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼</h4>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> R</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> A+B <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h1 id="å¤šè¡¨æŸ¥è¯¢å¤šå…³ç³»æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å¤šè¡¨æŸ¥è¯¢å¤šå…³ç³»æŸ¥è¯¢"></a> å¤šè¡¨æŸ¥è¯¢ï¼Œå¤šå…³ç³»æŸ¥è¯¢</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> l1.drinker</span><br><span class="line"><span class="keyword">FROM</span> likes l1,likes l2,likes l3</span><br><span class="line"><span class="keyword">WHERE</span> l1.drinker = l2.drinker <span class="keyword">AND</span> l1.drinker = l3.drinker</span><br><span class="line"><span class="keyword">AND</span> l1.beer &lt; l2.beer <span class="keyword">AND</span> l2.beer &lt; l3.beer;</span><br></pre></td></tr></table></figure>
<h1 id="å…ƒç»„å˜é‡"><a class="markdownIt-Anchor" href="#å…ƒç»„å˜é‡"></a> å…ƒç»„å˜é‡</h1>
<ul>
<li>
<h4 id="é€šä¿—æ¥è®²å°±æ˜¯ç»™å…³ç³»èµ·ä¸ªåˆ«å"><a class="markdownIt-Anchor" href="#é€šä¿—æ¥è®²å°±æ˜¯ç»™å…³ç³»èµ·ä¸ªåˆ«å"></a> é€šä¿—æ¥è®²å°±æ˜¯ç»™å…³ç³»èµ·ä¸ªåˆ«å</h4>
</li>
<li>
<h4 id="åœ¨ä¸€ä¸ªselect-from-whereè¯­å¥ä¸­è¦å°†åŒä¸€ä¸ªå…³ç³»ä¸­çš„ä¸åŒå…ƒç»„è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™"><a class="markdownIt-Anchor" href="#åœ¨ä¸€ä¸ªselect-from-whereè¯­å¥ä¸­è¦å°†åŒä¸€ä¸ªå…³ç³»ä¸­çš„ä¸åŒå…ƒç»„è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™"></a> åœ¨ä¸€ä¸ªselect-from-whereè¯­å¥ä¸­ï¼Œè¦å°†åŒä¸€ä¸ªå…³ç³»ä¸­çš„ä¸åŒå…ƒç»„è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> likes l1,likes l2</span><br><span class="line"><span class="keyword">where</span> l1.name = l2.name <span class="keyword">and</span> l1.beer &lt;&gt; l2.beer;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€ä¸ªbagå³æ²¡æœ‰ä¸é‡å¤æ€§"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€ä¸ªbagå³æ²¡æœ‰ä¸é‡å¤æ€§"></a> æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€ä¸ªBagï¼Œå³æ²¡æœ‰ä¸é‡å¤æ€§</h1>
<ul>
<li>
<h4 id="ä½†æ˜¯å½“è¿›è¡ŒæŸ¥è¯¢çš„å¹¶-äº¤-å·®çš„æ—¶å€™ä¼šå…ˆå»é‡è½¬æ¢æˆä¸€ä¸ªé›†åˆå› ä¸ºè¿™æ ·æ•ˆç‡é«˜"><a class="markdownIt-Anchor" href="#ä½†æ˜¯å½“è¿›è¡ŒæŸ¥è¯¢çš„å¹¶-äº¤-å·®çš„æ—¶å€™ä¼šå…ˆå»é‡è½¬æ¢æˆä¸€ä¸ªé›†åˆå› ä¸ºè¿™æ ·æ•ˆç‡é«˜"></a> ä½†æ˜¯å½“è¿›è¡ŒæŸ¥è¯¢çš„å¹¶ã€äº¤ã€å·®çš„æ—¶å€™ä¼šå…ˆå»é‡ï¼Œè½¬æ¢æˆä¸€ä¸ªé›†åˆï¼Œå› ä¸ºè¿™æ ·æ•ˆç‡é«˜ã€‚</h4>
</li>
<li>
<p>ç†è®ºä¸Šçš„æ–¹æ³•æ˜¯å…ˆå¯¹ä¸¤ä¸ªæŸ¥è¯¢ç»“æœè¿›è¡Œä¸€ä¸ªæ’åºï¼Œç„¶åéå†ä¸€éå»é‡ï¼Œç„¶ååœ¨éå†è¿›è¡Œé›†åˆè¿ç®—ã€‚</p>
</li>
</ul>
<h1 id="controlling-duplicate-eliminationæ§åˆ¶é‡å¤æ¶ˆé™¤"><a class="markdownIt-Anchor" href="#controlling-duplicate-eliminationæ§åˆ¶é‡å¤æ¶ˆé™¤"></a> Controlling Duplicate Eliminationæ§åˆ¶é‡å¤æ¶ˆé™¤</h1>
<ul>
<li>
<h4 id="å¼ºåˆ¶å»é‡"><a class="markdownIt-Anchor" href="#å¼ºåˆ¶å»é‡"></a> å¼ºåˆ¶å»é‡</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> price</span><br><span class="line"><span class="keyword">from</span> sells;</span><br></pre></td></tr></table></figure>
</li>
<li>
<h4 id="å¼ºåˆ¶å°†é›†åˆè½¬æ¢ä¸ºbagåœ¨å­æŸ¥è¯¢å…³ç³»è¿ç®—ä¸­ä½¿ç”¨allå…³é”®å­—"><a class="markdownIt-Anchor" href="#å¼ºåˆ¶å°†é›†åˆè½¬æ¢ä¸ºbagåœ¨å­æŸ¥è¯¢å…³ç³»è¿ç®—ä¸­ä½¿ç”¨allå…³é”®å­—"></a> å¼ºåˆ¶å°†é›†åˆè½¬æ¢ä¸ºBag(åœ¨å­æŸ¥è¯¢å…³ç³»è¿ç®—ä¸­ä½¿ç”¨ALLå…³é”®å­—)</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> drinker <span class="keyword">from</span> frequents)</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line">(<span class="keyword">select</span> drinker <span class="keyword">from</span> likes);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">select</span> drinker <span class="keyword">from</span> frequents)</span><br><span class="line"><span class="keyword">intersect</span> <span class="keyword">all</span></span><br><span class="line">(<span class="keyword">select</span> drinker <span class="keyword">from</span> likes);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">select</span> drinker <span class="keyword">from</span> frequents)</span><br><span class="line"><span class="keyword">except</span> <span class="keyword">all</span></span><br><span class="line">(<span class="keyword">select</span> drinker <span class="keyword">from</span> likes);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="æŸ¥è¯¢çš„å¹¶-äº¤-å·®"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢çš„å¹¶-äº¤-å·®"></a> æŸ¥è¯¢çš„å¹¶ã€äº¤ã€å·®</h1>
<ul>
<li>
<h4 id="intersect-äº¤"><a class="markdownIt-Anchor" href="#intersect-äº¤"></a> intersect äº¤</h4>
</li>
<li>
<h4 id="union-å¹¶"><a class="markdownIt-Anchor" href="#union-å¹¶"></a> union å¹¶</h4>
</li>
<li>
<h4 id="except-å·®"><a class="markdownIt-Anchor" href="#except-å·®"></a> except å·®</h4>
<blockquote>
<p>è¿™ä¸‰ä¸ªè¿ç®—éƒ½æ˜¯æŸ¥è¯¢ç»“æœä¸æŸ¥è¯¢ç»“æœä¹‹é—´è¿›è¡Œçš„ã€‚ä¸¤ä¸ªsubqueryç”¨å°æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¸­é—´ç”¨è¿™ä¸‰ä¸ªè¿ç®—ç¬¦è¿æ¥ã€‚</p>
</blockquote>
</li>
</ul>
<h1 id="ä½¿ç”¨å­æŸ¥è¯¢subqueryçš„æƒ…å†µ"><a class="markdownIt-Anchor" href="#ä½¿ç”¨å­æŸ¥è¯¢subqueryçš„æƒ…å†µ"></a> ä½¿ç”¨å­æŸ¥è¯¢(subquery)çš„æƒ…å†µ</h1>
<ul>
<li>
<h4 id="å‡ºç°åœ¨fromä¸­"><a class="markdownIt-Anchor" href="#å‡ºç°åœ¨fromä¸­"></a> å‡ºç°åœ¨fromä¸­</h4>
<blockquote>
<p>è‹¥å‡ºç°åœ¨fromä¸­åˆ™åœ¨å­æŸ¥è¯¢åé¢åº”è¯¥ç´§è·Ÿè¯¥å­æŸ¥è¯¢ç»“æœå¯¹åº”çš„å…ƒç»„å˜é‡(tuple variable)</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> likes.name</span><br><span class="line"><span class="keyword">from</span> (slect * <span class="keyword">from</span> bars) B,likes</span><br><span class="line"><span class="keyword">where</span> B.beer = likes.beer <span class="keyword">and</span> b.bar = likes.bar;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‡ºç°åœ¨fromä¸­çš„å­æŸ¥è¯¢ä¸€å®šè¦èµ·ä¸€ä¸ªåˆ«åï¼Œä¸ç„¶ä¸èƒ½æ‰§è¡Œ</p>
</blockquote>
</li>
<li>
<h4 id="å‡ºç°åœ¨whereä¸­"><a class="markdownIt-Anchor" href="#å‡ºç°åœ¨whereä¸­"></a> å‡ºç°åœ¨whereä¸­</h4>
<ul>
<li>è‹¥å­æŸ¥è¯¢ç»“æœä¸ºä¸€ä¸ªå…ƒç»„ï¼Œåˆ™è¿™ä¸ªå…ƒç»„çš„å…·ä½“å±æ€§å€¼å°±å¯ä»¥ç”¨æ¥è¿›è¡Œæ¯”è¾ƒ</li>
<li>è‹¥å­æŸ¥è¯¢ç»“æœä¸ºä¸€ä¸ªå…³ç³»ï¼Œåˆ™å¯ä»¥åœ¨whereä»¥ä¸åŒçš„æ–¹å¼ä½¿ç”¨ï¼Œå°±å’Œæ™®é€šçš„å…³ç³»ç±»ä¼¼ã€‚</li>
</ul>
</li>
</ul>
<h1 id="å…³ç³»çš„æ¡ä»¶è¡¨è¾¾å¼å€¼ä¸å…³ç³»ä¹‹é—´"><a class="markdownIt-Anchor" href="#å…³ç³»çš„æ¡ä»¶è¡¨è¾¾å¼å€¼ä¸å…³ç³»ä¹‹é—´"></a> å…³ç³»çš„æ¡ä»¶è¡¨è¾¾å¼(å€¼ä¸å…³ç³»ä¹‹é—´)</h1>
<ul>
<li>
<h4 id="exists"><a class="markdownIt-Anchor" href="#exists"></a> EXISTS</h4>
<ul>
<li>EXISTS R è‹¥Rä¸ä¸ºç©ºï¼Œåˆ™è¯¥å€¼ä¸ºtrueï¼Œåä¹‹ä¸ºå‡</li>
<li>NOT EXISTS R</li>
</ul>
</li>
<li>
<h4 id="in"><a class="markdownIt-Anchor" href="#in"></a> IN</h4>
<ul>
<li>IN R</li>
<li>NOT IN R</li>
</ul>
</li>
<li>
<h4 id="any"><a class="markdownIt-Anchor" href="#any"></a> ANY</h4>
<ul>
<li>s &gt; ANY R</li>
<li>NOT s &gt; ANY R</li>
</ul>
</li>
<li>
<h4 id="all"><a class="markdownIt-Anchor" href="#all"></a> ALL</h4>
<ul>
<li>s &gt; ALL R</li>
<li>NOT s &gt; ALL R</li>
</ul>
</li>
</ul>
<h1 id="å…ƒç»„çš„æ¡ä»¶è¡¨è¾¾å¼å…ƒç»„ä¸å…³ç³»ä¹‹é—´"><a class="markdownIt-Anchor" href="#å…ƒç»„çš„æ¡ä»¶è¡¨è¾¾å¼å…ƒç»„ä¸å…³ç³»ä¹‹é—´"></a> å…ƒç»„çš„æ¡ä»¶è¡¨è¾¾å¼(å…ƒç»„ä¸å…³ç³»ä¹‹é—´)</h1>
<ul>
<li>
<h4 id="å¦‚æœå…ƒç»„ä¸è¯¥å…³ç³»çš„å…ƒç»„ä¹‹é—´æœ‰ç›¸åŒçš„ç»„æˆåˆ†é‡componentä¸ªæ•°é‚£ä¹ˆè¿™ä¸ªæ¯”è¾ƒæ˜¯æœ‰æ„ä¹‰çš„"><a class="markdownIt-Anchor" href="#å¦‚æœå…ƒç»„ä¸è¯¥å…³ç³»çš„å…ƒç»„ä¹‹é—´æœ‰ç›¸åŒçš„ç»„æˆåˆ†é‡componentä¸ªæ•°é‚£ä¹ˆè¿™ä¸ªæ¯”è¾ƒæ˜¯æœ‰æ„ä¹‰çš„"></a> å¦‚æœå…ƒç»„ä¸è¯¥å…³ç³»çš„å…ƒç»„ä¹‹é—´æœ‰ç›¸åŒçš„ç»„æˆåˆ†é‡(component)ä¸ªæ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¯”è¾ƒæ˜¯æœ‰æ„ä¹‰çš„</h4>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span></span><br><span class="line"><span class="keyword">from</span> MovieExec</span><br><span class="line"><span class="keyword">where</span> cert<span class="comment"># IN</span></span><br><span class="line">(<span class="keyword">select</span> producerC<span class="comment">#</span></span><br><span class="line"><span class="keyword">from</span> Movies</span><br><span class="line"><span class="keyword">where</span> (title,<span class="keyword">year</span>) <span class="keyword">IN</span></span><br><span class="line"> 	(<span class="keyword">select</span> movieTitle,movieYear</span><br><span class="line">    <span class="keyword">from</span> StarsIn</span><br><span class="line">     <span class="keyword">Where</span> starName = <span class="string">&#x27;Harrison Ford&#x27;</span></span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="å…³è”å­æŸ¥è¯¢ç›¸å…³å­æŸ¥è¯¢correlated-subquery"><a class="markdownIt-Anchor" href="#å…³è”å­æŸ¥è¯¢ç›¸å…³å­æŸ¥è¯¢correlated-subquery"></a> å…³è”å­æŸ¥è¯¢ï¼Œç›¸å…³å­æŸ¥è¯¢(correlated subquery)</h1>
<ul>
<li>
<h4 id="åœ¨å­æŸ¥è¯¢è¿‡ç¨‹ä¸­è¦ç”¨åˆ°å­æŸ¥è¯¢å¤–éƒ¨å…³ç³»çš„å…ƒç»„"><a class="markdownIt-Anchor" href="#åœ¨å­æŸ¥è¯¢è¿‡ç¨‹ä¸­è¦ç”¨åˆ°å­æŸ¥è¯¢å¤–éƒ¨å…³ç³»çš„å…ƒç»„"></a> åœ¨å­æŸ¥è¯¢è¿‡ç¨‹ä¸­è¦ç”¨åˆ°å­æŸ¥è¯¢å¤–éƒ¨å…³ç³»çš„å…ƒç»„</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> title </span><br><span class="line"><span class="keyword">from</span> movies <span class="keyword">Old</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span> &lt; <span class="keyword">any</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">select</span> <span class="keyword">year</span></span><br><span class="line">    <span class="keyword">from</span> movies</span><br><span class="line">    <span class="keyword">where</span> title = Old.title</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å±æ€§åå­çš„ä½œç”¨èŒƒå›´ï¼Œå³å°±è¿‘åŸåˆ™ï¼Œè¿‘çš„æ‰¾ä¸åˆ°å…³ç³»ä¸­æœ‰è¯¥å±æ€§ï¼Œåˆ™å»è¿œå¤„æ‰¾</p>
</blockquote>
</li>
</ul>
<h1 id="sqlè¿æ¥è¡¨è¾¾å¼"><a class="markdownIt-Anchor" href="#sqlè¿æ¥è¡¨è¾¾å¼"></a> SQLè¿æ¥è¡¨è¾¾å¼</h1>
<h1 id="cross-join-ç¬›å¡å°”ä¹˜ç§¯"><a class="markdownIt-Anchor" href="#cross-join-ç¬›å¡å°”ä¹˜ç§¯"></a> cross join ç¬›å¡å°”ä¹˜ç§¯</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> likes <span class="keyword">cross</span> <span class="keyword">join</span> sells;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åˆ—æ•°ç›¸åŠ ï¼Œè¡Œæ•°ç›¸ä¹˜</p>
</blockquote>
<h1 id="è‡ªç„¶è¿æ¥natural-join"><a class="markdownIt-Anchor" href="#è‡ªç„¶è¿æ¥natural-join"></a> è‡ªç„¶è¿æ¥Natural Join</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> likes.beer,drinker,bar,price</span><br><span class="line"><span class="keyword">from</span> likes,sells</span><br><span class="line"><span class="keyword">where</span> likes.beer = sells.beer;</span><br><span class="line">//å…ˆæ˜¯åšä¸€ä¸ªç¬›å¡å°”ä¹˜ç§¯ï¼Œç„¶åä¸¤ä¸ªè¡¨ä¸­ç›¸åŒçš„å±æ€§å€¼ç›¸åŒçš„å…ƒç»„æˆä¸ºè¿æ¥ç»“æœï¼Œä¸”åŒåå±æ€§å€¼ç›¸åŒçš„åˆå¹¶ã€‚</span><br><span class="line">//ä¸‹é¢è¿™ä¸‰ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼Œåªæ˜¯nutural joinç»“æœä¼šåˆå¹¶å±æ€§åˆ—</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> likes <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> sells;</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> likes <span class="keyword">JOIN</span> sells <span class="keyword">ON</span> likes.beer = sells.beer;</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> likes <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> sells</span><br><span class="line"><span class="keyword">WHERE</span> likes.beer = sells.beer;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…ˆåšä¸€ä¸ª <strong>ç¬›å¡å°”ä¹˜ç§¯</strong></p>
<p>å¦‚æœæœ‰å¤šä¸ªåŒåçš„å±æ€§ï¼Œåˆ™ä¿ç•™ä¸‹æ¥çš„æˆä¸ºç»“æœçš„å…ƒç»„ä¸­çš„è¿™äº›å±æ€§å€¼éƒ½è¦ç›¸åŒã€‚</p>
<p><strong>ä¸”è¿›è¡Œäº†åˆå¹¶</strong></p>
</blockquote>
<h1 id="theta-join"><a class="markdownIt-Anchor" href="#theta-join"></a> Theta Join</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> drinkers [<span class="keyword">inner</span>] <span class="keyword">join</span> frequents <span class="keyword">on</span> <span class="keyword">name</span> = drinker</span><br><span class="line">[<span class="keyword">where</span> ...]</span><br><span class="line">;</span><br><span class="line">//å°±æ˜¯å…ˆåšç¬›å¡å°”æˆç»©ï¼Œç„¶åæ ¹æ®è¿™ä¸ªæ¡ä»¶ç­›é€‰,è¿˜å¯ä»¥ç»§ç»­æ ¹where</span><br><span class="line">//ç›¸å½“äºä¸</span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> drinkers,frequents</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">name</span> = drinker;</span><br></pre></td></tr></table></figure>
<h1 id="xxx-outer-joins"><a class="markdownIt-Anchor" href="#xxx-outer-joins"></a> XXX Outer joins</h1>
<blockquote>
<p>æ³¨æ„outer join æ˜¯é’ˆå¯¹å‰é¢çš„natural join å’Œ join onçš„</p>
<p>æ‰€ä»¥åˆ†ä¸º</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">natural left outer join</span><br><span class="line">natural right outer join</span><br><span class="line">natural full outer join</span><br><span class="line"></span><br><span class="line">left outer join on</span><br><span class="line">right outer join on</span><br><span class="line">full outer join on</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">natural LEFT OUTER JOIN</span><br><span class="line">//è¿æ¥å…³é”®å­—å·¦è¾¹çš„è¡¨ä¸­çš„æ‰€æœ‰çš„å…ƒç»„éƒ½ä¼šåˆ—å‡ºæ¥ï¼Œå¦‚æœè¯¥å…ƒç»„ä¸æ»¡è¶³æ¡ä»¶åˆ™åˆ—å‡ºNULL,åªè¦æœ‰æ»¡è¶³æ¡ä»¶çš„ä¸€ä¸ªå°±è¡Œ</span><br><span class="line">natural RIGHT OUTER JOIN</span><br><span class="line">natural FULL OUTER JOIN</span><br></pre></td></tr></table></figure>
<ul>
<li>
<h4 id="natural-left-outer-join"><a class="markdownIt-Anchor" href="#natural-left-outer-join"></a> natural left outer join</h4>
<blockquote>
<p><strong>åŒ…å«nutural joinçš„ç»“æœï¼Œå¦‚æœæŸ¥è¯¢ç»“æœä¸­æ²¡æœ‰åŒ…å«å…³é”®è¯å·¦è¾¹çš„å…³ç³»ä¸­çš„æŸä¸ªå…ƒç´ ï¼Œåˆ™ä¼šæŠŠè¿™ä¸ªå…ƒç´ åŠ å…¥ç»“æœï¼Œæ²¡æœ‰å’Œå³è¾¹å…³ç³»åŒ¹é…ä¸Šçš„å±æ€§å€¼ç”±NULLè¡¥å…¨ã€‚</strong></p>
</blockquote>
</li>
<li>
<h4 id="natural-right-outer-join"><a class="markdownIt-Anchor" href="#natural-right-outer-join"></a> natural right outer join</h4>
<blockquote>
<p><strong>åŒ…å«nutural joinçš„ç»“æœï¼Œå¦‚æœæŸ¥è¯¢ç»“æœä¸­æ²¡æœ‰åŒ…å«å…³é”®è¯å³è¾¹çš„å…³ç³»ä¸­çš„æŸä¸ªå…ƒç´ ï¼Œåˆ™ä¼šæŠŠè¿™ä¸ªå…ƒç´ åŠ å…¥ç»“æœï¼Œæ²¡æœ‰å’Œå·¦è¾¹å…³ç³»åŒ¹é…ä¸Šçš„å±æ€§å€¼ç”±NULLè¡¥å…¨ã€‚</strong></p>
</blockquote>
</li>
<li>
<h4 id="natural-full-outer-join"><a class="markdownIt-Anchor" href="#natural-full-outer-join"></a> natural full outer join</h4>
<blockquote>
<p><strong>åŒ…å«nutural joinçš„ç»“æœï¼Œå¦‚æœæŸ¥è¯¢ç»“æœä¸­æ²¡æœ‰åŒ…å«å…³é”®è¯å·¦è¾¹æˆ–å³è¾¹çš„å…³ç³»ä¸­çš„æŸä¸ªå…ƒç´ ï¼Œåˆ™ä¼šæŠŠè¿™ä¸ªå…ƒç´ åŠ å…¥ç»“æœï¼Œæ²¡æœ‰å’Œå³è¾¹æˆ–å·¦è¾¹å…³ç³»åŒ¹é…ä¸Šçš„å±æ€§å€¼ç”±NULLè¡¥å…¨ã€‚</strong></p>
</blockquote>
</li>
</ul>
<blockquote>
<p>å¦‚æœA natural join Bçš„ç»“æœä¸­ï¼ŒA å’Œ Bçš„åŒåå±æ€§ä¸ºattribute1ï¼Œåˆ™å¦‚æœç»“æœä¸­åŒ…å«Aä¸­attribute1(è½¬æ¢æˆset)çš„æ‰€æœ‰å€¼ï¼Œä¸”åŒ…å«Bä¸­attribute1(è½¬æ¢æˆset)çš„æ‰€æœ‰å€¼ï¼Œåˆ™ä¸Šé¢ä¸‰ç§outer joinæŸ¥è¯¢å‡ºæ¥çš„ç»“æœéƒ½ä¸€æ ·ã€‚</p>
</blockquote>
<h1 id="ç»™å…³ç³»èµ·åˆ«ååä¸èƒ½å†fromè¿™ä¸ªåˆ«å"><a class="markdownIt-Anchor" href="#ç»™å…³ç³»èµ·åˆ«ååä¸èƒ½å†fromè¿™ä¸ªåˆ«å"></a> ç»™å…³ç³»èµ·åˆ«ååä¸èƒ½å†fromè¿™ä¸ªåˆ«å</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> likes.drinker</span><br><span class="line"><span class="keyword">FROM</span> likes,(((<span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> bars)<span class="keyword">UNION</span>(<span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> beers))<span class="keyword">UNION</span>(<span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> drinkers))R</span><br><span class="line"><span class="keyword">WHERE</span> likes.beer <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">name</span></span><br><span class="line">	<span class="keyword">FROM</span> R</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸èƒ½è¿™æ ·å­</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2021/01/02/7BeASi6Vt8mbXGY.png" alt="image.png" /></p>
<p><img src= "/img/loading.gif" data-lazy-src="G:%5Ctyporaimages%5Cimage-20210102104503851.png" alt="image-20210102104503851" /></p>
</blockquote>
<h1 id="ä¾‹é¢˜"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜"></a> ä¾‹é¢˜</h1>
<ul>
<li>æ‰¾å‡ºå…·æœ‰ç›¸åŒå£å¾„ç«ç‚®çš„èˆ¹åªä¸­ç«ç‚®æ•°é‡æœ€å¤šçš„èˆ¹åªçš„åå­—</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span></span><br><span class="line"><span class="keyword">FROM</span> Ships</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">CLASS</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">CLASS</span></span><br><span class="line">	<span class="keyword">FROM</span> Classes c1</span><br><span class="line">	<span class="keyword">WHERE</span> numGuns &gt;= <span class="keyword">ALL</span></span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span> numGuns</span><br><span class="line">		<span class="keyword">FROM</span> Classes c2</span><br><span class="line">		<span class="keyword">WHERE</span> c1.bore = c2.bore</span><br><span class="line">	);</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span></span><br><span class="line"><span class="keyword">FROM</span> Ships</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">CLASS</span> = <span class="keyword">ANY</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">class</span></span><br><span class="line">	<span class="keyword">FROM</span> Classes c1</span><br><span class="line">	<span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">exists</span></span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span> *</span><br><span class="line">		<span class="keyword">FROM</span> Classes c2</span><br><span class="line">		<span class="keyword">WHERE</span> c1.bore = c2.bore <span class="keyword">AND</span> c1.numGuns &lt; c2.numGuns</span><br><span class="line">	)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="ä¹ é¢˜"><a class="markdownIt-Anchor" href="#ä¹ é¢˜"></a> ä¹ é¢˜</h1>
<ul>
<li>
<p>6.3.1</p>
<ul>
<li>
<p>(1)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> maker</span><br><span class="line"><span class="keyword">FROM</span> Product</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">model</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">	<span class="keyword">FROM</span> PC</span><br><span class="line">	<span class="keyword">WHERE</span> speed &gt;= <span class="number">3</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> maker</span><br><span class="line"><span class="keyword">FROM</span> Product,(<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> PC <span class="keyword">WHERE</span> speed &gt;= <span class="number">3</span>) <span class="keyword">high</span></span><br><span class="line"><span class="keyword">WHERE</span> Product.model = high.model;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>(2)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">    <span class="keyword">FROM</span> Printer</span><br><span class="line"><span class="keyword">WHERE</span> price &gt;= <span class="keyword">ALL</span> </span><br><span class="line">    (</span><br><span class="line">    	<span class="keyword">SELECT</span> price</span><br><span class="line">    	<span class="keyword">FROM</span> Printer</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">    <span class="keyword">FROM</span> Printer l1</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">    (</span><br><span class="line">    	<span class="keyword">SELECT</span> *</span><br><span class="line">    	<span class="keyword">FROM</span> Printer l2</span><br><span class="line">    	<span class="keyword">WHERE</span> l2.price &gt; l1.price</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>(3)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line"><span class="keyword">FROM</span> Laptop</span><br><span class="line"><span class="keyword">WHERE</span> speed &lt; <span class="keyword">ALL</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> speed</span><br><span class="line">	<span class="keyword">FROM</span> PC</span><br><span class="line">	<span class="keyword">WHERE</span> speed &lt;= <span class="keyword">All</span></span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span> speed</span><br><span class="line">		<span class="keyword">FROM</span> PC</span><br><span class="line">	)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line"><span class="keyword">FROM</span> Laptop l1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> *</span><br><span class="line">	<span class="keyword">FROM</span> PC</span><br><span class="line">	<span class="keyword">WHERE</span> speed &lt;= l1.speed</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>(4)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">SELECT</span> Product.model</span><br><span class="line">  <span class="keyword">FROM</span> Product</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">model</span> <span class="keyword">IN</span></span><br><span class="line">  (</span><br><span class="line">  	<span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">  	<span class="keyword">FROM</span> (((<span class="keyword">select</span> price <span class="keyword">from</span> pc)<span class="keyword">UNION</span>(<span class="keyword">select</span> price <span class="keyword">from</span> Laptop))<span class="keyword">UNION</span>(<span class="keyword">select</span> price <span class="keyword">from</span> Printer)) R</span><br><span class="line">  	<span class="keyword">WHERE</span> price &gt;= <span class="keyword">ALL</span></span><br><span class="line">  	(</span><br><span class="line">  		<span class="keyword">SELECT</span> price</span><br><span class="line">  		<span class="keyword">FROM</span> (((<span class="keyword">select</span> price <span class="keyword">from</span> pc)<span class="keyword">UNION</span>(<span class="keyword">select</span> price <span class="keyword">from</span> Laptop))<span class="keyword">UNION</span>(<span class="keyword">select</span> price <span class="keyword">from</span> Printer))</span><br><span class="line">  	)</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">SELECT</span> Product.model</span><br><span class="line">  <span class="keyword">FROM</span> Product</span><br><span class="line">  <span class="keyword">WHERE</span> <span class="keyword">model</span> <span class="keyword">IN</span></span><br><span class="line">  (</span><br><span class="line">  	<span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">  	<span class="keyword">FROM</span> (pc <span class="keyword">NATURAL</span> <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Laptop)<span class="keyword">NATURAL</span> <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Printer</span><br><span class="line">  	<span class="keyword">WHERE</span> price &gt;= <span class="keyword">ALL</span></span><br><span class="line">  	(</span><br><span class="line">  		<span class="keyword">SELECT</span> price</span><br><span class="line">  		<span class="keyword">FROM</span> (pc <span class="keyword">NATURAL</span> <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Laptop)<span class="keyword">NATURAL</span> <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Printer</span><br><span class="line">  	)</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ï¼ˆ5ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> maker</span><br><span class="line"><span class="keyword">FROM</span> product</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">model</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">	<span class="keyword">FROM</span> Printer</span><br><span class="line">	<span class="keyword">WHERE</span> price &lt;= <span class="keyword">all</span></span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span> price</span><br><span class="line">		<span class="keyword">FROM</span> Printer</span><br><span class="line">	)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> maker</span><br><span class="line"><span class="keyword">FROM</span> product</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">model</span>=<span class="keyword">ANY</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">	<span class="keyword">FROM</span> Printer p1</span><br><span class="line">	<span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">exists</span></span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span> *</span><br><span class="line">		<span class="keyword">FROM</span> Printer p2</span><br><span class="line">		<span class="keyword">WHERE</span> p2.price &lt; p1.price</span><br><span class="line">	)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>(6)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> maker</span><br><span class="line"><span class="keyword">FROM</span> product</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">model</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">	<span class="keyword">FROM</span> PC</span><br><span class="line">	<span class="keyword">WHERE</span> ram &lt;= <span class="keyword">ALL</span>(<span class="keyword">SELECT</span> ram <span class="keyword">FROM</span> PC) <span class="keyword">AND</span> speed &gt;= <span class="keyword">ALL</span>(<span class="keyword">SELECT</span> speed <span class="keyword">FROM</span> PC)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> maker</span><br><span class="line"><span class="keyword">FROM</span> product</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">model</span> =<span class="keyword">ANY</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">model</span></span><br><span class="line">	<span class="keyword">FROM</span> PC p1</span><br><span class="line">	<span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> ram <span class="keyword">FROM</span> PC p2 <span class="keyword">WHERE</span> p2.ram &lt; p1.ram ) <span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> speed <span class="keyword">FROM</span> PC p2 <span class="keyword">WHERE</span> p2.speed &gt; p1.speed)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>ä¹ é¢˜6.3.2</p>
<ul>
<li>
<p>(1)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> country</span><br><span class="line"><span class="keyword">FROM</span> Classes</span><br><span class="line"><span class="keyword">WHERE</span> numGuns &gt;= <span class="keyword">ALL</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> numGuns</span><br><span class="line">	<span class="keyword">FROM</span> Classes</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> country</span><br><span class="line"><span class="keyword">FROM</span> Classes c1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> </span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> *</span><br><span class="line">	<span class="keyword">FROM</span> Classes c2</span><br><span class="line">	<span class="keyword">WHERE</span> c2.numGuns &gt; c1.numGuns</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ï¼ˆ2ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">CLASS</span></span><br><span class="line"><span class="keyword">FROM</span> Ships</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> ship</span><br><span class="line">	<span class="keyword">FROM</span> Outcomes</span><br><span class="line">	<span class="keyword">WHERE</span> <span class="keyword">RESULT</span> = sunk</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">CLASS</span></span><br><span class="line"><span class="keyword">FROM</span> Ships s1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> *</span><br><span class="line">	<span class="keyword">FROM</span> Outcomes o1</span><br><span class="line">	<span class="keyword">WHERE</span> s1.ship = o1.name <span class="keyword">AND</span> o1.result = <span class="string">&#x27;ok&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>(3)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span> </span><br><span class="line"><span class="keyword">FROM</span> Ships</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">CLASS</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">class</span></span><br><span class="line">	<span class="keyword">FROM</span> Classes</span><br><span class="line">	<span class="keyword">WHERE</span> bore = <span class="number">16</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span></span><br><span class="line"><span class="keyword">FROM</span> Ships s1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> *</span><br><span class="line">	<span class="keyword">FROM</span> Classes c1</span><br><span class="line">	<span class="keyword">WHERE</span> s1.class = c1.class <span class="keyword">AND</span> c1.bore &lt;&gt; <span class="number">16</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>(4)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> battle</span><br><span class="line"><span class="keyword">FROM</span> Outcomes</span><br><span class="line"><span class="keyword">WHERE</span> ship <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">name</span></span><br><span class="line">	<span class="keyword">FROM</span> Ships</span><br><span class="line">	<span class="keyword">WHERE</span> <span class="keyword">CLASS</span> = <span class="string">&#x27;Kongo&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> battle</span><br><span class="line"><span class="keyword">FROM</span> Outcomes o1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> *</span><br><span class="line">	<span class="keyword">FROM</span> Ships s1</span><br><span class="line">	<span class="keyword">WHERE</span> o1.ship = s1.name <span class="keyword">AND</span> <span class="keyword">CLASS</span> = <span class="string">&#x27;Kongo&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>(5)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">NAME</span></span><br><span class="line">    <span class="keyword">FROM</span> Ships</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">CLASS</span> <span class="keyword">IN</span></span><br><span class="line">    (</span><br><span class="line">    	<span class="keyword">SELECT</span> <span class="keyword">CLASS</span></span><br><span class="line">    	<span class="keyword">FROM</span> Classes c1</span><br><span class="line">    	<span class="keyword">WHERE</span> numGuns &gt;= <span class="keyword">ALL</span></span><br><span class="line">    	(</span><br><span class="line">    		<span class="keyword">SELECT</span> numGuns</span><br><span class="line">    		<span class="keyword">FROM</span> Classes c2</span><br><span class="line">    		<span class="keyword">WHERE</span> c1.bore = c2.bore</span><br><span class="line">    	);</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">NAME</span></span><br><span class="line">    <span class="keyword">FROM</span> Ships</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="keyword">CLASS</span> = <span class="keyword">ANY</span></span><br><span class="line">    (</span><br><span class="line">    	<span class="keyword">SELECT</span> <span class="keyword">class</span></span><br><span class="line">    	<span class="keyword">FROM</span> Classes c1</span><br><span class="line">    	<span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">exists</span></span><br><span class="line">    	(</span><br><span class="line">    		<span class="keyword">SELECT</span> *</span><br><span class="line">    		<span class="keyword">FROM</span> Classes c2</span><br><span class="line">    		<span class="keyword">WHERE</span> c1.bore = c2.bore <span class="keyword">AND</span> c1.numGuns &lt; c2.numGuns</span><br><span class="line">    	)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="homework1"><a class="markdownIt-Anchor" href="#homework1"></a> homework1</h1>
<blockquote>
<p><strong>Homework</strong></p>
<p>Consider the following schema:</p>
<p>Supplier(sid: integer, sname: string, address: string)</p>
<p>Part(pid: integer, pname: string, color: string)</p>
<p>Catalog(sid: integer, pid: integer, cost: real)</p>
<p>The relation Supplier stores suppliers and the key of that relation is sid.</p>
<p>The relation Part  stores parts,  and pid is the key of that relation.</p>
<p>Finally, Catalog stores which  supplier  supplies which part at which cost.  The key is the combination of the two attributes sid  and pid.</p>
<p><strong>Write queries in SQL.</strong></p>
<ol>
<li>Find the names of suppliers who supply  some red part.</li>
<li>Find the IDs  of suppliers who supply some  red part and some green part.</li>
<li>Find pairs of IDs such that the supplier with the first ID charges more for some part  than the supplier  with the second ID.</li>
<li>Find the IDs  of suppliers who supply  only red parts.</li>
<li>Find the IDs  of suppliers who supply every part.</li>
</ol>
</blockquote>
<ul>
<li>
<p>1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> s.sname</span><br><span class="line"><span class="keyword">FROM</span> Supplier s,<span class="keyword">Catalog</span> c,part p</span><br><span class="line"><span class="keyword">WHERE</span> s.sid = c.sid <span class="keyword">AND</span> p.pid = c.pid <span class="keyword">AND</span> p.color = <span class="string">&#x27;red&#x27;</span>;	</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> sname</span><br><span class="line"><span class="keyword">FROM</span> Supplier</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">sid</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">sid</span></span><br><span class="line">	<span class="keyword">FROM</span> <span class="keyword">Catalog</span> </span><br><span class="line">	<span class="keyword">WHERE</span> pid <span class="keyword">IN</span></span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span> pid</span><br><span class="line">		<span class="keyword">FROM</span> Part</span><br><span class="line">		<span class="keyword">WHERE</span> color = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> sname</span><br><span class="line"><span class="keyword">FROM</span> Supplier</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">sid</span> <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">sid</span></span><br><span class="line">	<span class="keyword">FROM</span> <span class="keyword">CATALOG</span> c1</span><br><span class="line">	<span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> </span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span> *</span><br><span class="line">		<span class="keyword">FROM</span> Part p1</span><br><span class="line">		<span class="keyword">WHERE</span> p1.pid = c1.pid <span class="keyword">AND</span> color = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> sname</span><br><span class="line"><span class="keyword">FROM</span> ((Supplier <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> <span class="keyword">Catalog</span>)<span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Part)n</span><br><span class="line"><span class="keyword">WHERE</span> n.color = <span class="string">&#x27;red&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>2</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">Catalog</span></span><br><span class="line"><span class="keyword">WHERE</span> pid <span class="keyword">IN</span> (<span class="keyword">SELECT</span> pid <span class="keyword">FROM</span> Part <span class="keyword">WHERE</span> color = <span class="string">&#x27;red&#x27;</span>) <span class="keyword">AND</span> pid <span class="keyword">IN</span> (<span class="keyword">SELECT</span> pid <span class="keyword">FROM</span> Part <span class="keyword">WHERE</span> color = <span class="string">&#x27;green&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(</span><br><span class="line">		<span class="keyword">SELECT</span> c.sid <span class="keyword">FROM</span> <span class="keyword">Catalog</span> c,Part p <span class="keyword">WHERE</span> c.pid = p.pid <span class="keyword">AND</span> color = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line">(</span><br><span class="line">		<span class="keyword">SELECT</span> c.sid <span class="keyword">FROM</span> <span class="keyword">Catalog</span> c,Part p <span class="keyword">WHERE</span> c.pid = p.pid <span class="keyword">AND</span> color = <span class="string">&#x27;green&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> n1.sid</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">Catalog</span> <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Part)n1 <span class="keyword">JOIN</span> (<span class="keyword">Catalog</span> <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Part)n2 <span class="keyword">ON</span> n1.sid = n2.sid</span><br><span class="line"><span class="keyword">WHERE</span> n1.color = <span class="string">&#x27;red&#x27;</span> <span class="keyword">AND</span> n2.color = <span class="string">&#x27;green&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>3</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">SELECT</span> c1.sid,c2.sid</span><br><span class="line">  <span class="keyword">FROM</span> <span class="keyword">Catalog</span> c1,<span class="keyword">Catalog</span> c2</span><br><span class="line"><span class="keyword">WHERE</span> c1.pid = c2.pid <span class="keyword">AND</span> c1.sid &lt;&gt; c2.sid <span class="keyword">AND</span> c1.cost &gt; c2.pid;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">SELECT</span> c1.sid,c2.sid</span><br><span class="line">  <span class="keyword">FROM</span> <span class="keyword">Catalog</span> c1 <span class="keyword">JOIN</span> <span class="keyword">Catalog</span> c2 <span class="keyword">ON</span> (c1.pid = c2.pid <span class="keyword">AND</span> c1.sid &lt;&gt; c2.sid <span class="keyword">AND</span> c1.cost &gt; c2.cost);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>4</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">Catalog</span> c1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">SELECT</span> *</span><br><span class="line">	<span class="keyword">FROM</span> Part p1</span><br><span class="line">	<span class="keyword">WHERE</span> p1.sid = c1.sid <span class="keyword">AND</span> p1.color &lt;&gt; <span class="string">&#x27;red&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span></span><br><span class="line"><span class="keyword">FROM</span> Supplier s1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">(</span><br><span class="line">	(<span class="keyword">Catalog</span> <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Part)n1 <span class="keyword">JOIN</span> (<span class="keyword">Catalog</span> <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Part)n2 <span class="keyword">ON</span> (s1.sid = n1.sid <span class="keyword">AND</span> n1.sid = n2.sid <span class="keyword">AND</span> (n1.color &lt;&gt; <span class="string">&#x27;red&#x27;</span> <span class="keyword">OR</span> n2.color &lt;&gt; <span class="string">&#x27;red&#x27;</span>))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>5</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">SELECT</span> <span class="keyword">sid</span></span><br><span class="line">  <span class="keyword">FROM</span> Supplier s1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> </span><br><span class="line">  (</span><br><span class="line">  	(</span><br><span class="line">  		<span class="keyword">SELECT</span> pid</span><br><span class="line">  		<span class="keyword">FROM</span> Part</span><br><span class="line">  	)</span><br><span class="line">  	<span class="keyword">except</span></span><br><span class="line">  	(</span><br><span class="line">  		<span class="keyword">SELECT</span> pid</span><br><span class="line">  		<span class="keyword">FROM</span> <span class="keyword">Catalog</span> c1</span><br><span class="line">  		<span class="keyword">WHERE</span> c1.pid = s1.pid</span><br><span class="line">  	)</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="sqlä¿®æ”¹è¡¨ä¸­å…ƒç»„ä¸­å…ƒç´ "><a class="markdownIt-Anchor" href="#sqlä¿®æ”¹è¡¨ä¸­å…ƒç»„ä¸­å…ƒç´ "></a> SQLä¿®æ”¹è¡¨ä¸­å…ƒç»„ä¸­å…ƒç´ </h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> tablename</span><br><span class="line"><span class="keyword">set</span> attribute1=value1,attribute2=value2,....</span><br><span class="line"><span class="keyword">where</span> æ›´æ–°æ¡ä»¶è¡¨è¾¾å¼;</span><br></pre></td></tr></table></figure>
<h1 id="sqlåˆ é™¤è¡¨ä¸­å…ƒç»„"><a class="markdownIt-Anchor" href="#sqlåˆ é™¤è¡¨ä¸­å…ƒç»„"></a> SQLåˆ é™¤è¡¨ä¸­å…ƒç»„</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tablename</span><br><span class="line"><span class="keyword">where</span> åˆ é™¤æ¡ä»¶è¡¨è¾¾å¼;</span><br></pre></td></tr></table></figure>
<h1 id="èšåˆå‡½æ•°å°†å¤šä¸ªå€¼èšåˆæˆä¸€ä¸ªå€¼"><a class="markdownIt-Anchor" href="#èšåˆå‡½æ•°å°†å¤šä¸ªå€¼èšåˆæˆä¸€ä¸ªå€¼"></a> èšåˆå‡½æ•°ï¼ˆå°†å¤šä¸ªå€¼èšåˆæˆä¸€ä¸ªå€¼ï¼‰</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sum(attribute) avg(attribute) count(attribute) min(attribute) max(attribute)</span><br><span class="line">count()<span class="comment">--ä¸ä¼šæ•°null</span></span><br><span class="line">count(*) --æŸ¥æ‰¾çš„æ˜¯å…ƒç»„çš„æ•°é‡</span><br></pre></td></tr></table></figure>
<h1 id="è‹¥ä½¿ç”¨èšåˆå‡½æ•°selectä¸­-å…¶ä»–å±æ€§è¦ä¹ˆä½¿ç”¨èšåˆå‡½æ•°è¦ä¹ˆä½¿ç”¨group-by"><a class="markdownIt-Anchor" href="#è‹¥ä½¿ç”¨èšåˆå‡½æ•°selectä¸­-å…¶ä»–å±æ€§è¦ä¹ˆä½¿ç”¨èšåˆå‡½æ•°è¦ä¹ˆä½¿ç”¨group-by"></a> è‹¥ä½¿ç”¨èšåˆå‡½æ•°ï¼Œselectä¸­ å…¶ä»–å±æ€§è¦ä¹ˆä½¿ç”¨èšåˆå‡½æ•°ï¼Œè¦ä¹ˆä½¿ç”¨group by</h1>
<ul>
<li>é”™è¯¯ä»£ç </li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> bar, <span class="keyword">MIN</span>(price)</span><br><span class="line"><span class="keyword">FROM</span> Sells</span><br><span class="line"><span class="keyword">WHERE</span> beer = <span class="string">&#x27;å–œåŠ›&#x27;</span>;</span><br><span class="line"><span class="comment">--è¿™ä¸ªä»£ç æ˜¯é”™è¯¯çš„</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ­£ç¡®ä»£ç </li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> bar, price <span class="keyword">FROM</span> Sells</span><br><span class="line"><span class="keyword">WHERE</span> beer = <span class="string">&#x27;å–œ åŠ›&#x27;</span> </span><br><span class="line"><span class="keyword">AND</span> price = ( </span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">MIN</span>(price) <span class="keyword">FROM</span> Sells</span><br><span class="line">	<span class="keyword">WHERE</span> beer = <span class="string">&#x27;å–œåŠ›&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="group-byåˆ†ç»„"><a class="markdownIt-Anchor" href="#group-byåˆ†ç»„"></a> GROUP BYåˆ†ç»„</h1>
<ul>
<li>
<p>å¯¹æŸ¥è¯¢ç»“æœä¸­çš„å…ƒç»„çš„æ€§è´¨æœ‰é™åˆ¶çš„è¯ï¼Œåœ¨whereè¯­å¥ä¸­è¿›è¡Œé™åˆ¶</p>
</li>
<li>
<p>å¯¹group byåˆ†ç»„çš„æ•´ä½“çš„æ€§è´¨æœ‰é™åˆ¶çš„è¯ï¼Œåœ¨group byè¯­å¥åé¢åŠ ä¸Šhavingé™åˆ¶</p>
</li>
<li>
<p>åˆ†å®Œç»„åselectå¯¹æ¯ä¸€ç»„åˆ†åˆ«è¿›è¡Œç»Ÿè®¡ã€‚</p>
</li>
</ul>
<blockquote>
<p>ä¸€ä¸ªå…³ç³»ä¸­ä»»ä½•ä¸€ä¸ªå±æ€§ä½¿ç”¨äº†èšåˆå‡½æ•°ï¼Œåˆ™å…¶ä»–å±æ€§è¦ä¹ˆä¹Ÿä½¿ç”¨èšåˆå‡½æ•°ï¼Œè¦ä¹ˆä½¿ç”¨Group by</p>
</blockquote>
<blockquote>
<p>ä½¿ç”¨group byåï¼Œselectçš„ä½œç”¨å¯¹è±¡å°±æˆäº†<strong>æ¯ä¸ªåˆ†ç»„</strong></p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2021/01/02/7W9uPB1bkaYG2v3.png" alt="image.png" /></p>
<p><img src= "/img/loading.gif" data-lazy-src="G:%5Ctyporaimages%5Cimage-20210102110540702.png" alt="image-20210102110540702" /></p>
<h1 id="having-åªèƒ½å¯¹åˆ†ç»„æ•´ä½“è¿›è¡Œé™åˆ¶"><a class="markdownIt-Anchor" href="#having-åªèƒ½å¯¹åˆ†ç»„æ•´ä½“è¿›è¡Œé™åˆ¶"></a> having åªèƒ½å¯¹åˆ†ç»„æ•´ä½“è¿›è¡Œé™åˆ¶</h1>
<ul>
<li>è‹¥å‡ºç°having åˆ™å¿…é¡»æ”¾åœ¨group byåé¢ï¼Œå¯¹æ¯ä¸ªåˆ†ç»„è¿›è¡Œåˆ¤æ–­ï¼Œå°†åˆ†ç»„å½“æˆä¸€ä¸ªæ•´ä½“ï¼Œä¸æ˜¯ä¸€ä¸ªä¸€ä¸ªå…ƒç»„åˆ¤æ–­ã€‚</li>
<li>æ‰€ä»¥åœ¨havingä¸­åªèƒ½ç”¨èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­</li>
</ul>
<h1 id="èšåˆå‡½æ•°ä¸èƒ½å‡ºç°åœ¨whereè¯­å¥ä¸­"><a class="markdownIt-Anchor" href="#èšåˆå‡½æ•°ä¸èƒ½å‡ºç°åœ¨whereè¯­å¥ä¸­"></a> èšåˆå‡½æ•°ä¸èƒ½å‡ºç°åœ¨whereè¯­å¥ä¸­</h1>
<ul>
<li>å› ä¸ºwhereä¸­å¼ **ä¸€ä¸ªä¸€ä¸ªå…ƒç»„ **å¸¦è¿›å»åˆ¤æ–­whereæ¡ä»¶çš„ï¼Œä½†æ˜¯èšåˆå‡½æ•°ç”¨åˆ°äº†æ•´ä¸ªå±æ€§</li>
</ul>
<h1 id="èšåˆå‡½æ•°å’Œåˆ†ç»„ä¸­çš„nullå€¼"><a class="markdownIt-Anchor" href="#èšåˆå‡½æ•°å’Œåˆ†ç»„ä¸­çš„nullå€¼"></a> èšåˆå‡½æ•°å’Œåˆ†ç»„ä¸­çš„NULLå€¼</h1>
<ul>
<li>NULLå¯¹å¹³å‡å€¼ã€æ±‚å’Œã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€è®¡æ•°éƒ½ä¸åšè´¡çŒ®</li>
<li>åˆ†ç»„ä¸­å¯¹NULLå€¼æ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥å‡ºç°NULL</li>
<li>å¦‚æœå¯¹ç©ºåŒ…(åªæœ‰null)è®¡æ•°ï¼Œåˆ™ä¸ºé›¶ï¼Œå…¶ä»–èšåˆè¿ç®—ç»“æœä¸ºnull</li>
</ul>
<h1 id="å±æ€§çš„é»˜è®¤å€¼"><a class="markdownIt-Anchor" href="#å±æ€§çš„é»˜è®¤å€¼"></a> å±æ€§çš„é»˜è®¤å€¼</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tablename</span><br><span class="line">(</span><br><span class="line">	attribute1 type1 <span class="keyword">default</span> defaultvalue</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="è¡¨çš„æ›´æ–°"><a class="markdownIt-Anchor" href="#è¡¨çš„æ›´æ–°"></a> è¡¨çš„æ›´æ–°</h1>
<ul>
<li>
<p>insert</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> likes(beer,drinker)</span><br><span class="line"><span class="keyword">values</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¿˜è®°è¡¨ä¸­attributeçš„é¡ºåºï¼Œå¯ä»¥æŒ‡å®šæ’å…¥å€¼å¯¹åº”çš„å±æ€§</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> drinkers(<span class="keyword">name</span>)</span><br><span class="line"><span class="keyword">values</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ’å…¥éƒ¨åˆ†çš„å€¼</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tablename</span><br><span class="line">(</span><br><span class="line">	subquery</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ’å…¥å¤šä¸ªå…ƒç»„</p>
</blockquote>
</li>
<li>
<p>delete</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> </span><br><span class="line"><span class="keyword">from</span> tablename</span><br><span class="line"><span class="keyword">where</span> condition;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> *</span><br><span class="line"><span class="keyword">FROM</span> Beers b</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">			<span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> Beers</span><br><span class="line">			<span class="keyword">WHERE</span> manf = b.manf <span class="keyword">AND</span></span><br><span class="line">			<span class="keyword">name</span> &lt;&gt; b.name);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åˆ é™¤æ—¶å…ˆç»™æ»¡è¶³æ¡ä»¶çš„å…ƒç»„è¿›è¡Œæ ‡è®°ï¼Œè€Œä¸æ˜¯è¾¹åˆ è¾¹æŸ¥</p>
</blockquote>
</li>
<li>
<p>update</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> tablename</span><br><span class="line"><span class="keyword">set</span> attribute1 = <span class="keyword">value</span></span><br><span class="line"><span class="keyword">where</span> conditions;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="viewsè§†å›¾å’Œindexesç´¢å¼•"><a class="markdownIt-Anchor" href="#viewsè§†å›¾å’Œindexesç´¢å¼•"></a> (views)è§†å›¾å’Œ(indexes)ç´¢å¼•</h1>
<ul>
<li>a view is a relation defined in terms of stored tables(called base tables) and other views</li>
</ul>
<blockquote>
<p>è§†å›¾ä¾èµ–äºå…¶å®ƒçš„è¡¨æˆ–è€…å…¶å®ƒçš„è§†å›¾ï¼Œæ‰€ä»¥ å¿…é¡»è¦æœ‰è¡¨</p>
</blockquote>
<ul>
<li>
<p>è§†å›¾</p>
<ul>
<li>æ–¹ä¾¿æŸ¥è¯¢</li>
<li>è¿›è¡Œå¯æŸ¥è¯¢å†…å®¹é™åˆ¶</li>
</ul>
</li>
<li>
<p>two kinds:</p>
<ul>
<li>
<p>virtual = not stored in the database;(é»˜è®¤æƒ…å†µ)</p>
<blockquote>
<p>è™šæ‹Ÿè§†å›¾æŸ¥è¯¢çš„è¯­å¥ç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„è¡¨çš„æŸ¥è¯¢è¯­å¥å»æŸ¥è¯¢</p>
</blockquote>
<p>just a query for constructing the relation</p>
<blockquote>
<p>ä¸ä¼šåˆ›å»ºè¡¨ï¼Œä¸€ä¸ªè¡¨ä¸­æœ‰æ•æ„Ÿä¿¡æ¯ï¼Œè¦æä¾›æœ‰é€‰æ‹©æ€§çš„æœåŠ¡ï¼Œè¿™æ—¶å€™å°±èƒ½æä¾›è§†å›¾ï¼Œé€šè¿‡è§†å›¾è¿›è¡Œéƒ¨åˆ†ä¿¡æ¯å±•ç¤ºã€‚</p>
<p>å¯¹å¤šä¸ªè¡¨çš„å¤æ‚æŸ¥è¯¢å®šä¹‰æˆä¸€ä¸ªè§†å›¾ï¼Œç„¶åä¹‹åçš„å¤æ‚æŸ¥è¯¢å¯ç›´æ¥å¯¹è¿™ä¸ªè§†å›¾è¿›è¡ŒæŸ¥è¯¢</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--virtual</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> &lt;<span class="keyword">name</span>&gt; [<span class="keyword">attributes</span>](ä¸º<span class="keyword">select</span>é€‰æ‹©çš„å†…å®¹é‡å‘½åï¼Œå¯çœç•¥ï¼Œå¦åˆ™ç”¨<span class="keyword">query</span>ä¸­çš„å±æ€§å)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">	&lt;<span class="keyword">query</span>&gt;;</span><br><span class="line">	</span><br><span class="line"><span class="comment">--materialized</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">materialized</span> <span class="keyword">view</span> &lt;viewname&gt;[<span class="keyword">attributes</span>]</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line">	&lt;<span class="keyword">query</span>&gt;;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> CanDrink(drinker,beer)<span class="comment">--æ²¡æœ‰æŒ‡å®šå±æ€§ï¼Œåˆ™ç”¨queryä¸­çš„drinker,beerå±æ€§</span></span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">	<span class="keyword">select</span> drinker,beer</span><br><span class="line">	<span class="keyword">from</span> frequents,sells</span><br><span class="line">	<span class="keyword">where</span> frequents.bar = sells.bar;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>materialized(ç‰©åŒ–çš„) = actually constructed and stored</p>
</li>
</ul>
</li>
<li>
<p>å¯¹è§†å›¾çš„æŸ¥è¯¢</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> beer </span><br><span class="line"><span class="keyword">from</span> CanDrink</span><br><span class="line"><span class="keyword">where</span> drinker = <span class="string">&#x27;Tony Hoare&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--ç›¸å½“äº</span></span><br><span class="line"><span class="keyword">select</span> beer </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line">	<span class="keyword">select</span> drinker,beer</span><br><span class="line">	<span class="keyword">from</span> frequents,sells</span><br><span class="line">	<span class="keyword">where</span> frequents.bar = sells.bar</span><br><span class="line">) CanDrink</span><br><span class="line"><span class="keyword">where</span> drinker = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--ç³»ç»Ÿä¼˜åŒ–æˆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> beer</span><br><span class="line"><span class="keyword">from</span> frequents,sells</span><br><span class="line"><span class="keyword">where</span> frequents.bar = sells.bar <span class="keyword">and</span> drinker = <span class="string">&#x27; &#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¯¹è§†å›¾çš„ä¿®æ”¹</p>
<blockquote>
<p>ç±»ä¼¼äºå¯¹è§†å›¾çš„æŸ¥è¯¢</p>
<p>opengaussä¸­ç¦æ­¢å¯¹è§†å›¾çš„ä¿®æ”¹ï¼Œå› ä¸ºè§†å›¾çš„ç›®çš„å°±æ˜¯ç»™å®¢æˆ·è¿›è¡Œä¿¡æ¯çš„å±•ç¤º</p>
<p>sqlserverä¸­æ”¯æŒ</p>
</blockquote>
<ul>
<li>
<p>é‡å‘½åè§†å›¾</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rename</span> <span class="keyword">view</span> viewname1 <span class="keyword">to</span> viewname2;<span class="comment">--sqlä¸­</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>åˆ é™¤è§†å›¾</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> viewname;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç‰©åŒ–çš„è§†å›¾</p>
<blockquote>
<p>ç‰©åŒ–çš„è§†å›¾æŸ¥è¯¢å¿«ï¼Œä½†æ˜¯</p>
<p>å¦‚æœæ•°æ®æºçš„è¡¨æ”¹å˜äº†ï¼Œè§†å›¾åº”è¯¥ä¿æŒä¸€è‡´(é˜¶æ®µæ€§æ›´æ–°)</p>
<p>ä½†æ˜¯å¦‚æœè¡¨å˜åŒ–çš„é¢‘ç‡å¤ªå¿«ï¼Œåˆ™ä¸å¤ªé€‚åˆ</p>
</blockquote>
</li>
</ul>
<h1 id="sql-tuning-advisorsta"><a class="markdownIt-Anchor" href="#sql-tuning-advisorsta"></a> SQL Tuning Advisor(STA)</h1>
<ul>
<li>sqlè‡ªåŠ¨ä¼˜åŒ–</li>
</ul>
<h1 id="ç´¢å¼•"><a class="markdownIt-Anchor" href="#ç´¢å¼•"></a> ç´¢å¼•</h1>
<ul>
<li>
<p>åŠ é€Ÿæ•°æ®çš„è®¿é—®</p>
<p>æ•°æ®ç»“æ„ä½¿ç”¨çš„æ˜¯B-tree</p>
</li>
<li>
<p>åˆ›å»ºç´¢å¼•</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--ä¸€ä¸ªç´¢å¼•å¯¹åº”å¾ˆå¤šå€¼</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> indname <span class="keyword">on</span> realtion(<span class="keyword">attribute</span>);  </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> indname <span class="keyword">on</span> realtion(attribute1,attribute2,...);</span><br><span class="line"></span><br><span class="line"><span class="comment">--ä¸€ä¸ªç´¢å¼•å¯¹åº”ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> indname <span class="keyword">on</span> relation(<span class="keyword">attribute</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç´¢å¼•ä½¿ç”¨</p>
<ul>
<li>
<p>åªæœ‰å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œå®šä¹‰ç´¢å¼•åæ‰ä¼šä½¿ç”¨</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> beerind <span class="keyword">on</span> beers(manf);  </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> sellind <span class="keyword">on</span> sells(bar,beer);  </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> price</span><br><span class="line"><span class="keyword">from</span> beers,sells</span><br><span class="line"><span class="keyword">where</span> manf = <span class="string">&#x27;pete&#x27;&#x27;s&#x27;</span>  <span class="comment">--æ ¹æ®ç´¢å¼•æŸ¥æ‰¾</span></span><br><span class="line"><span class="keyword">and</span> beers.name = sells.beer <span class="comment">--æ ¹æ®ç´¢å¼•æŸ¥æ‰¾</span></span><br><span class="line"><span class="keyword">and</span> bar = <span class="string">&#x27;joe&#x27;&#x27;s bar&#x27;</span>; <span class="comment">--æ ¹æ®ç´¢å¼•æŸ¥æ‰¾</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿ç®—ç¬¦åªèƒ½ä½¿ç”¨=</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>æˆ‘ä»¬å®šä¹‰äº†ç´¢å¼•å</p>
<p>å¦‚æœç»å¸¸è¿›è¡Œæ›´æ–°æ“ä½œï¼Œç´¢å¼•ä¼šé™ä½é€Ÿç‡ï¼Œå› ä¸ºæ›´æ–°åç´¢å¼•ä¹Ÿè¦æ›´æ–°</p>
</li>
<li>
<p>å¦‚æœä¸è¿›è¡ŒæŸ¥è¯¢ï¼Œåˆ™å»ºç«‹ç´¢å¼•ä¼šé™ä½æ•ˆç‡</p>
</li>
<li>
<p>åˆ›å»ºprimary keyæˆ–unique keyåä¼šè‡ªåŠ¨åˆ›å»ºç´¢å¼•ï¼Œæ•…æˆ‘ä»¬è¦è‡ªå·±åˆ›å»ºç´¢å¼•æ—¶è¦å…ˆæŠŠä¸»é”®æˆ–è€…unique keyåˆ é™¤æ‰</p>
</li>
</ul>
<h1 id="å®ä½“å…³ç³»æ¨¡å‹entity-relation-model"><a class="markdownIt-Anchor" href="#å®ä½“å…³ç³»æ¨¡å‹entity-relation-model"></a> å®ä½“å…³ç³»æ¨¡å‹(Entity-Relation Model)</h1>
<ul>
<li>åŒ…å«çº¦æŸï¼Œä¸åŒ…å«æ“ä½œ</li>
</ul>
<h1 id="å®ä½“é›†entity"><a class="markdownIt-Anchor" href="#å®ä½“é›†entity"></a> å®ä½“é›†Entity</h1>
<ul>
<li>ç±»ä¼¼äºé¢å‘å¯¹è±¡ä¸­çš„ç±»</li>
<li>åŒ…å«ç®€å•çš„å±æ€§(å±æ€§ä¸èƒ½æ˜¯é›†åˆ)</li>
</ul>
<h1 id="è”ç³»relationshipäºŒå…ƒ"><a class="markdownIt-Anchor" href="#è”ç³»relationshipäºŒå…ƒ"></a> è”ç³»relationship(äºŒå…ƒ)</h1>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/IOCKgjGbWM3ZLsD.png" alt="image-20201103164015576.png" /></p>
<h1 id="è”ç³»é›†relationship-set"><a class="markdownIt-Anchor" href="#è”ç³»é›†relationship-set"></a> è”ç³»é›†(relationship set)</h1>
<ul>
<li>ä¸¤ä¸ªæœ‰è”ç³»çš„å®ä½“é›†çš„é›†åˆ</li>
</ul>
<h1 id="å¤šå…ƒè”ç³»å¤šè·¯è”ç³»multiway-relationshiops"><a class="markdownIt-Anchor" href="#å¤šå…ƒè”ç³»å¤šè·¯è”ç³»multiway-relationshiops"></a> å¤šå…ƒè”ç³»(å¤šè·¯è”ç³»)(Multiway relationshiops)</h1>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/KfivRtzYW1MCcAS.png" alt="image-20201103164640201.png" /></p>
<h1 id="å¤šå¯¹å¤šè”ç³»many-many-relationships"><a class="markdownIt-Anchor" href="#å¤šå¯¹å¤šè”ç³»many-many-relationships"></a> å¤šå¯¹å¤šè”ç³»(many-many relationships)</h1>
<ul>
<li>
<p>è”ç³»å…³è”çš„ä»»ä¸€å®ä½“é›†ä¸­çš„ä¸€ä¸ªå®ä½“å¯ä»¥å¯¹åº”å…¶å®ƒå®ä½“é›†ä¸­çš„å¤šä¸ªå®ä½“</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/14/Z9WdYKRjqE1iFAI.png" alt="image.png" /></p>
</li>
</ul>
<h1 id="å¤šå¯¹ä¸€è”ç³»many-one-relationships"><a class="markdownIt-Anchor" href="#å¤šå¯¹ä¸€è”ç³»many-one-relationships"></a> å¤šå¯¹ä¸€è”ç³»(many-one relationships)</h1>
<ul>
<li>
<p>å‰ä¸€ä¸ªå®ä½“é›†ä¸­çš„å¤šä¸ªå®ä½“å¯¹åº”åä¸€ä¸ªå®ä½“é›†ä¸­çš„è‡³å¤šä¸€ä¸ªå®ä½“</p>
</li>
<li>
<p>åä¸€ä¸ªå®ä½“é›†ä¸­çš„ä¸€ä¸ªå®ä½“å¯¹åº”å‰ä¸€ä¸ªå®ä½“é›†ä¸­çš„é›¶ä¸ªã€ä¸€ä¸ªã€å¤šä¸ªå®ä½“</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/14/f1FdX2KmrU5T4R3.png" alt="image.png" /></p>
</li>
</ul>
<h1 id="ä¸€å¯¹ä¸€è”ç³»one-one-relationships"><a class="markdownIt-Anchor" href="#ä¸€å¯¹ä¸€è”ç³»one-one-relationships"></a> ä¸€å¯¹ä¸€è”ç³»(one-one relationships)</h1>
<ul>
<li>
<p>ä¸€å¯¹ä¸€</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2021/01/02/mzcOdpkhWy4LaCU.png" alt="image-20201114204101921.png" /></p>
</li>
</ul>
<h1 id="è”ç³»çš„å¤šæ ·æ€§mltiplicity"><a class="markdownIt-Anchor" href="#è”ç³»çš„å¤šæ ·æ€§mltiplicity"></a> è”ç³»çš„å¤šæ ·æ€§(mltiplicity)</h1>
<ul>
<li>
<p>å†E/Rå›¾ä¸­è¡¨ç¤ºè”ç³»çš„å¤šæ ·æ€§</p>
</li>
<li>
<p>å¤šå¯¹å¤š</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/tEYbOUDJGv78Zfi.png" alt="image-20201103165501064.png" /></p>
<p>æˆ–è€…åœ¨æ¨ªçº¿ä¸ŠåŠ m,n</p>
</li>
<li>
<p>å¤šå¯¹ä¸€</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/YV5isDBduEX4fKG.png" alt="image-20201103165522220.png" /></p>
<p>æˆ–è€…åœ¨æ¨ªçº¿ä¸ŠåŠ m,1</p>
<blockquote>
<p>å¦‚æœæ˜¯å°–å°–çš„ç®­å¤´ï¼Œåˆ™æ¯ä¸ªäººä¹‹å¤šæœ‰ä¸€ä¸ªæœ€å–œæ¬¢çš„å•¤é…’ï¼Œå¯ä»¥æ²¡æœ‰</p>
<p>å¯ä»¥ä¸ºç©º</p>
<p>å¦‚æœæ˜¯åœ†çš„ç®­å¤´ï¼Œåˆ™æ¯ä¸ªäººå¿…é¡»æœ‰ä¸€ä¸ªæœ€å–œæ¬¢çš„å•¤é…’</p>
<p>not null</p>
</blockquote>
</li>
<li>
<p>ä¸€å¯¹ä¸€</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/DHBsgyJhz5Zxe4C.png" alt="image-20201103170031650.png" /></p>
<blockquote>
<p>è¯¥è”ç³»ä¸­ï¼Œæ¯ä¸ªå‚å•†å¿…é¡»æœ‰é”€å”®æœ€å¥½çš„å•¤é…’ï¼Œè€Œå•¤é…’ä¸ä¸€å®šèƒ½å¯¹åº”ä¸Šå‚å•†</p>
<p>æ‰€ä»¥æŒ‡å‘Beerçš„ç®­å¤´æ˜¯åœ†åœ†çš„ç®­å¤´ï¼Œè¡¨ç¤ºæ¯ä¸ªå‚å•†å¿…é¡»è¦æœ‰ï¼Œè€ŒæŒ‡å‘å‚å•†çš„ç®­å¤´æ˜¯å°–å°–çš„ç®­å¤´</p>
</blockquote>
</li>
</ul>
<h1 id="è”ç³»ä¸Šå¯èƒ½æœ‰å±æ€§attribute-on-relationship"><a class="markdownIt-Anchor" href="#è”ç³»ä¸Šå¯èƒ½æœ‰å±æ€§attribute-on-relationship"></a> è”ç³»ä¸Šå¯èƒ½æœ‰å±æ€§(attribute on relationship)</h1>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/uC84gqTfRi6K9ZA.png" alt="image-20201103170329104.png" /></p>
<ul>
<li>
<p>å¯ä»¥å°†è”ç³»çš„å±æ€§åšæˆä¸€ä¸ªå®ä½“é›†</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/QzdowAFmRgPTNSq.png" alt="image-20201103170437300.png" /></p>
</li>
</ul>
<blockquote>
<p>ä¸Šå›¾æ˜¯å¤šå¯¹å¤šå¯¹ä¸€çš„è”ç³»ï¼Œåº”è¯¥æŒ‡å‡ºå“ªä¸ªæ˜¯è”ç³»å¯¹åº”å±æ€§çš„å®ä½“</p>
<p>æ¨èä½¿ç”¨ä¸Šé¢ä¸å˜æˆå®ä½“é›†çš„</p>
</blockquote>
<h1 id="rolestabels-of-one-way-relationshipsä¸€å…ƒè”ç³»"><a class="markdownIt-Anchor" href="#rolestabels-of-one-way-relationshipsä¸€å…ƒè”ç³»"></a> roles(tabels of one way relationshipsä¸€å…ƒè”ç³»)</h1>
<ul>
<li>ä¸€å…ƒè”ç³»çš„æ ‡ç­¾</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/05/hAZSVy9rltbwXE8.png" alt="image.png" /></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/14/SsnhIo2y7mCRDQl.png" alt="image.png" /></p>
<blockquote>
<p>å¯¹ç§°çš„è”ç³»</p>
</blockquote>
<h1 id="å­ç±»sub-classes"><a class="markdownIt-Anchor" href="#å­ç±»sub-classes"></a> å­ç±»(sub classes)</h1>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/u4ObFKoJaZRYLS6.png" alt="image-20201103171521797.png" /></p>
<ul>
<li>
<p>åœ¨é¢å‘å¯¹è±¡è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡åªèƒ½å±äºä¸€ä¸ªç±»</p>
</li>
<li>
<p>ä½†åœ¨E/Rå›¾ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥å±äºå¥½å‡ ä¸ªç±»ï¼Œå³å¦‚æœå®ä½“eåœ¨ä¸€ä¸ªå­ç±»ä¸­è¢«æè¿°ï¼Œåˆ™åœ¨çˆ¶ç±»ä¸­ä¹Ÿæœ‰ç›¸åº”çš„æè¿°ï¼Œå¹¶å¯ä»¥é€’å½’å‘ä¸Šã€‚ä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªè¡¨é‡Œé¢éƒ½æœ‰å¯¹eçš„æè¿°çš„å…ƒç»„ã€‚</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/NbkOSD5hr1U4p3u.png" alt="image-20201103173139102.png" /></p>
</li>
</ul>
<h1 id="erå›¾ä¸­çš„ä¸»é”®keys"><a class="markdownIt-Anchor" href="#erå›¾ä¸­çš„ä¸»é”®keys"></a> E/Rå›¾ä¸­çš„ä¸»é”®(keys)</h1>
<ul>
<li>
<p>åœ¨å±æ€§ä¸‹é¢åŠ ä¸‹åˆ’çº¿</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/lYkWxSViDm8AsqB.png" alt="image-20201103173257755.png" /></p>
<blockquote>
<p>æ‰€æœ‰å­ç±»<strong>ç»§æ‰¿</strong>çˆ¶ç±»çš„<strong>å±æ€§åŒ…æ‹¬çº¦æŸ</strong></p>
</blockquote>
</li>
<li>
<p>multi-attributes key</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/sxM7YDIqnuAlciw.png" alt="image-20201103173349216.png" /></p>
</li>
</ul>
<h1 id="åº¦çš„çº¦æŸdegree-constaint"><a class="markdownIt-Anchor" href="#åº¦çš„çº¦æŸdegree-constaint"></a> åº¦çš„çº¦æŸ(degree constaint)</h1>
<ul>
<li>
<p>ä¸€ä¸ªé…’å§æœ€å¤šé”€å”®10ç§å•¤é…’</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/WeNzrZdjCu79xfp.png" alt="image-20201103173528095.png" /></p>
</li>
</ul>
<h1 id="å¼±å®ä½“é›†weak-entity-set"><a class="markdownIt-Anchor" href="#å¼±å®ä½“é›†weak-entity-set"></a> å¼±å®ä½“é›†(weak entity set)</h1>
<ul>
<li>
<p>è¦å”¯ä¸€è¯†åˆ«Eä¸­çš„å®ä½“ï¼Œè¦å€ŸåŠ©ä»Eå‡ºå‘çš„è”ç³»çš„ç›¸å…³è”çš„å®ä½“é›†çš„ä¸»é”®</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/wX6gZydfIjCBl1T.png" alt="image-20201103174056411.png" /></p>
</li>
</ul>
<blockquote>
<p>é˜Ÿå‘˜ä¸­çš„nameå’Œnumberéƒ½ä¸èƒ½ä½œä¸ºä¸»é”®ï¼Œå› ä¸ºä¸åŒé˜Ÿä¼çš„ä¸åŒé˜Ÿå‘˜å¯èƒ½æœ‰ç›¸åŒåå­—å’Œç¼–å·ï¼Œæ‰€ä»¥è¦å€ŸåŠ©é˜Ÿä¼è¿™ä¸ªå®ä½“é›†æ¥å¸®åŠ©åŒºåˆ†</p>
<p>è¿™ä¸ªè”ç³»ç§°ä¸ºæ”¯æ’‘è”ç³»ï¼Œä¸”è¿™ä¸ªè”ç³»å¿…é¡»æ˜¯å¤šå¯¹ä¸€çš„ï¼Œæ¯ä¸ªé˜Ÿå‘˜å¿…é¡»å±äºä¸€ä¸ªé˜Ÿä¼ï¼Œæ‰€ä»¥ä¸ºåœ†åœ†ç®­å¤´ã€‚</p>
<p>æ”¯æ’‘è”ç³»å¯ä»¥æœ‰å¤šä¸ª</p>
<p>å¼±å®ä½“é›†ç”¨åŒè¾¹æ¡†çŸ©å½¢æ¥è¡¨ç¤ºï¼Œè”ç³»ä¹Ÿæ˜¯åŒæ¡†</p>
<p>ä»å¼±å®ä½“é›†å‡ºå‘çš„è”ç³»ä¸ä¸€å®šéƒ½æ˜¯æ”¯æ’‘è”ç³»</p>
<p>å¼±å®ä½“é›†çš„ä¸»é”®ä¸ºï¼šè‡ªèº«çš„å±æ€§å’Œæ”¯æ’‘è”ç³»å¯¹åº”çš„å®ä½“çš„ä¸»é”®è”åˆå½¢æˆä¸»é”®</p>
</blockquote>
<h1 id="è®¾è®¡æŠ€å·§"><a class="markdownIt-Anchor" href="#è®¾è®¡æŠ€å·§"></a> è®¾è®¡æŠ€å·§</h1>
<ul>
<li>
<p>é¿å…å†—ä½™</p>
<p>saying the same thing in two different ways</p>
<ul>
<li>
<p>å¯èƒ½ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´</p>
<p>æè¿°åŒä¸€ç§ä¸œè¥¿çš„ä¸¤ä¸ªæè¿°å¦‚æœåªæ”¹äº†ä¸€ä¸ªä¸æ”¹å¦ä¸€ä¸ªï¼Œä¼šé€ æˆ</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/11/R7Yh6tqLcXVr81x.png" alt="image-20201110163419938.png" /></p>
</li>
<li>
<p>æµªè´¹ç©ºé—´</p>
</li>
</ul>
</li>
<li>
<p>é¿å…ä½¿ç”¨å¼±å®ä½“é›†</p>
</li>
<li>
<p>èƒ½ç”¨å±æ€§å°±ä¸ç”¨å®ä½“é›†</p>
<ul>
<li>å®ä½“é›†åº”è¯¥åŒ…å«å¾ˆå¤šå±æ€§ï¼Œé™¤äº†keyä»¥å¤–è¿˜æœ‰å¾ˆå¤šä¸æ˜¯keyçš„å±æ€§</li>
<li>å¤šå¯¹å¤šè”ç³»å’Œå¤šå¯¹ä¸€è”ç³»ä¸­çš„â€œå¤šâ€çš„ä¸€æ–¹ï¼Œåˆ™ç”¨å®ä½“é›†</li>
</ul>
</li>
<li>
<p>ä¾‹å­</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/14/wptJchr8TNl1qsd.png" alt="image.png" /></p>
<p>å› ä¸ºBeersæ—¶å¤šå¯¹ä¸€è”ç³»ä¸­å¤šçš„ä¸€æ–¹ï¼Œæ‰€ä»¥ç”¨å®ä½“é›†ã€‚</p>
<p>è€Œmanfsä½œä¸ºå¤šå¯¹ä¸€è”ç³»ä¸­ä¸€çš„ä¸€æ–¹ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ªnameé”®å±æ€§ï¼Œæ²¡æœ‰å…¶å®ƒéä¸»é”®å±æ€§ï¼Œæ‰€ä»¥ä¸é€‚åˆåšæˆä¸€ä¸ªå®ä½“é›†ã€‚</p>
<p>åº”ä¸ºï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/14/3o78B6MPCAH4jDn.png" alt="image.png" /></p>
<p>å†å¦‚ä¸‹ä¾‹ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/14/7rEJwsOXnzT1ZMB.png" alt="image.png" /></p>
<p>è¿™é‡Œbeersçš„manfå’Œmanfsçš„addrå­˜å‚¨çš„æ˜¯ç›¸åŒçš„å†…å®¹.å‡ºç°äº†å†…å®¹å†—ä½™</p>
<p>æ­£ç¡®çš„åº”ä¸º:</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/14/3SOA785ZmCjFnMG.png" alt="image.png" /></p>
</li>
</ul>
<h1 id="ä»erå›¾åˆ°æ•°æ®åº“è”ç³»ä¸å®ä½“é›†å±æ€§çš„åˆå¹¶"><a class="markdownIt-Anchor" href="#ä»erå›¾åˆ°æ•°æ®åº“è”ç³»ä¸å®ä½“é›†å±æ€§çš„åˆå¹¶"></a> ä»E/Rå›¾åˆ°æ•°æ®åº“(è”ç³»ä¸å®ä½“é›†å±æ€§çš„åˆå¹¶)</h1>
<ul>
<li>
<p>å®ä½“é›†åˆ°å…³ç³»</p>
</li>
<li>
<p>è”ç³»è½¬æ¢æˆå…³ç³»ï¼Œè”ç³»çš„å±æ€§ä¸ºç›¸å…³è”çš„å®ä½“é›†çš„key</p>
<ul>
<li>
<p>å¤šå¯¹å¤šè”ç³»ï¼Œè”åˆä¸»é”®</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2021/01/02/BCRtI4JxdnewskD.png" alt="image.png" /></p>
</li>
<li>
<p>å¤šå¯¹ä¸€è”ç³»ï¼Œå¤šçš„å®ä½“é›†çš„keyä¸ºä¸»é”®ï¼Œä»è€Œè”ç³»çš„å…³ç³»å’Œå¤šçš„é‚£ä¸ªå…³ç³»åˆå¹¶</p>
</li>
<li>
<p>ä¸€å¯¹ä¸€è”ç³»ï¼Œä¸€ä¸ªä¸ºä¸»é”®ï¼Œå¦ä¸€ä¸ªuniqueçº¦æŸ</p>
<ul>
<li>å¯çœ‹æˆå¤šå¯¹ä¸€çš„ç‰¹æ®Šæƒ…å†µï¼Œæœ‰æ—¶å€™å¯ä»¥å°†è”ç³»å’Œå…³ç³»åˆå¹¶ï¼Œè€Œæœ‰æ—¶å€™ä¸èƒ½åˆå¹¶ï¼Œçœ‹å…·ä½“æƒ…å†µã€‚</li>
<li>ä¸€èˆ¬æ¥è¯´è”ç³»æ‰€å…³è”çš„ä¸¤ä¸ªå®ä½“é›†ä¸­é‚£ä¸ªå±æ€§å°‘ï¼Œé‚£ä¸ªå’Œè”ç³»è¿›è¡Œåˆå¹¶</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¤„ç†è‹¥å®ä½“é›†</p>
<ul>
<li>æ”¯æ’‘è”ç³»ä¸ç”¨è½¬æ¢ï¼Œé™¤éæœ‰å±æ€§</li>
</ul>
</li>
<li>
<p>å­ç±»è½¬æ¢(ä¸‰ç§æ–¹æ³•)</p>
<ul>
<li>
<p>é¢å‘å¯¹è±¡çš„æ–¹å¼ï¼šæ¯ä¸ªå­ç±»éƒ½è½¬æ¢æˆä¸€ä¸ªå…³ç³»ï¼Œè¿™ä¸ªå…³ç³»åŒ…å«å­ç±»æ‰€æœ‰çš„å±æ€§(åŒ…æ‹¬ä»çˆ¶ç±»ç»§æ‰¿æ¥çš„)</p>
</li>
<li>
<p>use nullsï¼šçˆ¶ç±»è½¬æ¢æˆå…³ç³»ï¼Œä¹ŸåŒ…æ‹¬æ‰€æœ‰å­ç±»çš„å±æ€§ï¼Œæœ‰äº›å…ƒç»„ä¸åŒ…å«è¯¥å±æ€§åˆ™å€¼ä¸ºnull</p>
<p>å¯èƒ½ç©ºå€¼ä¼šæ¯”è¾ƒå¤š</p>
</li>
<li>
<p>E/R styleï¼šå­ç±»å…¨éƒ¨è½¬æ¢æˆå…³ç³»ï¼ŒåªåŒ…æ‹¬å­ç±»çš„keyå’Œç‰¹æœ‰çš„å±æ€§</p>
</li>
</ul>
<blockquote>
<p>ä¸åŒçš„è½¬æ¢æ–¹å¼ï¼Œå¯èƒ½æœ‰çš„æŸ¥è¯¢ä¸åˆ©ï¼Œæœ‰çš„æŸ¥è¯¢æœ‰åˆ©ï¼Œçœ‹å…·ä½“æƒ…å†µ</p>
</blockquote>
</li>
</ul>
<h1 id="çº¦æŸconstraint"><a class="markdownIt-Anchor" href="#çº¦æŸconstraint"></a> çº¦æŸ(constraint)</h1>
<ul>
<li>
<p>ä¸»é”®(å®ä½“å®Œæ•´æ€§çº¦æŸ) primary-key</p>
</li>
<li>
<p>å¤–é”®(å‚ç…§å®Œæ•´æ€§çº¦æŸ) foreign-key</p>
</li>
<li>
<p>value-based constraints(ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§çº¦æŸ)</p>
<p>ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§æŒ‡é’ˆå¯¹æŸä¸€å…·ä½“å…³ç³»æ•°æ®åº“çš„<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/1046571">çº¦æŸæ¡ä»¶</a>ï¼Œå®ƒåæ˜ æŸä¸€å…·ä½“åº”ç”¨æ‰€æ¶‰åŠçš„æ•°æ®å¿…é¡»æ»¡è¶³çš„è¯­ä¹‰è¦æ±‚ã€‚</p>
<p>ä¾‹å¦‚æŸä¸ªå±æ€§å¿…é¡»å–å”¯ä¸€å€¼ï¼ŒæŸä¸ªéä¸»å±æ€§ä¹Ÿä¸èƒ½å–ç©ºå€¼ï¼ŒæŸä¸ªå±æ€§çš„å–å€¼èŒƒå›´åœ¨0-100ä¹‹é—´ç­‰</p>
</li>
<li>
<p>tuple-based constraints(åŸºäºå…ƒç»„çš„çº¦æŸ)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  MovieStars(</span><br><span class="line">         <span class="keyword">name</span>  <span class="built_in">CHAR</span>(<span class="number">30</span>)   PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">         gender  <span class="built_in">CHAR</span>(<span class="number">1</span>)   <span class="keyword">CHECK</span> (gender <span class="keyword">IN</span> (â€˜Fâ€™,â€™Mâ€™) ) ,</span><br><span class="line">         <span class="keyword">CHECK</span> (gender=â€˜Fâ€™ <span class="keyword">OR</span> <span class="keyword">name</span> <span class="keyword">NOT</span> <span class="keyword">LIKE</span> â€˜Ms.%â€™)</span><br><span class="line">)ï¼›</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å³æ£€æŸ¥å¤šä¸ªå±æ€§çš„checkï¼Œå½“ä¸€ä¸ªå…ƒç»„è¢«ä¿®æ”¹æ—¶ï¼Œè¦æ£€æŸ¥å¤šä¸ªå±æ€§æ˜¯å¦æ»¡è¶³çº¦æŸæ¡ä»¶</p>
</blockquote>
</li>
<li>
<p>assertions</p>
<p>ä»»ä½•sqlçœŸå€¼è¡¨è¾¾å¼</p>
</li>
<li>
<p>ä¸»é”®å’Œå”¯ä¸€é”®ä¸èƒ½é‡å¤ï¼Œéƒ½åœ¨å»ºç«‹æ—¶è‡ªåŠ¨å»ºç«‹ç´¢å¼•</p>
</li>
</ul>
<h1 id="å¤–é”®å¤–é”®çš„å€¼è¦å‚ç…§å¦å¤–ä¸€ä¸ªå…³ç³»ä¸­ä¸»é”®æˆ–å”¯ä¸€é”®çš„å€¼"><a class="markdownIt-Anchor" href="#å¤–é”®å¤–é”®çš„å€¼è¦å‚ç…§å¦å¤–ä¸€ä¸ªå…³ç³»ä¸­ä¸»é”®æˆ–å”¯ä¸€é”®çš„å€¼"></a> å¤–é”®ï¼Œå¤–é”®çš„å€¼è¦å‚ç…§å¦å¤–ä¸€ä¸ªå…³ç³»ä¸­ä¸»é”®æˆ–å”¯ä¸€é”®çš„å€¼</h1>
<ul>
<li>ä¸primary key ç±»ä¼¼</li>
</ul>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Beers (</span><br><span class="line">	<span class="keyword">name</span>  <span class="built_in">VARCHAR</span>(<span class="number">20</span>) PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">	manf  <span class="built_in">VARCHAR</span>(<span class="number">30</span>) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>after an attribute</li>
</ul>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">references &lt;relation&gt; (&lt;attributes&gt;)</span><br><span class="line"><span class="comment">--example</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells (</span><br><span class="line">	bar    <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	beer   <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">REFERENCES</span> Beers(<span class="keyword">name</span>),</span><br><span class="line">	price  <span class="built_in">REAL</span> </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸€ç³»åˆ—</li>
</ul>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">foreign key(&lt;list of attributes&gt;)</span><br><span class="line">references &lt;relation&gt; (&lt;attributes&gt;)</span><br><span class="line"><span class="comment">--example</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells (</span><br><span class="line">	bar		<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	beer	<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	price	<span class="built_in">REAL</span>,</span><br><span class="line">	<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(beer) <span class="keyword">REFERENCES</span> Beers(<span class="keyword">name</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>å¤–é”®çš„ä½œç”¨</p>
<ul>
<li>
<p>If there is a foreign-key constraint from relation <em>R</em> to relation <em>S</em>, two violations are possible:</p>
<ul>
<li>An insert or update to <em>R</em> introduces values not found in <em>S</em>.
<ul>
<li>conflict to the foreign key</li>
</ul>
</li>
<li>A deletion or update to S causes some tuples of <em>R</em> to â€œdangle.â€
<ul>
<li>conflict to the reference</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>è®¾ç½®å‚æ•°</p>
<ul>
<li>
<p>default</p>
<p>è‹¥è¿åçº¦æŸï¼Œåˆ™ç›´æ¥æ‹’ç»æ‰§è¡Œ</p>
</li>
<li>
<p>cascade(é›†è”)</p>
<p>åŒæ­¥ä¿®æ”¹</p>
</li>
<li>
<p>set null</p>
<p>è®¾ç½®ä¸ºnull</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells (</span><br><span class="line">	bar		<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	beer	<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	price	<span class="built_in">REAL</span>,</span><br><span class="line">	<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(beer) <span class="keyword">REFERENCES</span> Beers(<span class="keyword">name</span>)<span class="comment">--åé¢çš„onæ˜¯æŒ‡å¯¹beersè¡¨è¿›è¡Œåˆ é™¤æˆ–ä¿®æ”¹æ—¶çš„æ“ä½œ</span></span><br><span class="line">		<span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">SET</span> <span class="literal">NULL</span></span><br><span class="line">		<span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">--æ²¡æœ‰on insert å› ä¸ºå¯¹beers insertä¸è¿åçº¦æŸ</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœåœ¨beersä¸­åˆ é™¤ï¼Œåˆ™sellsä¸­å•¤é…’ä¸ºnull</p>
<p>å¦‚æœåœ¨beersä¸­æ›´æ–°ï¼Œåˆ™sellsåŒæ­¥æ›´æ–°</p>
</blockquote>
<blockquote>
<p>è¿™é‡Œçš„å‚æ•°åªæ˜¯é’ˆå¯¹çš„æ˜¯æºè¡¨ï¼Œå³è¢«å‚ç…§çš„è¡¨</p>
</blockquote>
</li>
</ul>
<h1 id="checkçº¦æŸ"><a class="markdownIt-Anchor" href="#checkçº¦æŸ"></a> checkçº¦æŸ</h1>
<ul>
<li>
<p>ç¤ºä¾‹</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells (</span><br><span class="line">	bar		<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	beer	<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	price	<span class="built_in">REAL</span> <span class="keyword">CHECK</span> ( price &lt;= <span class="number">35.00</span> )</span><br><span class="line">);</span><br><span class="line"><span class="comment">--checkçº¦æŸåœ¨insertæˆ–updateæ—¶å€™è¿›è¡Œåˆ¤æ–­</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¿˜æœ‰åŸºäºå…ƒç»„çš„checkçº¦æŸ</p>
<p>checkçº¦æŸè¿˜å¯ä»¥åŸºäºå…¶å®ƒå…³ç³»çš„å±æ€§(ä½†æ˜¯ä¸€äº›dbmæ²¡æœ‰å®ç°è¯¥åŠŸèƒ½)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells (</span><br><span class="line">		bar		<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">		beer		<span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">		price	<span class="built_in">REAL</span>,</span><br><span class="line">		<span class="keyword">CHECK</span> (bar = <span class="string">&#x27;HardRock&#x27;</span> <span class="keyword">OR</span> price &lt;= <span class="number">35.00</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="modification-of-constraints"><a class="markdownIt-Anchor" href="#modification-of-constraints"></a> modification of Constraints</h1>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Beers </span><br><span class="line">(</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">CHAR</span>(<span class="number">20</span>) <span class="keyword">CONSTRAINT</span> NameIsKey PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">	manf <span class="built_in">CHAR</span>(<span class="number">20</span>) </span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells </span><br><span class="line">(</span><br><span class="line">	bar	 <span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">	beer <span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">	price <span class="built_in">REAL</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> BeerIsFK <span class="keyword">FOREIGN</span> <span class="keyword">Key</span> (beer) <span class="keyword">REFERENCES</span> Beers(<span class="keyword">name</span>) </span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells </span><br><span class="line">(</span><br><span class="line">	bar		<span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">	beer	<span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">	price	<span class="built_in">REAL</span> <span class="keyword">CONSTRAINT</span> RightPrice <span class="keyword">CHECK</span> ( price &lt;= <span class="number">5.00</span> )</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Sells </span><br><span class="line">(</span><br><span class="line">	bar	<span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">	beer	<span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">	price	<span class="built_in">REAL</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> RightPrice <span class="keyword">CHECK</span> </span><br><span class="line">  (bar =<span class="string">&#x27;HardRock&#x27;</span><span class="keyword">OR</span> price &lt;= <span class="number">5.00</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¿®æ”¹åˆ é™¤è¡¨ä¸­çš„çº¦æŸ</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;TableName&gt; <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> ConstraintName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;TableName&gt; <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> ConstraintName ConstrtaintContent;</span><br></pre></td></tr></table></figure>
<h1 id="assertionsæ–­è¨€"><a class="markdownIt-Anchor" href="#assertionsæ–­è¨€"></a> assertions(æ–­è¨€)</h1>
<ul>
<li>
<p>å®Œæˆå‰é¢çº¦æŸä¸èƒ½å®Œæˆçš„åŠŸèƒ½</p>
</li>
<li>
<p>å®ä¾‹</p>
<ul>
<li>é…’å§å¹³å‡ä»·æ ¼ä¸èƒ½é«˜äº$5</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">ASSERTION</span> NoRipoffBars <span class="keyword">CHECK</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">		<span class="keyword">SELECT</span> bar <span class="keyword">FROM</span> Sells</span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span> bar</span><br><span class="line">		<span class="keyword">HAVING</span> <span class="number">5.00</span> &lt; <span class="keyword">AVG</span>(price)</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœæœ‰æ“ä½œä¼šæ”¹å˜æ–­è¨€ä¸­çš„æ¡ä»¶ä¸­çš„å†…å®¹ï¼Œåˆ™è¦è¿›è¡Œåˆ¤æ–­ï¼Œæ‰€ä»¥æœ‰æ—¶å€™æ¯”è¾ƒè€—æ—¶ã€‚</li>
</ul>
</li>
</ul>
<h1 id="triggersè§¦å‘å™¨"><a class="markdownIt-Anchor" href="#triggersè§¦å‘å™¨"></a> triggers(è§¦å‘å™¨)</h1>
<ul>
<li>
<p>åˆ«å:event-condition-action rule (ECA Rule event-condition-action rule)</p>
<ul>
<li>
<p>event</p>
<p>typically a type of database modification, e.g., â€œinsert on Sells.â€</p>
</li>
<li>
<p>condition</p>
<p>Any SQL boolean-valued expression.</p>
</li>
<li>
<p>action</p>
<p>Any SQL statements.</p>
</li>
</ul>
</li>
<li>
<p>å®ä¾‹</p>
<p>Instead of using a foreign-key constraint and rejecting insertions into Sells(bar, beer, price) with unknown beers, a trigger can add that beer to Beers, with a NULL manufacturer.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> BeerTrig</span><br><span class="line">	<span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> Sells  <span class="comment">--ä¹Ÿå¯ä»¥ä¸ºbeforeåœ¨è¿™ä¸ªäº‹ä»¶æ‰§è¡Œä¹‹å‰ï¼Œæ‰§è¡Œè§¦å‘å™¨</span></span><br><span class="line">	<span class="keyword">REFERENCING</span></span><br><span class="line">		<span class="keyword">NEW</span> <span class="keyword">ROW</span> <span class="keyword">AS</span> NewTuple</span><br><span class="line">	<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span></span><br><span class="line">	<span class="keyword">WHEN</span> (NewTuple.beer <span class="keyword">NOT</span> <span class="keyword">IN</span></span><br><span class="line">			(<span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> Beers))</span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> Beers(<span class="keyword">name</span>)</span><br><span class="line">	<span class="keyword">VALUES</span>(NewTuple.beer);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>å°±æ˜¯å¤–é”®é‚£ä¸ªåœ¨å¤–é”®æ‰€å‚ç…§çš„è¡¨ä¸Šçš„é€‰é¡¹ï¼šcascadeï¼Œset nullã€‚è¿™ä¸ªåªæ˜¯é’ˆå¯¹çš„è¢«å‚ç…§çš„è¡¨çš„åˆ é™¤å’Œä¿®æ”¹ã€‚</p>
<p>å¦‚æœåœ¨è®¾ç½®å¤–é”®çš„è¡¨ä¸­æ’å…¥è¢«å‚ç…§çš„è¡¨ä¸­æ²¡æœ‰çš„æ•°æ®ï¼Œåˆ™è¿˜æ˜¯ä¼šæ‹’ç»ä¿®æ”¹ã€‚</p>
<p>æ­¤æ—¶å¯ä»¥ç”¨è§¦å‘å™¨è¿›è¡Œè®¾ç½®ï¼Œåœ¨æ’å…¥æ—¶ä¹Ÿåœ¨è¢«å‚ç…§çš„è¡¨ä¸­è¿›è¡Œæ’å…¥ã€‚</p>
</blockquote>
<ul>
<li>
<p>åˆ›å»ºæˆ–è€…åŒåæ—¶ä¿®æ”¹è§¦å‘å™¨</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">TRIGGER</span> &lt;<span class="keyword">name</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>instead ofå…³é”®å­—ï¼Œä»£æ›¿æ‰§è¡Œ</p>
<p>before å’Œ deleteå…³é”®å­—ï¼Œéƒ½æ˜¯åœ¨æŸä¸ªå…·ä½“çš„æ“ä½œå‰åè¿›è¡Œè§¦å‘å™¨çš„è§¦å‘åˆ¤æ–­ã€‚instead ofå…³é”®å­—å°±æ˜¯è¯¥å…³é”®å­—åé¢çš„æ“ä½œå…¶å®å¹¶æ²¡æœ‰èµ·ä½œç”¨ã€‚çœŸæ­£èµ·ä½œç”¨çš„æ˜¯è§¦å‘å™¨ä¸­çš„å†…å®¹ã€‚</p>
<blockquote>
<p>å³after å’Œ beforeå…³é”®å­—ï¼Œéƒ½æ˜¯åœ¨åé¢çš„å…³é”®å­—æ‰§è¡Œå‰åè¿›è¡Œåˆ¤æ–­ï¼Œä¸ç®¡æ˜¯å‰åé‚£å¥è¯­å¥éƒ½æ˜¯è¦æ‰§è¡Œçš„ã€‚</p>
<p>è€Œinstead ofå…³é”®å­—ï¼Œåé¢çš„é‚£å¥è¯­å¥ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ç”¨è§¦å‘å™¨ä¸­çš„å†…å®¹ä»£æ›¿é‚£ä¸ªå…³é”®å­—åé¢è¯­å¥çš„æ‰§è¡Œã€‚</p>
</blockquote>
<ul>
<li>å› è€Œå¯ä»¥ç”¨instead ofå…³é”®å­—åˆ›å»ºä¸€ä¸ªå¯¹è§†å›¾è¿›è¡Œä¿®æ”¹çš„è§¦å‘å™¨ã€‚å°±å¯ä»¥åœ¨å¯¹è§†å›¾ä¿®æ”¹æ—¶ï¼Œç›´æ¥å°†é‚£å¥è¯­å¥æ›¿æ¢æˆå¯¹ç›¸åº”æºè¡¨çš„ä¿®æ”¹ã€‚</li>
</ul>
</li>
<li>
<p>row-level triggers or statement-level triggers</p>
<ul>
<li>
<p><strong>åŒºåˆ«å¦‚ä¸‹</strong></p>
</li>
<li>
<p>row-level</p>
<p>å¯¹ä¿®æ”¹çš„æ¯ä¸€ä¸ªå…ƒç»„éƒ½è¿›è¡Œåˆ¤æ–­</p>
</li>
<li>
<p>statement-level triggers</p>
<p>å¯¹è¿™ä¸ªsqlè¯­å¥çš„æ‰§è¡Œæ•´ä½“åšä¸€ä¸ªè§¦å‘ï¼Œä¸ç®¡è¿™æ¡è¯­å¥ä¿®æ”¹äº†å¤šå°‘ä¸ªå…ƒç»„ï¼Œå³ä½¿æ˜¯ä¸ä¿®æ”¹å…ƒç»„</p>
</li>
<li>
<p>ä¸¾ä¾‹</p>
<ul>
<li>
<p>æœ‰ä¸ª1Mè¡Œçš„è¡¨ï¼Œè§¦å‘å™¨æ˜¯è§¦å‘æ¡ä»¶æ˜¯after update</p>
</li>
<li>
<p>å½“æˆ‘ä»¬æ‰§è¡Œ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> t</span><br><span class="line"><span class="keyword">set</span> columX= columX + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>å¦‚æœæ˜¯statementè¯­å¥çº§åˆ«çš„è§¦å‘å™¨</p>
<p>åˆ™è¯¥è§¦å‘å™¨åªè§¦å‘ä¸€æ¬¡(å³ä½¿å¯èƒ½æ²¡æœ‰æ›´æ–°çš„)</p>
</li>
<li>
<p>å¦‚æœæ˜¯rowè¡Œçº§çš„è§¦å‘å™¨</p>
<p>åˆ™è¯¥è§¦å‘å™¨åˆ™æ¯æˆåŠŸæ›´æ–°ä¸€è¡Œå°±è§¦å‘ä¸€æ¬¡</p>
<p>è¡Œçº§è§¦å‘å™¨æ˜¯æŒ‡æ¯ä¸ªDMLæ“ä½œå½±å“å‡ æ¡è®°å½•ï¼Œå°±ä¼šè§¦å‘å‡ æ¬¡(for each row)</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>åˆ›å»ºrow-level triggeråˆ™åœ¨è¯­å¥ä¸­åŠ å…¥for each rowå…³é”®å­—</p>
</li>
<li>
<p>å¦‚æœä¸åŠ åˆ™æ˜¯statement-level trigger</p>
</li>
</ul>
</li>
<li>
<p>ä¸åŒç±»å‹è§¦å‘å™¨æ‰§è¡Œé¡ºåº</p>
<p>Another difference is the order or activation. For example in Oracle the 4 different types of triggers will be activated in the following order:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Before statement-level trigger executes</span><br><span class="line"></span><br><span class="line">  Before row-level trigger executes</span><br><span class="line">  One row is updated</span><br><span class="line">  After row-level trigger executes</span><br><span class="line"></span><br><span class="line">  Before row-level trigger executes</span><br><span class="line">  Second row is updated</span><br><span class="line">  After row-level trigger executes</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  Before row-level trigger executes</span><br><span class="line">  Millionth row is updated</span><br><span class="line">  After row-level trigger executes</span><br><span class="line"></span><br><span class="line">After statement-level trigger executes</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>referencingå…³é”®å­—</p>
<ul>
<li>è¡Œçº§è§¦å‘å™¨ä¸­ç”±äºæ¶‰åŠåˆ°äº†æ¯æ¡è®°å½•çš„æ•°æ®å˜åŠ¨ï¼Œæ‰€ä»¥å¯¹äºæ¯æ¡è®°å½•çš„æ•°æ®æ¥è¯´å°±æœ‰æ–°å€¼å’Œæ—§å€¼ä¹‹åˆ† ï¼ˆè¯­å¥çº§è§¦å‘å™¨ä¸èƒ½ç”¨oldå’Œnew)</li>
<li><code>new</code> åªå‡ºç°åœ¨<code>insert</code>å’Œ<code>update</code>æ—¶ï¼Œ<code>old</code>åªå‡ºç°åœ¨<code>update</code>å’Œ<code>delete</code>æ—¶ã€‚åœ¨insertæ—¶newè¡¨ç¤ºæ–°æ’å…¥çš„è¡Œæ•°æ®ï¼Œupdateæ—¶newè¡¨ç¤ºè¦æ›¿æ¢çš„æ–°æ•°æ®ã€oldè¡¨ç¤ºè¦è¢«æ›´æ”¹çš„åŸæ¥çš„æ•°æ®è¡Œï¼Œdeleteæ—¶oldè¡¨ç¤ºè¦è¢«åˆ é™¤çš„æ•°æ®ã€‚</li>
</ul>
</li>
<li>
<p>old,newå…³é”®å­—,é€šè¿‡åœ¨referencingä¸­old newå…³é”®å­—æ¥ä½¿ç”¨æ–°æ—§æ•°æ®</p>
<ul>
<li>
<blockquote>
<p>sqlä¸­æ²¡æœ‰sql serverä¸­çš„deletedå’Œinsertedè¡¨,ä½†æ˜¯newå’Œoldå…³é”®å­—å®ç°äº†ç›¸åŒçš„åŠŸèƒ½.</p>
<p>old,newç›¸å½“äºä¿®æ”¹çš„é‚£ä¸ªå…ƒç»„ï¼Œoldå’Œnewåªèƒ½åœ¨è¡Œçº§è§¦å‘å™¨ä¸­ä½¿ç”¨</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>sql serverä¸­æ˜¯é€šè¿‡select ä»insertedå’Œdeletedè¡¨ä¸­å–å‡ºæ•°æ®.</p>
<p>sqlä¸­æ˜¯ç›´æ¥é€šè¿‡new,oldå…³é”®å­—è¿›è¡Œä½¿ç”¨</p>
<p>è¿™é‡Œåªæ˜¯äº†è§£sql serverä¸­è¿™ä¸¤ä¸ªè¡¨çš„ä½œç”¨</p>
<p>ç°åœ¨è¿™é‡Œè®²ä¸€ä¸‹ï¼Œå¯ä»¥ç±»æ¯”åˆ°new,oldå…³é”®å­—</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> updatename <span class="keyword">after</span> <span class="keyword">update</span> <span class="keyword">on</span> <span class="keyword">user</span> <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>   //å»ºç«‹è§¦å‘å™¨ï¼Œ  </span><br><span class="line"><span class="keyword">begin</span>  </span><br><span class="line">//<span class="keyword">old</span>,<span class="keyword">new</span>éƒ½æ˜¯ä»£è¡¨å½“å‰æ“ä½œçš„è®°å½•è¡Œï¼Œä½ æŠŠå®ƒå½“æˆè¡¨åï¼Œä¹Ÿè¡Œ;  </span><br><span class="line">if new.name!=old.name then   //å½“è¡¨ä¸­ç”¨æˆ·åç§°å‘ç”Ÿå˜åŒ–æ—¶,æ‰§è¡Œ  </span><br><span class="line"><span class="keyword">update</span> <span class="keyword">comment</span> <span class="keyword">set</span> comment.name=new.name <span class="keyword">where</span> comment.u_id=old.id;  </span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;  </span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>insertedè¡¨</p>
<ul>
<li>
<p>Inserted è¡¨ç”¨äºå­˜å‚¨ INSERT å’Œ UPDATE è¯­å¥æ‰€å½±å“çš„è¡Œçš„å‰¯æœ¬ã€‚åœ¨ä¸€ä¸ªæ’å…¥æˆ–æ›´æ–°äº‹åŠ¡å¤„ç†ä¸­ï¼Œæ–°å»ºè¡Œè¢«åŒæ—¶æ·»åŠ åˆ° inserted è¡¨å’Œè§¦å‘å™¨è¡¨ä¸­ã€‚Inserted è¡¨ä¸­çš„è¡Œæ˜¯è§¦å‘å™¨è¡¨ä¸­<strong>æ–°è¡Œçš„å‰¯æœ¬</strong>ï¼Œå³æ–°çš„æ•°æ®</p>
<p>ä¸´æ—¶ä¿å­˜äº†æ’å…¥æˆ–æ›´æ–°åçš„è®°å½•è¡Œ</p>
</li>
</ul>
</li>
<li>
<p>deletedè¡¨</p>
<ul>
<li>
<p>Deleted è¡¨ç”¨äºå­˜å‚¨ DELETE å’Œ UPDATE è¯­å¥æ‰€å½±å“çš„è¡Œçš„å‰¯æœ¬ã€‚åœ¨æ‰§è¡Œ DELETE æˆ– UPDATE è¯­å¥æ—¶ï¼Œ<strong>è¡Œä»è§¦å‘å™¨è¡¨ä¸­åˆ é™¤ï¼Œå¹¶ä¼ è¾“åˆ° deleted è¡¨ä¸­</strong>ã€‚Deleted è¡¨å’Œè§¦å‘å™¨è¡¨é€šå¸¸æ²¡æœ‰ç›¸åŒçš„è¡Œ</p>
<p>ä¸´æ—¶ä¿å­˜äº†åˆ é™¤æˆ–æ›´æ–°å‰çš„è®°å½•è¡Œ</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>insertæ“ä½œå</p>
<p>insertedè¡¨ä¸­æœ‰æ•°æ®ï¼Œdeletedè¡¨ä¸­æ— æ•°æ®</p>
</blockquote>
<blockquote>
<p>deleteæ“ä½œå</p>
<p>insertedè¡¨ä¸­æ— æ•°æ®ï¼Œdeletedè¡¨ä¸­æœ‰æ•°æ®</p>
</blockquote>
<blockquote>
<p>updateæ“ä½œå</p>
<p>insertedè¡¨ä¸­æœ‰æ•°æ®**(æ–°æ•°æ®)<strong>,deletedè¡¨ä¸­æœ‰æ•°æ®</strong>(æ—§æ•°æ®)**</p>
</blockquote>
</li>
<li>
<p>the condition</p>
<ul>
<li>
<p>å¯ä»¥æ˜¯ä»»ä½•å¸ƒå°”å€¼çš„æ¡ä»¶</p>
</li>
<li>
<p>æ ¹æ®ä½¿ç”¨BEFOREæˆ–AFTERï¼Œåœ¨è§¦å‘äº‹ä»¶ä¹‹å‰æˆ–ä¹‹åå¯¹æ•°æ®åº“è¿›è¡Œè¯„ä¼°ã€‚</p>
<p>instead ofæ˜¯ç›´æ¥ç”¨actionè¿›è¡Œæ›¿æ¢ï¼Œåº”è¯¥ä¹Ÿèƒ½è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸåˆ™è¿›è¡Œè¯­å¥æ›¿æ¢</p>
</li>
<li>
<p>é€šè¿‡REFERENCINGå­å¥ä¸­çš„åç§°è®¿é—®æ–°/æ—§å…ƒç»„/è¡¨ã€‚</p>
<blockquote>
<p>è®¿é—®æ–°/æ—§è¡¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>the action</p>
<ul>
<li>å¦‚æœæœ‰å¤šå¥sqlè¯­å¥ï¼Œç”¨begin endè¯­å¥å—åŒ…è£¹</li>
<li>è€Œä¸”åœ¨actionä¸­è¿›è¡ŒæŸ¥è¯¢æ˜¯æ²¡æœ‰æ„ä¹‰çš„</li>
</ul>
</li>
</ul>
<h1 id="authorizationæƒé™"><a class="markdownIt-Anchor" href="#authorizationæƒé™"></a> authorization(æƒé™)</h1>
<ul>
<li>
<p>å¯¹äºæ•°æ®åº“å¯¹è±¡çš„æƒé™</p>
<ul>
<li>åˆ›å»ºè¡¨å’Œè§†å›¾çš„æƒé™</li>
<li>åˆ›å»ºè§¦å‘å™¨çš„æƒé™</li>
</ul>
</li>
<li>
<p>å¯¹äºå…³ç³»çš„æƒé™</p>
<ul>
<li>select</li>
<li>update</li>
<li>delete</li>
<li>insert</li>
</ul>
<blockquote>
<p>å¯ä»¥æ˜¯å¯¹æ•´ä¸ªå…³ç³»çš„æƒé™ï¼Œä¹Ÿå¯ä»¥æ˜¯å…·ä½“åˆ°æŸä¸ªå±æ€§ä¸Šçš„æƒé™</p>
</blockquote>
</li>
<li>
<p>é€šè¿‡è§†å›¾è¿›è¡Œè®¿é—®å†…å®¹çš„é™åˆ¶ï¼Œè¿›è¡Œè®¿é—®æ§åˆ¶</p>
<ul>
<li>å¯¹é™åˆ¶åçš„å†…å®¹åˆ›å»ºè§†å›¾ï¼ŒæˆäºˆæŸ¥è¯¢æƒé™</li>
<li>å¯¹åŸæ¥çš„è¡¨ä¸ç»™æŸ¥è¯¢çš„æƒé™</li>
</ul>
</li>
<li>
<p>æƒé™æˆäºˆ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> <span class="keyword">privileges</span>&gt;</span><br><span class="line"><span class="keyword">ON</span> &lt;relation <span class="keyword">or</span> other <span class="keyword">object</span>&gt;</span><br><span class="line"><span class="keyword">TO</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> authorization <span class="keyword">ID</span>â€™s&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> tablename/viewname <span class="keyword">to</span> username;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">update</span>(price)<span class="comment">--å…·ä½“åˆ°æŸä¸ªå±æ€§</span></span><br><span class="line"><span class="keyword">on</span> sells</span><br><span class="line"><span class="keyword">to</span> sally;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç‰¹æ®Šç”¨æˆ·å public</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> tablename/viewname <span class="keyword">to</span> <span class="keyword">public</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®</p>
</blockquote>
<ul>
<li>åªèƒ½æˆæƒç»™åˆ«äººè‡ªå·±æœ‰çš„æƒé™ï¼Œä¸”è‡ªå·±è¢«æˆæƒå¯ä»¥æˆæƒç»™åˆ«äºº</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--åˆ«äººæˆæƒç»™æˆ‘ä»¬æ˜¯åŠ ä¸Šwith grant option</span></span><br><span class="line"><span class="keyword">grant</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> <span class="keyword">privileges</span>&gt;</span><br><span class="line"><span class="keyword">ON</span> &lt;relation <span class="keyword">or</span> other <span class="keyword">object</span>&gt;</span><br><span class="line"><span class="keyword">TO</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> authorization <span class="keyword">ID</span>â€™s&gt;</span><br><span class="line"><span class="keyword">with</span> <span class="keyword">grant</span> <span class="keyword">option</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ”¶å›æƒé™</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> <span class="keyword">privileges</span>&gt;</span><br><span class="line"><span class="keyword">ON</span> &lt;relation <span class="keyword">or</span> other <span class="keyword">object</span>&gt;</span><br><span class="line"><span class="keyword">FROM</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> authorization <span class="keyword">ID</span>â€™s&gt;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>aç»™cæƒé™ï¼Œcç»™dæƒé™ï¼Œaä¹Ÿç»™dæƒé™ï¼Œè‹¥cæ”¶å›ç»™dçš„æƒé™ï¼Œåˆ™aç»™dçš„æƒé™è¿˜åœ¨</p>
<p>åªèƒ½æ”¶å›è‡ªå·±ç»™çš„æƒé™</p>
</blockquote>
<ul>
<li>
<p>å¦‚æœæ‰‹ç»˜çš„æ—¶å€™ç”¨æˆ·æ²¡æœ‰å†ç»™åˆ«äººï¼Œåˆ™å°±èƒ½ç›´æ¥æ”¶å›ï¼Œåä¹‹è¯æ˜è¯¥ç”¨æˆ·è¿˜æŠŠæƒé™ç»™äº†åˆ«äººï¼Œä¸èƒ½ç›´æ¥æ”¶å›</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> <span class="keyword">privileges</span>&gt;</span><br><span class="line"><span class="keyword">ON</span> &lt;relation <span class="keyword">or</span> other <span class="keyword">object</span>&gt;</span><br><span class="line"><span class="keyword">FROM</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> authorization <span class="keyword">ID</span>â€™s&gt;</span><br><span class="line">restric;</span><br><span class="line"><span class="comment">--é»˜è®¤ä¸ºè¯¥å…³é”®å­—</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¯ä»¥ç›´æ¥å…¨éƒ¨æ”¶å›cascadeå…³é”®å­—</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> <span class="keyword">privileges</span>&gt;</span><br><span class="line"><span class="keyword">ON</span> &lt;relation <span class="keyword">or</span> other <span class="keyword">object</span>&gt;</span><br><span class="line"><span class="keyword">FROM</span> &lt;<span class="keyword">list</span> <span class="keyword">of</span> authorization <span class="keyword">ID</span>â€™s&gt;</span><br><span class="line"><span class="keyword">cascade</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>dbmæœ‰æƒé™å›¾ï¼Œè®°å½•æƒé™æˆäºˆæƒ…å†µ</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/11/24/czOMlsGXjwoa8Ng.png" alt="image.png" /></p>
<blockquote>
<p>*ä»£è¡¨æœ‰æƒé™æˆäºˆç»™åˆ«äºº</p>
<p>**å¯¹è±¡çš„æ‹¥æœ‰è€…</p>
<p>Use <em>AP</em>  for the node representing authorization ID <em>A</em> having privilege <em>P</em>.</p>
<p><em>P</em> * = privilege <em>P</em> with grant option.</p>
<p><em>P</em> ** = the source of the privilege <em>P</em>.</p>
</blockquote>
</li>
</ul>
<h1 id="äº‹åŠ¡transaction"><a class="markdownIt-Anchor" href="#äº‹åŠ¡transaction"></a> äº‹åŠ¡(transaction)</h1>
<ul>
<li>
<p>è€ƒè™‘é“¶è¡Œåº”ç”¨ä¸­çš„ä¸€ä¸ªè½¬è´¦ä¸šåŠ¡ï¼Œä»Aè´¦æˆ·å‘Bè´¦æˆ·è½¬1000å…ƒã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> amount <span class="keyword">FROM</span> A;</span><br><span class="line"><span class="keyword">UPDATE</span> A <span class="keyword">SET</span> amount = amount - <span class="number">1000</span>ï¼›</span><br><span class="line"><span class="keyword">UPDATE</span> B <span class="keyword">SET</span> amount = amount + <span class="number">1000</span>ï¼›</span><br></pre></td></tr></table></figure>
<p>ä¸‰æ¡è¯­å¥é¡ºåºæ‰§è¡Œï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç³»ç»Ÿå¯èƒ½å‘ç”Ÿæ•…éšœï¼ˆå´©æºƒã€åœç”µï¼‰ï¼Œä¼šå‡ºç°Aè´¦æˆ·å°‘äº†1000å…ƒï¼Œè€ŒBè´¦æˆ·çš„ä½™é¢ä¸å˜ã€‚</p>
</li>
<li>
<p>æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦ç‰¹å¾å°±æ˜¯å¯å…±äº«ï¼Œä¹Ÿå¯èƒ½ä¼šé€ æˆé—®é¢˜</p>
<p>ä¾‹å¦‚è½¦ç¥¨é¢„è®¢ç³»ç»Ÿã€‚</p>
<p>Aç”¨æˆ·è¦è®¢1å¼ â€œåä¸€â€ä»å…°å·åˆ°è¥¿å®‰çš„G1876æ¬¡è½¦çš„è½¦ç¥¨ã€‚é¦–å…ˆæŸ¥è¯¢è½¦ç¥¨ï¼Œå‘ç°è¿˜æœ‰1å¼ ç¥¨ï¼Œç„¶åè¿›è¡Œé¢„è®¢ã€‚ä¸æ­¤åŒæ—¶ï¼ŒBç”¨æˆ·ä¹Ÿè¦é¢„è®¢åŒä¸€å¤©ã€åŒä¸€è½¦æ¬¡çš„è½¦ç¥¨ã€‚å¯èƒ½å‘ç”Ÿä¸€å¼ ç¥¨å–ç»™äº†ä¸¤ä¸ªäººçš„äº‹æƒ…ã€‚</p>
</li>
<li>
<p>DBMSæ˜¯éå¸¸â€œé è°±â€çš„ï¼Œæœ‰ä¸€ç§æœºåˆ¶èƒ½å¤Ÿä¿è¯æ­¤ç±»äº‹ä»¶ä¸ä¼šå‘ç”Ÿã€‚ç”¨æˆ·å¯ä»¥æ”¾å¿ƒçš„å°†ä¸šåŠ¡äº¤ç»™DBMS</p>
</li>
<li>
<p>äº‹åŠ¡æ˜¯ç”¨æˆ·å®šä¹‰çš„ä¸€ä¸ªæ•°æ®åº“æ“ä½œåºåˆ—ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå…¨åšè¦ä¹ˆå…¨ä¸åšï¼Œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½</p>
</li>
<li>
<p>äº‹åŠ¡çš„æ˜¾ç¤ºå®šä¹‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span> <span class="keyword">TRANSACTION</span></span><br><span class="line">	<span class="keyword">SELECT</span> amount <span class="keyword">FROM</span> A;</span><br><span class="line">    <span class="keyword">UPDATE</span> A <span class="keyword">SET</span> amount = amount - <span class="number">1000</span>ï¼›</span><br><span class="line">    <span class="keyword">UPDATE</span> B <span class="keyword">SET</span> amount = amount + <span class="number">1000</span>ï¼›</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>äº‹åŠ¡çš„éšå¼å®šä¹‰</p>
<p>æ•°æ®åº“è‡ªåŠ¨æŠŠæ²¡æ˜¾ç¤ºå®šä¹‰çš„æ¯ä¸€å¥sqlè¯­å¥å®šä¹‰æˆä¸€ä¸ªäº‹åŠ¡</p>
<p>éš”ç¦»çº§åˆ«é»˜è®¤readcommited</p>
</li>
<li>
<p>äº‹åŠ¡çš„æ€§è´¨</p>
<ul>
<li>
<p>åŸå­æ€§</p>
<ul>
<li>è¦ä¹ˆäº‹åŠ¡æ‰§è¡Œå®Œï¼Œè¦ä¹ˆå°±ä¸æ‰§è¡Œã€‚</li>
</ul>
</li>
<li>
<p>ä¸€è‡´æ€§</p>
<ul>
<li>æ•°æ®ç¬¦åˆæ•°æ®åº“æœ¬èº«çš„å®šä¹‰å’Œè¦æ±‚ï¼Œæ²¡æœ‰åŒ…å«éæ³•æˆ–æ— æ•ˆçš„é”™è¯¯æ•°æ®</li>
<li>ä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€å˜åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œäº‹åŠ¡ä¹‹å‰å’Œä¹‹åçš„çŠ¶æ€éƒ½å¿…é¡»å¤„äºä¸€è‡´çš„çŠ¶æ€
<ul>
<li>æ¯”å¦‚ï¼Œè½¬è´¦äº‹åŠ¡æ‰§è¡Œå‰åï¼ŒA,Bè´¦æˆ·çš„ä½™é¢ä¹‹å’Œæ€–ä¸å®‰ï¼›ä¸€å¼ è½¦ç¥¨åªå–ç»™ä¸€ä¸ªä¹˜å®¢</li>
</ul>
</li>
<li>ä¸€è‡´æ€§æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„
<ul>
<li>å–é’±æ“ä½œçš„ä¸€è‡´æ€§åˆä¸ä¸€æ ·</li>
</ul>
</li>
<li>ä¸€è‡´æ€§ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼šäº‹åŠ¡çš„æ‰§è¡Œè¦éµå®ˆè§„åˆ™ã€çº¦æŸ</li>
</ul>
</li>
<li>
<p>éš”ç¦»æ€§</p>
<ul>
<li>å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œ</li>
<li>äº‹åŠ¡çš„éš”ç¦»æ€§æŒ‡çš„æ˜¯ï¼Œå³ä½¿æ•°æ®åº“ä¸­æœ‰å¤šä¸ªäº‹åŠ¡å¹¶å‘åœ°æ‰§è¡Œï¼Œå„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸åº”äº’ç›¸å½±å“ï¼Œå¹¶ä¸”åœ¨å¹¶å‘çŠ¶æ€ä¸‹æ‰§è¡Œçš„äº‹åŠ¡å’Œä¸²è¡Œæ‰§è¡Œçš„äº‹åŠ¡äº§ç”Ÿçš„ç»“æœå®Œå…¨ç›¸åŒ</li>
<li>åœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œç³»ç»Ÿåº”ä¿è¯ä¸è¿™äº›äº‹åŠ¡å…ˆåå•ç‹¬æ‰§è¡Œæ—¶çš„ç»“æœä¸€æ ·</li>
</ul>
</li>
<li>
<p>æŒä¹…æ€§</p>
<ul>
<li>å½“ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œæ‰§è¡Œè¿™ä¸ªäº‹åŠ¡çš„ç»“æœå·²ç»è¢«ä¿å­˜åœ¨æ°¸ä¹…æ€§å­˜å‚¨ä»‹è´¨ä¸­äº†ï¼Œå³ä½¿æœåŠ¡å™¨åœ¨äº‹åŠ¡æ‰§è¡Œå®Œæ¯•ååœæœºï¼Œæ‰§è¡Œäº‹åŠ¡æ‰€å¾—çš„ç»“æœä¹Ÿä¸ä¼šä¸¢å¤±</li>
<li>æ‰§è¡Œåä¿è¯èƒ½ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œè‹¥ä¸­æ–­ï¼Œæ¢å¤åé‡æ–°æ‰§è¡Œï¼Œä¿å­˜åˆ°ç¡¬ç›˜ä¸Š</li>
</ul>
</li>
</ul>
</li>
<li>
<p>äº‹åŠ¡æ€§è´¨çš„ä¿è¯</p>
<ul>
<li>æ•°æ®åº“çš„<strong>æ•°æ®æ¢å¤æŠ€æœ¯</strong>å¯ä»¥ä¿è¯äº‹åŠ¡çš„åŸå­æ€§ã€ä¸€è‡´æ€§å’ŒæŒä¹…æ€§</li>
<li>æ•°æ®åº“çš„<strong>å¹¶å‘æ§åˆ¶æŠ€æœ¯</strong>å¯ä»¥ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§</li>
</ul>
</li>
</ul>
<h1 id="äº‹åŠ¡ç»“æŸæ ‡å¿—commit"><a class="markdownIt-Anchor" href="#äº‹åŠ¡ç»“æŸæ ‡å¿—commit"></a> äº‹åŠ¡ç»“æŸæ ‡å¿—commit</h1>
<ul>
<li>
<p>commitæ‰§è¡Œåï¼Œæ ‡å¿—ç€äº‹åŠ¡çš„å®Œæˆï¼Œåˆ™è¯¥äº‹åŠ¡å¯¹æ•°æ®åº“çš„ä¿®æ”¹å°†ä¼šæ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå³ä¿å­˜åˆ°ç£ç›˜ä¸­ã€‚</p>
</li>
<li>
<p>sql serverä¸­</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span> <span class="keyword">TRANSACTION</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>mysql ä¸­</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">start</span> TRANSCATION</span><br><span class="line">...</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="äº‹åŠ¡çš„é—®é¢˜è„è¯»-ä¸å¯é‡å¤è¯»-å¹»å½±è¯»"><a class="markdownIt-Anchor" href="#äº‹åŠ¡çš„é—®é¢˜è„è¯»-ä¸å¯é‡å¤è¯»-å¹»å½±è¯»"></a> äº‹åŠ¡çš„é—®é¢˜:è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»å½±è¯»</h1>
<ul>
<li>
<p>è„è¯»(dirty read)ï¼š</p>
<p>äº‹åŠ¡1ä¿®æ”¹äº†ä¸€ä¸ªæ•°æ®è¿˜æœªæäº¤(å³è¯¥æ•°æ®è¿˜ä¸æ˜¯æœ€ç»ˆçš„ç¡®å®šæ•°æ®)ï¼Œäº‹åŠ¡2è¯»å–äº†è¯¥æ•°æ®ï¼Œä½†æ˜¯äº‹åŠ¡1å¯èƒ½æ‰§è¡Œå›æ»šæœºåˆ¶ï¼Œåˆ™äº‹åŠ¡2è¯»å–çš„å°±æ˜¯ä¸å­˜åœ¨çš„æ•°æ®ï¼Œæˆ–è€…äº‹åŠ¡1å¯èƒ½å†æ¬¡ä¿®æ”¹è¯¥æ•°æ®ï¼Œåˆ™äº‹åŠ¡2è¯»å–çš„å°±æ˜¯é”™è¯¯æ•°æ®ã€‚</p>
<blockquote>
<p>ä¸ä¸å¯é‡å¤è¯»çš„åŒºåˆ«ä¸ºï¼Œè„è¯»æ˜¯äº‹åŠ¡2åœ¨äº‹åŠ¡1ä¿®æ”¹ä¸€ä¸ªæ•°æ®è¿˜æœªæäº¤çš„æœŸé—´è¯»å–äº†è¯¥æ•°æ®ï¼Œåˆ™è¯¥æ•°æ®å¯èƒ½ä¸æ­£ç¡®æˆ–è€…æœ€åä¸å­˜åœ¨ã€‚</p>
</blockquote>
</li>
<li>
<p>ä¸å¯é‡å¤è¯»(NonRepeatable read)ï¼š</p>
<p>å½“äº‹åŠ¡1è¯»å–äº†ä¸€æ¡è®°å½•ï¼Œæœªæäº¤äº‹åŠ¡ï¼Œäº‹åŠ¡2ä¿®æ”¹äº†è¯¥æ¡è®°å½•å¹¶ä¸”æäº¤äº‹åŠ¡(å³è¯¥æ•°æ®å·²ç»ç¡®å®šè¢«äº‹åŠ¡2ä¿®æ”¹äº†)ï¼›</p>
<p>äº‹åŠ¡1åˆè¯»å–äº†è¯¥æ¡è®°å½•ï¼Œå‘ç°ä¸¤æ¡è®°å½•ä¸ä¸€æ ·</p>
<blockquote>
<p>ä¸è„è¯»çš„åŒºåˆ«ä¸ºï¼Œä¸å¯é‡å¤è¯»æ˜¯äº‹åŠ¡1ä¸¤æ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œäº‹åŠ¡2åœ¨ä¸¤æ¬¡è¯»æœŸé—´è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¯¼è‡´äº‹åŠ¡1è¯»å–åˆ°çš„æ•°æ®ä¸ä¸€è‡´äº†ã€‚</p>
</blockquote>
</li>
<li>
<p>å¹»å½±è¯»(Phantom Read)ï¼š</p>
<p>å½“äº‹åŠ¡1æ ¹æ®æŸç§æ£€ç´¢æ¡ä»¶ä¿®æ”¹äº†è‹¥å¹²æ¡è®°å½•ï¼Œæœªæäº¤äº‹åŠ¡ï¼›</p>
<p>è€Œäº‹åŠ¡2åˆæ’å…¥äº†ä¸€æ¡è®°å½•ï¼Œè¯¥è®°å½•ä¹Ÿç¬¦åˆäº‹åŠ¡1çš„æ£€ç´¢æ¡ä»¶ï¼›</p>
<p>é‚£ä¹ˆå½“äº‹åŠ¡1å†æ ¹æ®ç›¸åŒæŸ¥è¯¢æ¡ä»¶æ£€ç´¢æ•°æ®æ—¶ï¼Œä¼šå‘ç°è¿˜æœ‰æœªä¿®æ”¹çš„æ•°æ®ï¼Œä»¿ä½›å‡ºç°äº†å¹»è§‰ã€‚</p>
<blockquote>
<p>å¹»å½±è¯»åˆæ˜¯äº‹åŠ¡1æ£€ç´¢æ»¡è¶³æ¡ä»¶çš„å¤šæ¡æ•°æ®å¹¶å…¨éƒ¨ä¿®æ”¹ï¼Œäº‹åŠ¡2åœ¨äº‹åŠ¡1æœªæäº¤æ—¶åˆæ’å…¥äº†æ–°çš„æ»¡è¶³äº‹åŠ¡1æ£€ç´¢æ¡ä»¶çš„æ•°æ®ï¼Œå½“äº‹åŠ¡1å†æ¬¡æ£€ç´¢æ—¶ï¼Œåˆæ£€ç´¢å‡ºä¸€æ¡æœªä¿®æ”¹çš„æ•°æ®ã€‚</p>
<p>è„è¯»å’Œä¸å¯é‡å¤è¯»éƒ½æ˜¯é’ˆå¯¹å…·ä½“çš„æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹çš„ã€‚</p>
<p>è€Œå¹»å½±è¯»æ˜¯é’ˆå¯¹çš„æ˜¯å¦æœ‰æ–°çš„æœªä¿®æ”¹çš„æ•°æ®å‡ºç°</p>
</blockquote>
</li>
</ul>
<h1 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œé”"><a class="markdownIt-Anchor" href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œé”"></a> äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œé”ğŸ”’</h1>
<ul>
<li>
<p>äº‹åŠ¡æœ‰<code>åŸå­æ€§</code>ã€<code>ä¸€è‡´æ€§</code>ã€<code>æ°¸ä¹…æ€§</code>ã€<code>éš”ç¦»æ€§</code>ç€å››ä¸ªç‰¹å¾</p>
</li>
<li>
<p>è€Œäº‹åŠ¡çš„<code>éš”ç¦»æ€§</code>æ˜¯æ ¹æ®å®é™…çš„éœ€è¦ç¡®å®š<code>éš”ç¦»çš„ç¨‹åº¦</code>å’Œ<code>éš”ç¦»çš„ç•Œåˆ«</code></p>
</li>
<li>
<p>äº‹åŠ¡æœ‰å››ç§éš”ç¦»çº§åˆ«</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/09/aB5efhns9FCGctA.png" alt="image.png" /></p>
</li>
<li>
<p>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œé”çš„å…³ç³»</p>
<blockquote>
<p>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å¼é€šè¿‡é”çš„æœºåˆ¶æ¥å®ç°çš„ï¼Œäº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯æ•°æ®åº“å¼€å‘å•†æ ¹æ®ä¸šåŠ¡é€»è¾‘çš„å®é™…éœ€è¦å®šä¹‰çš„ä¸€ç»„é”çš„ä½¿ç”¨ç­–ç•¥</p>
<p>å½“æˆ‘ä»¬å°†æ•°æ®åº“çš„éš”ç¦»çº§åˆ«å®šä¹‰ä¸ºæŸä¸€çº§åˆ«åå¦‚ä»ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ sql çš„é”æ¥è¦†ç›–äº‹åŠ¡éš”ç¦»çº§åˆ«é»˜è®¤çš„é”æœºåˆ¶</p>
</blockquote>
</li>
<li>
<p>å…±äº«é”(è¯»é”ï¼ŒSé”)å’Œæ’ä»–é”(å†™é”ï¼ŒXé”)</p>
<blockquote>
<ul>
<li>
<p>å…±äº«é”(Sé”)ï¼š</p>
<p>å…±äº« (S) ç”¨äºä¸æ›´æ”¹æˆ–ä¸æ›´æ–°æ•°æ®çš„æ“ä½œï¼ˆåªè¯»æ“ä½œï¼‰ï¼Œå¦‚ SELECT è¯­å¥ã€‚</p>
<p>å¦‚æœäº‹åŠ¡T<strong>å¯¹æ•°æ®A</strong>åŠ ä¸Šå…±äº«é”åï¼Œåˆ™å…¶ä»–äº‹åŠ¡<strong>åªèƒ½å¯¹Aå†åŠ å…±äº«é”</strong>ï¼Œä¸èƒ½åŠ æ’ä»–é”ã€‚</p>
<blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´è¯¥å…±äº«é”åªåŠ åœ¨äº‹åŠ¡è¯»å–çš„æ•°æ®ä¸Šé¢ï¼Œå…¶å®ƒäº‹åŠ¡åªèƒ½å†å†è¯¥æ•°æ®ä¸Šé¢åŠ å…±äº«é”ï¼Œä¸èƒ½åŠ æ’ä»–é”ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶å®ƒäº‹åŠ¡<strong>ä¸èƒ½å†ä¿®æ”¹æˆ–åˆ é™¤</strong>è¯¥äº‹åŠ¡</p>
</blockquote>
<p>è·å…±äº«é”çš„äº‹åŠ¡åªèƒ½è¯»æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹æˆ–åˆ é™¤æ•°æ®ã€‚</p>
</li>
<li>
<p>æ’ä»–é”(Xé”):</p>
<p>ç”¨äºæ•°æ®ä¿®æ”¹æ“ä½œï¼Œä¾‹å¦‚ INSERTã€UPDATE æˆ– DELETEã€‚ç¡®ä¿ä¸ä¼šåŒæ—¶åŒä¸€èµ„æºè¿›è¡Œå¤šé‡æ›´æ–°ã€‚</p>
<p>å¦‚æœäº‹åŠ¡Tå¯¹æ•°æ®AåŠ ä¸Šæ’ä»–é”åï¼Œåˆ™å…¶ä»–äº‹åŠ¡<strong>ä¸èƒ½å†å¯¹AåŠ ä»»ä»»ä½•ç±»å‹çš„å°é”</strong>ã€‚è·å‡†æ’ä»–é”çš„äº‹åŠ¡<strong>æ—¢èƒ½è¯»æ•°æ®ï¼Œåˆèƒ½ä¿®æ”¹æ•°æ®</strong>ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šç”±äºå¹¶å‘é—®é¢˜è€Œå¼•èµ·çš„æ•°æ®çš„ä¸ä¸€è‡´æ€§ï¼ˆæ•°æ®å†²çªï¼‰</p>
</li>
<li>
<p>è¿™é‡Œæ³¨æ„ï¼Œè¿™ä¸ªå…±äº«é”å’Œæ’ä»–é”æ˜¯é’ˆå¯¹å…·ä½“çš„æ•°æ®è€Œè¨€çš„</p>
<blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœäº‹åŠ¡1å†Aæ•°æ®ä¸ŠåŠ äº†å…±äº«é”ï¼Œåˆ™å…¶å®ƒäº‹åŠ¡åªèƒ½å†æ•°æ®Aä¸ŠåŠ å…±äº«é”</p>
<p>è€Œå…¶å®ƒäº‹åŠ¡å¯ä»¥å†å’ŒAæ•°æ®ä¸ç›¸äº¤çš„æ•°æ®ä¸ŠåŠ åˆ«çš„é”ï¼Œå› ä¸ºè¿™äº›æ•°æ®ä¸Šæ­¤æ—¶æ²¡æœ‰é”</p>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li>
<p>æ‚²è§‚é”å’Œä¹è§‚é”</p>
<blockquote>
<ul>
<li>
<p>ä¹è§‚é”ï¼š</p>
<p>â€‹		ä¹è§‚é”ä¸æ˜¯æ•°æ®åº“è‡ªå¸¦çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å»å®ç°ã€‚ä¹è§‚é”æ˜¯æŒ‡æ“ä½œæ•°æ®åº“æ—¶(æ›´æ–°æ“ä½œ)ï¼Œæƒ³æ³•å¾ˆä¹è§‚ï¼Œè®¤ä¸ºè¿™æ¬¡çš„æ“ä½œä¸ä¼šå¯¼è‡´å†²çªï¼Œåœ¨æ“ä½œæ•°æ®æ—¶ï¼Œå¹¶ä¸è¿›è¡Œä»»ä½•å…¶ä»–çš„ç‰¹æ®Šå¤„ç†ï¼ˆä¹Ÿå°±æ˜¯ä¸åŠ é”ï¼‰ï¼Œè€Œåœ¨è¿›è¡Œæ›´æ–°åï¼Œå†å»åˆ¤æ–­æ˜¯å¦æœ‰å†²çªäº†ã€‚</p>
<p>â€‹		é€šå¸¸å®ç°æ˜¯è¿™æ ·çš„ï¼šåœ¨è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œæ—¶(æ›´æ–°)ï¼Œå…ˆç»™æ•°æ®è¡¨åŠ ä¸€ä¸ªç‰ˆæœ¬(version)å­—æ®µï¼Œæ¯æ“ä½œä¸€æ¬¡ï¼Œå°†é‚£æ¡è®°å½•çš„ç‰ˆæœ¬å·åŠ 1ã€‚ä¹Ÿå°±æ˜¯å…ˆæŸ¥è¯¢å‡ºé‚£æ¡è®°å½•ï¼Œè·å–å‡ºversionå­—æ®µ,å¦‚æœè¦å¯¹é‚£æ¡è®°å½•è¿›è¡Œæ“ä½œ(æ›´æ–°),åˆ™å…ˆåˆ¤æ–­æ­¤åˆ»versionçš„å€¼æ˜¯å¦ä¸åˆšåˆšæŸ¥è¯¢å‡ºæ¥æ—¶çš„versionçš„å€¼ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¯´æ˜è¿™æ®µæœŸé—´ï¼Œæ²¡æœ‰å…¶ä»–ç¨‹åºå¯¹å…¶è¿›è¡Œæ“ä½œï¼Œåˆ™å¯ä»¥æ‰§è¡Œæ›´æ–°ï¼Œå°†versionå­—æ®µçš„å€¼åŠ 1ï¼›å¦‚æœæ›´æ–°æ—¶å‘ç°æ­¤åˆ»çš„versionå€¼ä¸åˆšåˆšè·å–å‡ºæ¥çš„versionçš„å€¼ä¸ç›¸ç­‰ï¼Œåˆ™è¯´æ˜è¿™æ®µæœŸé—´å·²ç»æœ‰å…¶ä»–ç¨‹åºå¯¹å…¶è¿›è¡Œæ“ä½œäº†ï¼Œåˆ™ä¸è¿›è¡Œæ›´æ–°æ“ä½œã€‚</p>
</li>
<li>
<p>æ‚²è§‚é”ï¼š</p>
<p>â€‹		ä¸ä¹è§‚é”ç›¸å¯¹åº”çš„å°±æ˜¯æ‚²è§‚é”äº†ã€‚æ‚²è§‚é”å°±æ˜¯åœ¨æ“ä½œæ•°æ®æ—¶ï¼Œè®¤ä¸ºæ­¤æ“ä½œä¼šå‡ºç°æ•°æ®å†²çªï¼Œæ‰€ä»¥åœ¨è¿›è¡Œæ¯æ¬¡æ“ä½œæ—¶éƒ½è¦é€šè¿‡è·å–é”æ‰èƒ½è¿›è¡Œå¯¹ç›¸åŒæ•°æ®çš„æ“ä½œï¼Œè¿™ç‚¹è·Ÿjavaä¸­çš„synchronizedå¾ˆç›¸ä¼¼ï¼Œæ‰€ä»¥æ‚²è§‚é”éœ€è¦è€—è´¹è¾ƒå¤šçš„æ—¶é—´ã€‚å¦å¤–ä¸ä¹è§‚é”ç›¸å¯¹åº”çš„ï¼Œæ‚²è§‚é”æ˜¯ç”±æ•°æ®åº“è‡ªå·±å®ç°äº†çš„ï¼Œè¦ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨æ•°æ®åº“çš„ç›¸å…³è¯­å¥å°±å¯ä»¥äº†ã€‚</p>
<p>â€‹		è¯´åˆ°è¿™é‡Œï¼Œç”±æ‚²è§‚é”æ¶‰åŠåˆ°çš„å¦å¤–ä¸¤ä¸ªé”æ¦‚å¿µå°±å‡ºæ¥äº†ï¼Œå®ƒä»¬å°±æ˜¯å…±äº«é”ä¸æ’å®ƒé”ã€‚å…±äº«é”å’Œæ’å®ƒé”æ˜¯æ‚²è§‚é”çš„ä¸åŒçš„å®ç°ï¼Œå®ƒä¿©éƒ½å±äºæ‚²è§‚é”çš„èŒƒç•´ã€‚</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenmh/p/3998614.html">ä»¥ä¸‹å‚è€ƒ</a></p>
</li>
<li>
<p>Read Uncommittes(ç›¸å½“äºUNLOCK)</p>
<blockquote>
<p>è¿™æ˜¯æœ€ä½çš„äº‹åŠ¡éš”ç¦»çº§åˆ«</p>
<p>è¯¥éš”ç¦»çº§åˆ«çš„è¯»æ“ä½œ<strong>ä¸ç”³è¯·</strong> <strong>å…±äº«é”</strong>ï¼Œè¿è¡Œè¯»å–æœªæäº¤çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¼šå‘ç”Ÿè„è¯»</p>
<p>è¯»æ“ä½œä¸ä¼šå½±å“å†™æ“ä½œè¯·æ±‚<strong>æ’ä»–é”</strong>ï¼Œ<strong>åŠ åœ¨è¦æ“ä½œçš„æ•°æ®ä¸Š</strong></p>
</blockquote>
</li>
<li>
<p>Read Committed(SQL Serveré»˜è®¤çº§åˆ«)</p>
<blockquote>
<p>è¯¥éš”ç¦»çº§åˆ«çš„äº‹åŠ¡ï¼Œè¯»æ“ä½œä¹‹å‰<strong>é¦–å…ˆç”³è¯·å¹¶è·å¾—å…±äº«é”</strong>ï¼Œ<strong>åŠ åœ¨è¦æ“ä½œçš„æ•°æ®ä¸Š</strong></p>
<p>è¯¥<strong>å…±äº«é”å…è®¸å…¶å®ƒäº‹åŠ¡è¯»å–è¯¥é”å®šçš„æ•°æ®ï¼Œä½†æ˜¯å†™æ“ä½œå¿…é¡»ç­‰å¾…é”é‡Šæ”¾</strong>ï¼Œä¸€èˆ¬è¯»å–å®Œå°±ä¼š<strong>ç«‹åˆ»é‡Šæ”¾å…±äº«é”</strong>ï¼Œç”±å‰é¢å¯çŸ¥ï¼Œå·²ç»åŠ äº†å…±äº«é”çš„æ•°æ®ä¸Šé¢åªèƒ½å†åŠ å…±äº«é”ï¼Œä¸èƒ½åŠ å…¶å®ƒç±»å‹çš„é”ã€‚</p>
<p>è€ŒåŠ äº†æ’ä»–é”çš„æ•°æ®ä¸Šä¸èƒ½åœ¨åŠ ä»»ä½•é”äº†</p>
<p>ä½†æ˜¯å¦‚æœä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡è¯»å–ï¼ŒåŠ ä¸€ä¸ªå…±äº«é”è¯»å–å®Œä¹‹åï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åŠ äº†æ’ä»–é”ä¿®æ”¹å®Œäº†ï¼Œè¿™ä¸ªäº‹åŠ¡å†åŠ å…±äº«é”è¯»å–ï¼Œé€ æˆä¸å¯é‡å¤è¯»</p>
</blockquote>
</li>
<li>
<p>Repeatable Read(å¯é‡å¤è¯»)</p>
<blockquote>
<p>è¿™ä¸ªéš”ç¦»çº§åˆ«çš„äº‹åŠ¡ï¼Œæ˜¯è¯»å–æ—¶ç”³è¯·å¹¶è·å¾—å…±äº«é”ï¼ŒåŠ åœ¨è¦æ“ä½œçš„æ•°æ®ä¸Šï¼Œè·å¾—åä¸æ˜¯ç«‹å³é‡Šæ”¾è€Œæ˜¯<strong>ä¸€ç›´ä¿æŒåˆ°äº‹åŠ¡ç»“æŸ</strong></p>
<p>è™½ç„¶è¿™ä¸ªéš”ç¦»çº§åˆ«çš„äº‹åŠ¡ä¼šç”³è¯·è·å¾—å¹¶ä¸€ç›´ä¿æŒå…±äº«é”ï¼Œä½†æ˜¯å®ƒåªèƒ½åœ¨ç¬¬ä¸€æ¬¡è¯»å–ç”³è¯·æ—¶ï¼Œåœ¨ç¬¦åˆæ¡ä»¶ä¸Šçš„æ•°æ®åŠ ä¸Šå…±äº«é”ï¼Œè€Œå¦‚æœå…¶å®ƒäº‹åŠ¡æ¥æ’å…¥æ•°æ®ï¼Œåˆ™è¿˜æ˜¯èƒ½æ’å…¥çš„ã€‚</p>
<p>åˆ™ä¼šé€ æˆå¹»å½±è¯»çš„ç°è±¡</p>
</blockquote>
</li>
<li>
<p>Serializable(åºåˆ—åŒ–)</p>
<blockquote>
<p>ä¸å…è®¸å…¶å®ƒäº‹åŠ¡æ’å…¥è¿™ä¸ªäº‹åŠ¡whereæ¡ä»¶ç›¸åŒ¹é…çš„æ•°æ®</p>
</blockquote>
</li>
</ul>
<h1 id="å›æ»šæœºåˆ¶rollback"><a class="markdownIt-Anchor" href="#å›æ»šæœºåˆ¶rollback"></a> å›æ»šæœºåˆ¶rollback</h1>
<ul>
<li>
<p>æ’¤é”€äº‹åŠ¡ä¸­æ‰€åšçš„æ“ä½œ</p>
<p>åœ¨äº‹åŠ¡å½“ä¸­æŒ‡å®šæ¡ä»¶åæ‰§è¡Œrollback</p>
</li>
<li>
<p>åƒé™¤ä»¥0æˆ–è¿åçº¦æŸè¿™æ ·çš„æ•…éšœä¹Ÿä¼šå¯¼è‡´å›æ»šï¼Œå³ä½¿ç¨‹åºå‘˜æ²¡æœ‰è¦æ±‚ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
</li>
</ul>
<h1 id="å…³ç³»ä»£æ•°setså³ç»“æœä¸ºé›†åˆ"><a class="markdownIt-Anchor" href="#å…³ç³»ä»£æ•°setså³ç»“æœä¸ºé›†åˆ"></a> å…³ç³»ä»£æ•°(sets,å³ç»“æœä¸ºé›†åˆ)</h1>
<ul>
<li>
<p>æ“ä½œå…³ç³»æˆ–è€…ä»£è¡¨å…³ç³»çš„å˜é‡</p>
</li>
<li>
<p>è¿ç®—çš„ç»“æœè¿˜æ˜¯å…³ç³»</p>
</li>
<li>
<p>è¿ç®—ç¬¦</p>
<ul>
<li>
<p>union,intersection,difference</p>
<blockquote>
<p>RâˆªS</p>
<p>Râˆ©S</p>
<p>R-S</p>
</blockquote>
</li>
<li>
<p>selection</p>
<blockquote>
<p>R1:=Ïƒ<em>C</em> (R2)</p>
<p>ä»R2ä¸­é€‰å‡ºæ»¡è¶³æ¡ä»¶Cçš„å…ƒç»„ï¼ŒæŠŠé€‰å‡ºæ¥çš„å…ƒç»„å‘½åä¸ºR1</p>
<p>å…³ç³»ä¸­çš„å­—ç¬¦ä¸²åŠ å•å¼•å·</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/u2ZEGw4qmjrQ3TB.png" alt="image.png" /></p>
</li>
<li>
<p>projectionæŠ•å½±</p>
<blockquote>
<p>R1:=Î L(R2)</p>
<p>æŠŠR2çš„æŸäº›å±æ€§æŠ•å½±å‡ºæ¥ï¼Œèµ·åä¸ºR1</p>
<p>å¦‚æœæœ‰é‡å¤çš„å…ƒç´ è¦<strong>å»é‡</strong>ï¼Œä¸ºé›†åˆ</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/1Q27AP6KfhUMwcs.png" alt="image.png" /></p>
<blockquote>
<p>æ‰©å±•æˆè¿ç®—ï¼Œå³æŠ•å½±æ—¶ä½¿ç”¨ç›¸åŒçš„Ï€Lè¿ç®—ç¬¦ï¼Œæˆ‘ä»¬å…è®¸åˆ—è¡¨LåŒ…å«æ¶‰åŠå±æ€§çš„ä»»æ„è¡¨è¾¾å¼ã€‚<br />
å¯¹å±æ€§è¿›è¡Œè¿ç®—ï¼Œä¾‹å¦‚ï¼ŒA+B-&gt;Cã€‚<br />
åŒä¸€å±æ€§çš„é‡å¤å‡ºç°ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/6mwgiOFZuzv4C7G.png" alt="image.png" /></p>
<blockquote>
<p>æ›´æ ‡å‡†çš„å†™æ³•æ˜¯ä¸‹é¢è¿™ä¸ª</p>
</blockquote>
</li>
<li>
<p>prodcuts,joins</p>
<ul>
<li>ç¬›å¡å°”ä¹˜ç§¯</li>
</ul>
<blockquote>
<p>R3:=R1xR2</p>
<p>pair each tuple t1 of R1 with each tuple t2 of R2</p>
<p>But beware attribute <em>A</em> of the same name in R1 and R2: use R1.<em>A</em> and R2.<em>A</em>.</p>
<p>ä½†è¦æ³¨æ„R1å’ŒR2ä¸­åŒåçš„å±æ€§Aï¼šç”¨R1.Aå’ŒR2.Aã€‚</p>
<p>Schema of R3 is the attributes of R1 and then R2, in order.</p>
<p>R3çš„Schemaæ˜¯R1çš„å±æ€§ï¼Œç„¶åæ˜¯R2çš„å±æ€§ï¼Œä¾æ¬¡æ’åˆ—ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/AI9wTVZo1O5JMGH.png" alt="image.png" /></p>
<ul>
<li>Theta-join</li>
</ul>
<blockquote>
<p>R3 := R1 â‹ˆ<em>C</em> R2</p>
<p>Take the product R1 Î§ R2.</p>
<p>Then apply Ïƒ<em>C</em> to the result.</p>
<p>è‡³äºÏƒï¼ŒCå¯ä»¥æ˜¯ä»»ä½•å¸ƒå°”å€¼çš„æ¡ä»¶ã€‚</p>
<p>è¿™ä¸ªè¿ç®—ç¬¦çš„å†å²ç‰ˆæœ¬åªå…è®¸A Î¸ Bï¼Œå…¶ä¸­Î¸æ˜¯=ã€&lt;ç­‰ï¼›å› æ­¤è¢«ç§°ä¸º â€œÎ¸-joinâ€ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/6HiEInVyXJmTqo4.png" alt="image.png" /></p>
<ul>
<li>natural join</li>
</ul>
<blockquote>
<p>R3:=R1â‹ˆR2</p>
<p>Equating attributes of the same name, and</p>
<p>Projecting out one copy of each pair of equated attributes.</p>
<p>ç›¸å½“äºä¸‰éƒ¨æ“ä½œï¼š</p>
<p>1.ç¬›å¡å°”</p>
<p>2.é€‰æ‹©(ç›¸åŒåå­—å±æ€§å€¼ç›¸åŒçš„å…ƒç»„)</p>
<p>3.æŠ•å½±(ç›¸åŒåå­—å±æ€§åªæ˜¾ç¤ºä¸€åˆ—)</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/UfEBYwqhRzFL3gM.png" alt="image.png" /></p>
</li>
<li>
<p>renaming</p>
<blockquote>
<p>R1 := ÏR1(A1,â€¦,A<em>n</em>)(R2) makes R1 be a relation with attributes A1,â€¦,A<em>n</em> and the same tuples as R2.</p>
<p>Simplified notation: <strong>R1(A1,â€¦,A<em>n</em>) := R2</strong></p>
<p>æ³¨æ„ï¼šè¿™ä¸ªé‡å‘½åæ˜¯R1:=ÏR1(R2çš„å…¨éƒ¨å±æ€§å€¼çš„é‡å‘½å) (R2)</p>
<p>ä¹Ÿå°±æ˜¯è¯´æ‹¬å·é‡Œé¢æ˜¯æ‰€æœ‰å±æ€§çš„é‡å‘½åï¼Œå¯ä»¥å’ŒåŸæ¥ç›¸ç­‰ã€‚</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>ä¸æ”¹å˜å†…å®¹ï¼Œåªæ˜¯æ”¹è¡¨åå’Œåˆ—å</p>
<p><strong>åªè¦é‡å‘½åä¸€ä¸ªå±æ€§ï¼Œæ‰€æœ‰çš„å±æ€§çš„åå­—éƒ½è¦åˆ—å‡ºæ¥</strong></p>
<p>å¦‚æœä¸æ”¹å˜å±æ€§åå­—ï¼š</p>
<p>R1:=R2</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/wx12nmK43CsfeDY.png" alt="image.png" /></p>
</li>
<li>
<p>è¿ç®—ç¬¦ä¼˜å…ˆçº§</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/qX48mMonDwiaCU2.png" alt="image.png" /></p>
</li>
<li>
<p>ç¤ºä¾‹ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/fMvC94RUGeozyYw.png" alt="image.png" /></p>
</li>
<li>
<p>åšé¢˜æ—¶å¯ä»¥å…ˆå†™sqlè¯­å¥ï¼Œåœ¨è½¬æ¢æˆå…³ç³»ä»£æ•°</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/MSlj57spKTUZYhX.png" alt="image.png" /></p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.bars</span><br><span class="line"><span class="keyword">from</span> sells a,sells b</span><br><span class="line"><span class="keyword">where</span> a.bars = b.bars <span class="keyword">and</span> a.beer &lt; b.beer <span class="keyword">and</span> a.price = b.price;</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/OPEenbgs1TlzjBX.png" alt="image.png" /></p>
<blockquote>
<p>å…³ç³»ä»£æ•°ä¸­çš„ä¸ç­‰äºæ˜¯!=</p>
<p>æŠ•å½±å…³ç³»ä¸­çš„<strong>æŠ•å½±</strong>ä¼š<strong>å»é‡</strong></p>
</blockquote>
<h1 id="åœ¨bagsä¸Šçš„å…³ç³»è¿ç®—"><a class="markdownIt-Anchor" href="#åœ¨bagsä¸Šçš„å…³ç³»è¿ç®—"></a> åœ¨bagsä¸Šçš„å…³ç³»è¿ç®—</h1>
<ul>
<li>
<p>why bags?</p>
<blockquote>
<p>å…³ç³»å‹æ•°æ®åº“æœ€é‡è¦çš„æŸ¥è¯¢è¯­è¨€ï¼Œå…¶å®æ˜¯ä¸€ç§è¢‹è¯­è¨€ã€‚</p>
<p>æœ‰äº›æ“ä½œï¼Œæ¯”å¦‚æŠ•å½±ï¼Œåœ¨è¢‹ä¸Šçš„æ•ˆç‡æ¯”åœ¨é›†åˆä¸Šçš„æ•ˆç‡æ›´é«˜</p>
<p>å› ä¸ºé›†åˆè¦å…ˆå¯¹æ•°æ®è¿›è¡Œå»é‡å¤„ç†</p>
</blockquote>
</li>
<li>
<p>æ³¨æ„</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/01/vGFO5Wraiko2Dct.png" alt="image.png" /></p>
</li>
</ul>
<h1 id="å‡½æ•°ä¾èµ–"><a class="markdownIt-Anchor" href="#å‡½æ•°ä¾èµ–"></a> å‡½æ•°ä¾èµ–</h1>
<ul>
<li>
<p>å®šä¹‰åŠè¡¨ç¤ºæ–¹å¼</p>
<p>xä¸­çš„å€¼ä¸­ç›¸ç­‰ï¼Œåˆ™yä¸­çš„å€¼ä¹Ÿç›¸ç­‰ï¼Œxå†³å®šyæ˜¯æˆç«‹çš„</p>
<p>ä¸¤ä¸ªå…ƒç»„çš„xå€¼ç›¸ç­‰ï¼Œåˆ™è¿™ä¸¤ä¸ªå…ƒç»„çš„yå€¼ä¹Ÿä¸€æ ·</p>
<p>åˆ™ç§°x-&gt;yåœ¨Rä¸­æˆç«‹</p>
</li>
<li>
<p>æƒ¯ä¾‹ï¼š</p>
<blockquote>
<ul>
<li>
<p>â€¦ã€Xã€Yã€Zä»£è¡¨å±æ€§é›†ï¼›</p>
</li>
<li>
<p>Aã€Bã€Cã€â€¦ä»£è¡¨å•ä¸€å±æ€§ã€‚</p>
</li>
<li>
<p>æƒ¯ä¾‹ï¼šå¯¹äºå±æ€§é›†ï¼Œåªç”¨ABCï¼Œè€Œ<strong>ä¸æ˜¯</strong>{A,B,C}ã€‚</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>X-&gt;A1A2â€¦åœ¨Rä¸­æˆç«‹</p>
<p>å½“</p>
<p>X-&gt;A1ï¼ŒX-&gt;A2ï¼Œâ€¦ï¼ŒX-&gt;Anä¸­çš„æ¯ä¸€ä¸ªåœ¨Rä¸­æˆç«‹æ—¶</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/08/C9PEJvZB65RbO7j.png" alt="image.png" /></p>
</li>
<li>
<p>key(é”®)</p>
<ul>
<li>
<p>A1A2A3â€¦An is a key for relation R if:</p>
<ul>
<li>
<p>A1A2â€¦An functionally determines all other attributes of <em>R</em>.</p>
<p>A1A2â€¦Anèƒ½å†³å®šæ‰€æœ‰å…¶ä»–å±æ€§</p>
</li>
<li>
<p>No proper subset of A1A2â€¦An functionally determines all other attributes of <em>R</em>.</p>
<p>å…¶çœŸå­é›†ä¸èƒ½å†³å®š</p>
</li>
<li>
<p>A key must be <em>minimal</em>.</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>R(A,B,C,D,E)</p>
<p>AB-&gt;CDE</p>
<p>Aä¸ä¸€å®šå†³å®šBCDE  Bä¸ä¸€å®šå†³å®šACDE</p>
<p>æ‰€ä»¥ABæ˜¯key</p>
<p>C-&gt;ABDE</p>
<p>åŒç†Cä¹Ÿæ˜¯key</p>
<p>æ­¤æ—¶AB,Céƒ½èƒ½ä½œä¸ºè¯¥å…³ç³»çš„ä¸»é”®ã€‚</p>
<p>è‹¥é€‰ABä¸ºprimary key(ä¸»é”®)</p>
<p>åˆ™Cä¸ºcandidate key(å€™é€‰é”®)</p>
<p>ä¸€ä¸ªå…³ç³»å¯ä»¥æœ‰å¤šä¸ªé”®</p>
</blockquote>
</li>
<li>
<p>superkey(è¶…é”®)</p>
<blockquote>
<ul>
<li>
<p>A set of attributes that comtains a key is called a superkey</p>
<p>å³é”®çš„è¶…é›†</p>
</li>
<li>
<p>some superkeys are not (minimal) key</p>
<p>ä½†æ˜¯è¶…é”®ä¸ä¸€å®šæ˜¯é”®ï¼Œå³å®ƒçš„çœŸå­é›†å¯èƒ½èƒ½å¤Ÿå†³å®šå…¶å®ƒçš„å±æ€§</p>
</li>
<li>
<p>é”®æœ¬èº«ä¹Ÿæ˜¯è¶…é”®</p>
</li>
<li>
<p>ABä¸ºé”®</p>
<p>ABCä¸ºè¶…é”®</p>
<p>ABCDEä¸ºè¶…é”®</p>
<p>ABä¸ºè¶…é”®</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>æ¨æ–­Function Algebra</p>
<ul>
<li>
<p>æ¨ç†æµ‹è¯•</p>
<blockquote>
<p>å‡è®¾Y-&gt;Bæˆç«‹ï¼Œçœ‹Yå€¼ç›¸ç­‰æ—¶ï¼Œå…¶å®ƒç›¸ç­‰çš„å±æ€§å€¼ä¸­æ˜¯å¦åŒ…å«å±æ€§B</p>
</blockquote>
</li>
<li>
<p>ä¸¤ä¸ªå‡½æ•°ä¾èµ–çš„ç­‰ä»·(equivalent of FDâ€™s)</p>
<blockquote>
<ul>
<li>
<p>Two sets of FDâ€™s S and T are equivalent if the set of relation instances satisfying S is exactly the same as the set of relation instances satisfying T.</p>
<p>å¦‚æœæ»¡è¶³Sçš„å…³ç³»å®ä¾‹é›†ä¸æ»¡è¶³Tçš„å…³ç³»å®ä¾‹é›†å®Œå…¨ç›¸åŒï¼Œåˆ™FDçš„ä¸¤ä¸ªé›†åˆSå’ŒTæ˜¯ç­‰ä»·çš„ã€‚</p>
</li>
<li>
<p>A set of FDâ€™s S follows from a set of FDâ€™s T if every relation instance that satisfies all the FDâ€™s in T also satisfies all the FDâ€™s in S.</p>
<p>å¦‚æœæ»¡è¶³Tä¸­æ‰€æœ‰FDçš„æ¯ä¸€ä¸ªå…³ç³»å®ä¾‹ä¹Ÿæ»¡è¶³Sä¸­çš„æ‰€æœ‰FDï¼Œåˆ™FDçš„Sé›†ä»FDçš„Té›†å¼•å‡ºã€‚</p>
</li>
<li>
<p>Two sets of FDâ€™s S and T are equivalent iff S follows from T , and T follows from S.</p>
<p>ä¸¤ä¸ªFDâ€™s Så’ŒTçš„é›†åˆæ˜¯ç­‰ä»·çš„ï¼Œå¦‚æœSä»Tå¼•å‡ºï¼Œè€ŒTä»Så¼•å‡ºã€‚</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>Rules about FSâ€™s</p>
<blockquote>
<ul>
<li>
<p>Splitting rule:</p>
<p>*x-&gt;*A1A2â€¦An , then <em>X</em>-&gt;A1, X-&gt;A2,â€¦, X-&gt;An</p>
</li>
<li>
<p>Combining rule:</p>
<p>X-&gt;A1, X-&gt;A2,â€¦, X-&gt;An , then X-&gt;A1A2â€¦An</p>
</li>
<li>
<p>Reflexivity rule(è‡ªåè§„åˆ™/è‡ªåå¾‹)</p>
<p>If Y<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŠ†</mo></mrow><annotation encoding="application/x-tex">\subseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">âŠ†</span></span></span></span>X then X-&gt;Y</p>
</li>
<li>
<p>Augmentation rule(å¢å¹¿è§„åˆ™)</p>
<p>if x-&gt;y then xz-&gt;yz</p>
</li>
<li>
<p>Transitive rule(ä¼ é€’è§„åˆ™)</p>
<p>if x-&gt;y and y-&gt;z then x-&gt;z</p>
</li>
<li>
<p>Union rule(åˆå¹¶è§„åˆ™)</p>
<p>if x-&gt;y,x-&gt;z then x-&gt;yz</p>
</li>
<li>
<p>Pseudo transitivity rule(ä¼ªä¼ é€’è§„åˆ™)</p>
<p>if x-&gt;y,wy-&gt;z then xw-&gt;z</p>
<blockquote>
<p>x-&gt;y =&gt; xw-&gt;wy</p>
<p>wy-&gt;z</p>
<p>æ ¹æ®ä¼ é€’è§„åˆ™</p>
</blockquote>
</li>
<li>
<p>Decomposition rule(åˆ†è§£è§„åˆ™)</p>
<p>if x-&gt;y,z<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŠ†</mo></mrow><annotation encoding="application/x-tex">\subseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">âŠ†</span></span></span></span>y then x-&gt;z</p>
</li>
<li>
<p>Composition rule(å¤åˆè§„åˆ™)</p>
<p>if x-&gt;y,w-&gt;z then xw-&gt;yz</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>å¹³å‡¡å‡½æ•°ä¾èµ–(Trivial FDâ€™s)</p>
<ul>
<li>
<p>y<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŠ†</mo></mrow><annotation encoding="application/x-tex">\subseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">âŠ†</span></span></span></span>x then x-&gt;y is a trivial FD</p>
<p>The right side of a trivial FD is a subset of its left side</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2021/01/02/az9rmv6xMXWBPkw.png" alt="image-20201210105003942.png" /></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/10/DBx5hAzn7CqoTEg.jpg" alt="E665C48AEB2FEAAD5769BE88A52958C0.jpg" /></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å±æ€§é—­åŒ…(Closure of Attributes)</p>
<blockquote>
<ul>
<li>
<p>{A1, A2, â€¦, An}: a set of attributes</p>
</li>
<li>
<p>S: a set of FDâ€™s</p>
</li>
<li>
<p>Closure of {A1, A2, â€¦, An} under S is the set of attributes B that satisfies A1, A2, â€¦, An-&gt;B.</p>
<p>Marked as {A1, A2, â€¦, An}+</p>
</li>
<li>
<p>A1, A2, â€¦, An  also in {A1, A2, â€¦, An}+</p>
</li>
<li>
<p>{A1,A2,â€¦,An}+={B|A1,A2,â€¦,An-&gt;B}</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>å·²çŸ¥å‡½æ•°ä¾èµ–ï¼Œæ±‚key</p>
<ul>
<li>æ‰¾åªåœ¨å‡½æ•°ä¾èµ–å·¦è¾¹å‡ºç°çš„å±æ€§
<ul>
<li>è¿™äº›å±æ€§ä¸€å®šå‡ºç°åœ¨keyä¸­</li>
</ul>
</li>
<li>æ‰¾åªåœ¨å‡½æ•°ä¾èµ–å³è¾¹å‡ºç°çš„å±æ€§
<ul>
<li>è¿™äº›å±æ€§ä¸ä¼šå‡ºç°åœ¨keyä¸­ï¼Œå› ä¸ºåˆ«çš„å±æ€§èƒ½å¤Ÿå†³å®šä»–ï¼Œä»–ä¸èƒ½å†³å®šå±æ€§</li>
</ul>
</li>
<li>æ‰¾æ²¡æœ‰åœ¨å‡½æ•°ä¾èµ–ä¸­å‡ºç°çš„å±æ€§
<ul>
<li>è¿™äº›å±æ€§ä¸€å®šå‡ºç°åœ¨keyä¸­</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å‡½æ•°ä¾èµ–çš„é—­åŒ…</p>
<ul>
<li>
<p>Fåœ¨é€»è¾‘ä¸Šéšå«çš„æ‰€æœ‰FDçš„é›†åˆå°±æ˜¯Fçš„é—­åˆã€‚æˆ‘ä»¬ç”¨F+è¡¨ç¤ºFçš„é—­åˆ</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/15/cQzF2A6amqokbPn.png" alt="image.png" /></p>
</li>
</ul>
</li>
<li>
<p>åŸº(Basis)</p>
<ul>
<li>
<p>Fé—­åŒ…å’ŒFæ˜¯ç­‰ä»·çš„</p>
</li>
<li>
<p>å¦‚æœFçš„é—­åŒ…å’ŒGçš„é—­åŒ…ç›¸ç­‰ï¼Œåˆ™Få’ŒGç­‰ä»·</p>
</li>
<li>
<p>å’ŒFç­‰ä»·çš„å‡½æ•°ä¾èµ–é›†æˆä¸ºFçš„åŸº</p>
</li>
<li>
<p>ä¸€èˆ¬æ‰¾çš„æ˜¯minimal basisæœ€å°åŸº</p>
<ul>
<li>æ‰€æœ‰å‡½æ•°ä¾èµ–çš„å³è¾¹éƒ½æ˜¯å•ä¸€å±æ€§</li>
</ul>
</li>
<li>
<p>æœ€å°åŸºä¸­çš„æ‰€æœ‰å‡½æ•°ä¾èµ–éƒ½ä¸èƒ½å»æ‰ï¼Œä¸ç„¶ä¼šä¸ç­‰ä»·ï¼Œæ²¡æœ‰å¤šä½™çš„å‡½æ•°ä¾èµ–</p>
<ul>
<li>ä»»ä½•å‡½æ•°ä¾èµ–çš„å·¦ä¾§éƒ½ä¸èƒ½å»æ‰ä»»ä½•å±æ€§</li>
</ul>
<blockquote>
<p>æœ€å°åŸºå¯èƒ½æœ‰å¤šä¸ª</p>
</blockquote>
</li>
</ul>
<blockquote>
<ul>
<li>Consider R(A, B, C), and FDâ€™s Aâ†’B, Bâ†’A, Bâ†’C, Aâ†’C, Câ†’A. List the minimal basis.
<ul>
<li>{Aâ†’B, Bâ†’C, Câ†’A}</li>
<li>{A-&gt;B,B-&gt;A,A-&gt;C,C-&gt;A}</li>
</ul>
</li>
</ul>
</blockquote>
</li>
<li>
<p>æŠ•å½±ä¹‹åçš„å‡½æ•°ä¾èµ–</p>
<ul>
<li>
<p>R æœ‰ä¸ªå‡½æ•°ä¾èµ–FDâ€™s RæŠ•å½±ä¸ºR1ï¼Œæ±‚R1çš„å‡½æ•°ä¾èµ–</p>
<blockquote>
<p>å¯¹Rçš„æ¯ä¸ªå­é›†xç®—xçš„é—­åŒ…x+</p>
<p>åœ¨x+çš„å‡½æ•°ä¾èµ–ä¸­æ‰¾ï¼Œx-&gt;A A in xÂ±x and A in R1</p>
<p>å³è¿™ä¸ªå‡½æ•°ä¾èµ–ä¸æ˜¯å¹³å‡¡çš„è€Œä¸”å±æ€§åœ¨R1ä¸­</p>
<p>æ‰¾åˆ°ä¹‹åï¼Œåˆ™ä¸¢å¼ƒxy-&gt;A</p>
<p>åˆ™å‰©ä¸‹çš„å‡½æ•°ä¾èµ–å°±æ˜¯åœ¨R1ä¸Šæˆç«‹çš„å‡½æ•°ä¾èµ–</p>
<blockquote>
<p>ä¸è®¡ç®—æ‰€æœ‰å±æ€§å’Œç©ºé›†çš„é—­åŒ…</p>
<p>x+åŒ…å«æ‰€æœ‰å±æ€§ï¼Œåˆ™ä¸è®¡ç®—xçš„superset</p>
</blockquote>
<blockquote>
<p>R(A,B,C)</p>
<p>A-&gt;B B-&gt;C</p>
<p>R1 = Î AC( R )</p>
<blockquote>
<p>å…ˆè®¡ç®—Açš„é—­åŒ…ï¼š</p>
<p>A+ = ABC</p>
<blockquote>
<p>æ­¤æ—¶Açš„é—­åŒ…åŒ…å«å…¨éƒ¨å±æ€§ï¼Œæ‰€ä»¥ä¸ç”¨å†ç®—Açš„è¶…é›†çš„é—­åŒ…äº†</p>
</blockquote>
<p>A-&gt;Aæ˜¯å¹³å‡¡çš„ï¼Œä¸éœ€è¦</p>
<p>A-&gt;Bä¸æ»¡è¶³æ¡ä»¶</p>
<p>å‰©ä¸‹A-&gt;C</p>
<p>æŒ‰ç…§é¡ºåºï¼Œæ­¤æ—¶åº”è¯¥è®¡ç®—Bçš„é—­åŒ…ï¼Œä½†æ˜¯Bä¸å†R1ä¸­ï¼Œæ‰€ä»¥ä¸ç”¨è®¡ç®—</p>
<p>è®¡ç®—Cçš„é—­åŒ…ï¼š</p>
<p>C+ = C</p>
<p>C-&gt;Cæ˜¯å¹³å‡¡çš„ï¼Œä¸è¦</p>
<p>åˆ™A-&gt;Cæ˜¯R1çš„å‡½æ•°é—­åŒ…</p>
</blockquote>
<blockquote>
<p>ä¾‹é¢˜ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2021/01/02/8u6YWLrptTZdPvN.jpg" alt="C46D333293C80B16FD70F780FBA5892A.png" /></p>
</blockquote>
</blockquote>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="anomalieså¼‚å¸¸æƒ…å†µ"><a class="markdownIt-Anchor" href="#anomalieså¼‚å¸¸æƒ…å†µ"></a> Anomalies(å¼‚å¸¸æƒ…å†µ)</h1>
<ul>
<li>
<p>å¼‚å¸¸æƒ…å†µ</p>
<ul>
<li>redundant</li>
<li>updae anomaly</li>
<li>deletion anomaly</li>
</ul>
<blockquote>
<p>å› ä¸ºæŠŠä¸è¯¥æ”¾åœ¨ä¸€èµ·çš„æ”¾åœ¨ä¸€èµ·</p>
</blockquote>
</li>
<li>
<p>solution</p>
<ul>
<li>
<p>Decomposition  è¿›è¡Œåˆ†è§£</p>
</li>
<li>
<p>Boyce-Codd Normal Form BCèŒƒå¼</p>
<p>ç”¨æ¥è¡¡é‡åˆ†è§£çš„ç»“æœï¼Œå¦‚æœä¸€ä¸ªç»“æœå±äºBCèŒƒå¼ï¼Œåˆ™ä¸ä¼šå‡ºç°ä¸Šè¿°é—®é¢˜</p>
<ul>
<li>
<p>å…³ç³»çš„å‡½æ•°ä¾èµ–çš„å·¦è¾¹åº”è¯¥æ˜¯è¶…é”®</p>
</li>
<li>
<p>ä¸”è¯¥å‡½æ•°ä¾èµ–æ˜¯éå¹³å‡¡çš„</p>
<blockquote>
<p>å¦‚æœå…³ç³»æ²¡æœ‰å‡½æ•°ä¾èµ–ï¼Œåˆ™ä¹Ÿæ˜¯BCèŒƒå¼</p>
<p>ä»»ä½•åªæœ‰ä¸¤ä¸ªå±æ€§çš„å…³ç³»éƒ½å±äºBCèŒƒå¼</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>BCèŒƒå¼åˆ†è§£ç®—æ³•</p>
<blockquote>
<p>è¾“å…¥ï¼šä¸€ä¸ªå…³ç³»R0ä»¥åŠå‡½æ•°ä¾èµ–é›†</p>
<p>ç°æ ¹æ®å‡½æ•°ä¾èµ–æ‰¾å‡º<strong>æ‰€æœ‰</strong>key</p>
<p>è¾“å‡ºï¼šR0çš„åˆ†è§£ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªå…³ç³»å±äºBCèŒƒå¼</p>
<p>R = R0, S = S0</p>
<p>Rä¸ºå…³ç³»ï¼ŒSä¸ºå‡½æ•°ä¾èµ–çš„é›†åˆ</p>
<p>æ ¹æ®Sæ‰¾å‡ºRä¸­çš„key</p>
<p>{</p>
<p>â€‹	åˆ¤æ–­Rçš„Sæ˜¯å¦å…¨æ˜¯BCèŒƒå¼</p>
<p>â€‹	è‹¥ä¸æ˜¯BCèŒƒå¼ï¼Œåˆ™æ‰¾å‡ºå·¦è¾¹ä¸æ˜¯è¶…é”®çš„å‡½æ•°ä¾èµ–ï¼Œå°†Råˆ’åˆ†ä¸¤ä¸ªå…³ç³»R1,R2</p>
<p>â€‹	R1 = X+ ,R2 = R - X+ + X</p>
<blockquote>
<p>Xä¸ºè¯¥å·¦è¾¹ä¸æ˜¯è¶…é”®çš„å‡½æ•°ä¾èµ–çš„å·¦è¾¹çš„å±æ€§</p>
</blockquote>
<p>â€‹	ç®—å‡ºR1,R2çš„å‡½æ•°ä¾èµ–S1,S2</p>
<p>â€‹	æ ¹æ®S1,S2æ‰¾å‡ºR1,R2çš„<strong>æ‰€æœ‰</strong>key</p>
<p>â€‹	é€’å½’åˆ¤æ–­R1,R2</p>
<p>}</p>
<p>åˆ†è§£ç»“æœä¸å”¯ä¸€ï¼Œä¸ºäº†ç»Ÿä¸€ç»“æœ</p>
<p><strong>ä»å·¦åˆ°å³åˆ¤æ–­å‡½æ•°ä¾èµ–</strong></p>
<p>ä¾‹é¢˜ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2021/01/02/4MjOg8P257TpZNJ.jpg" alt="9CCDD6F7F138D8204FB55E5B7ADBC388.png" /></p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="lossless-joinæ— æŸè¿æ¥"><a class="markdownIt-Anchor" href="#lossless-joinæ— æŸè¿æ¥"></a> Lossless join(æ— æŸè¿æ¥)</h1>
<ul>
<li>
<p>åˆ†è§£å‡ºæ¥çš„ä¸¤ä¸ªè¡¨è¿›è¡Œè‡ªç„¶è¿æ¥å’Œåˆ†è§£ä¹‹å‰çš„é‚£ä¸ªè¡¨çš„ç»“æœç›¸åŒ</p>
</li>
<li>
<p>ä½¿ç”¨BCèŒƒå¼è¿›è¡Œåˆ†è§£çš„ä¸¤ä¸ªè¡¨å°±æ˜¯æ— æŸè¿æ¥</p>
<blockquote>
<p>è¯æ˜ä¸æ˜¯æ˜¯æ— æŸèŒƒå¼ï¼Œåªéœ€è¦æ‰¾å‡ºä¸€ä¸ªä¸ç¬¦åˆçš„ä¾‹å­</p>
<p>è¯æ˜æ˜¯æ— æŸèŒƒå¼ï¼Œéœ€è¦è¯æ˜</p>
</blockquote>
</li>
</ul>
<h1 id="è¯æ˜æ— æŸè¿æ¥"><a class="markdownIt-Anchor" href="#è¯æ˜æ— æŸè¿æ¥"></a> è¯æ˜æ— æŸè¿æ¥</h1>
<ul>
<li>
<p>if t âˆˆ R åˆ™ t âˆˆ R1 ğŸ€ R2</p>
</li>
<li>
<p>if t âˆˆ R1 ğŸ€ R2 åˆ™ t âˆˆ R</p>
<blockquote>
<p>è®¾Rä¸­æœ‰ä¸¤ä¸ªå…ƒç»„(a,b,c)å’Œ(d,b,e)</p>
<p>é€šè¿‡æ˜ å°„å¾—å‡ºåœ¨R1ğŸ€R2ä¸­å­˜åœ¨(abd)(dbe)(abe)(dbc)</p>
<p>åœ¨ç»§ç»­æ ¹æ®ç»™å®šçš„è‡ªç„¶è¿æ¥åçš„å…³ç³»çš„å‡½æ•°ä¾èµ–(å¯é‡å¤ä½¿ç”¨)è¿›è¡Œåˆ¤æ–­ï¼Œ(abe)å’Œ(dbc)æ˜¯å¦å­˜åœ¨</p>
</blockquote>
</li>
<li>
<p>BCèŒƒå¼çš„å¾—åˆ°è¿‡ç¨‹æ˜¯é€’å½’çš„ï¼Œåªè¦ä¿è¯æ¯æ¬¡é€’å½’éƒ½æ˜¯æ— æŸçš„ï¼Œåˆ™æœ€åæ ¹æ®BCèŒƒå¼å¾—åˆ°çš„å…³ç³»æ˜¯æ— æŸçš„</p>
</li>
</ul>
<h1 id="åˆ†è§£å®Œä¹‹åçš„è¡¨åœ¨natural-joinåå¯èƒ½ä¸¢å¤±å‡½æ•°ä¾èµ–"><a class="markdownIt-Anchor" href="#åˆ†è§£å®Œä¹‹åçš„è¡¨åœ¨natural-joinåå¯èƒ½ä¸¢å¤±å‡½æ•°ä¾èµ–"></a> åˆ†è§£å®Œä¹‹åçš„è¡¨åœ¨natural joinåå¯èƒ½ä¸¢å¤±å‡½æ•°ä¾èµ–</h1>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/22/9VS6tTEaYIbFJvN.png" alt="image.png" /></p>
<h1 id="å¼•å…¥ç¬¬ä¸‰èŒƒå¼-3nf"><a class="markdownIt-Anchor" href="#å¼•å…¥ç¬¬ä¸‰èŒƒå¼-3nf"></a> å¼•å…¥ç¬¬ä¸‰èŒƒå¼ 3NF</h1>
<p>æ”¾æ¾äº†æ¡ä»¶ï¼ŒBCèŒƒå¼è¦æ±‚å‡½æ•°ä¾èµ–çš„å·¦è¾¹éƒ½æ˜¯è¶…é”®</p>
<ul>
<li>
<p>ä¸»å±æ€§(prime)</p>
<p>å¦‚æœè¯¥å±æ€§æ˜¯keyçš„ä¸€ä¸ªæˆå‘˜</p>
</li>
<li>
<p>å¦‚æœä»»ä½•ä¸€ä¸ªéå¹³å‡¡å‡½æ•°ä¾èµ–ï¼Œå·¦ä¾§æ˜¯ä¸ªè¶…é”®æˆ–è€…å³ä¾§å±æ€§(ä¸åŒ…å«å·¦ä¾§å±æ€§)æ˜¯æŸä¸ªkeyçš„æˆå‘˜ï¼Œå³ä¸ºä¸»å±æ€§</p>
</li>
</ul>
<h1 id="åˆ†è§£æ—¶è¦æ±‚æ— æŸå’Œä¸ä¸¢å¤±å‡½æ•°ä¾èµ–"><a class="markdownIt-Anchor" href="#åˆ†è§£æ—¶è¦æ±‚æ— æŸå’Œä¸ä¸¢å¤±å‡½æ•°ä¾èµ–"></a> åˆ†è§£æ—¶è¦æ±‚æ— æŸå’Œä¸ä¸¢å¤±å‡½æ•°ä¾èµ–</h1>
<ul>
<li>
<p>æŒ‰ç…§BCèŒƒå¼åªèƒ½ä¿è¯æ— æŸï¼Œä¹Ÿå¯èƒ½ä¸ä¸¢å¤±å‡½æ•°ä¾èµ–</p>
</li>
<li>
<p>3NFä¸¤ä¸ªéƒ½èƒ½ä¿è¯</p>
</li>
<li>
<p>ä½†æ˜¯BCèŒƒå¼çš„çº§åˆ«æ¯”3NFæ›´ğŸ‚</p>
<p>å¦‚æœæ˜¯BCèŒƒå¼åˆ™ä¸€å®šæ˜¯3NF</p>
</li>
<li>
<p>åˆ†è§£æ—¶æŒ‰ç…§çš„æ˜¯åˆ¤æ–­åˆ†è§£åçš„å…³ç³»æ˜¯å¦æ˜¯BCèŒƒå¼ï¼Œè‹¥ä¸æ˜¯åˆ™ç»§ç»­åˆ†è§£ã€‚</p>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯3NFï¼Œæ­¤æ—¶æ¡ä»¶è¦æ±‚å°±æ¾äº†</p>
</li>
<li>
<p>1NFåŒ…å«2NFåŒ…å«3NFåŒ…å«BCNF</p>
</li>
</ul>
<h1 id="è¿½é€æµ‹è¯•chase-test"><a class="markdownIt-Anchor" href="#è¿½é€æµ‹è¯•chase-test"></a> è¿½é€æµ‹è¯•(chase test)</h1>
<ul>
<li>åˆ¤æ–­æ˜¯å¦æ˜¯æ— æŸåˆ†è§£</li>
<li>å°±æ˜¯å‰é¢é‚£ä¸ª</li>
</ul>
<h1 id="ç¬¬ä¸‰èŒƒå¼çš„åˆ†è§£ç®—æ³•"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰èŒƒå¼çš„åˆ†è§£ç®—æ³•"></a> ç¬¬ä¸‰èŒƒå¼çš„åˆ†è§£ç®—æ³•</h1>
<ul>
<li>
<p>æ‰¾åˆ°Fçš„æœ€å°åŸº(minimal basis)ï¼Œåªéœ€è¦æ‰¾åˆ°ä¸€ä¸ª</p>
</li>
<li>
<p>æœ€å°åŸºä¸­çš„æ¯ä¸ªå‡½æ•°ä¾èµ–å¯¹åº”ä¸€ä¸ªå…³ç³»</p>
<p>X-&gt;Açš„å‡½æ•°ä¾èµ–ï¼Œåˆ™å¯¹åº”ä½XAçš„å…³ç³»</p>
</li>
<li>
<p>å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ä¸ªå…³ç³»åŒ…å«ä¸€ä¸ªkeyï¼Œåˆ™åŠ ä¸€ä¸ªæ–°çš„åŒ…å«æŸä¸€ä¸ªkeyçš„å…³ç³»</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/12/22/kKLgJbVDX32vYBx.png" alt="image.png" /></p>
</li>
<li>
<p>å®é™…å½“ä¸­è¦æŠŠä¸€äº›è¡¨è¿›è¡Œåˆå¹¶ï¼Œå°±æ˜¯å‡½æ•°ä¾èµ–å·¦è¾¹ç›¸åŒçš„å…³ç³»ï¼Œæ¯”å¦‚ä¸Šé¢ä½ çš„ACå’ŒABå°±å¯ä»¥åˆå¹¶</p>
</li>
</ul>
<h1 id="æŸ¥è¯¢ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢ä¼˜åŒ–"></a> æŸ¥è¯¢ä¼˜åŒ–</h1>
<ul>
<li>è®©é€‰æ‹©å’ŒæŠ•å½±å°½é‡é å‰è¿›è¡Œ</li>
</ul>
</div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SQL/">SQL</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/08/07/GBcki6rT4lJ5sxE.jpg" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/09/20/XMLStudy/"><img class="prev-cover" data-lazy-src="https://i.loli.net/2020/08/07/ANUDZTzxelKj9EP.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">XMLStudy</div></div></a></div><div class="next-post pull-right"><a href="/2020/09/14/CssStudy/"><img class="next-cover" data-lazy-src="https://i.loli.net/2020/08/07/BMQmi25yfNgILhv.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">CssStudy</div></div></a></div></nav></article></main><footer id="footer" style="background-image: url(https://i.loli.net/2020/08/07/GBcki6rT4lJ5sxE.jpg)" data-type="photo"><div id="footer-wrap"><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">hi~ welcome to my blog</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="æ”¾å¤§å­—ä½“"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="ç¼©å°å­—ä½“"><i class="fas fa-minus"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script></div></body></html>